import{d as O,u as Q,x as H,p as j,c as K,a as b,o as u,b as s,e,g as W,w as t,f as a,t as d,S as w,h as n,k as Y,i as c,l as _,m as I,F as S,r as E,v as L,s as Z}from"./app-DuYven9w.js";import{_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-DBDNW3dx.js";import{_ as x}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-5P8sPbMk.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-uaO7FchS.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang--t-kf2zJ.js";import{_ as V,a as $}from"./CardContent.vue_vue_type_script_setup_true_lang-A_wKtMd5.js";import{_ as C,a as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-BOMNvAXB.js";import{_ as N}from"./Badge.vue_vue_type_script_setup_true_lang-BJql6qg4.js";import{_ as p}from"./Icon.vue_vue_type_script_setup_true_lang-B22T1yXp.js";import{_ as se}from"./Heading.vue_vue_type_script_setup_true_lang-BRAAOYuN.js";import{_ as v}from"./InputError.vue_vue_type_script_setup_true_lang-Cp42vaE2.js";import"./useForwardExpose-BMk6bTWi.js";import"./RovingFocusGroup-CZss80rg.js";import"./building-BE7K1GXi.js";import"./users-DIo_0UAy.js";import"./activity-Ckb4aK_L.js";import"./arrow-left-CncOMoKS.js";import"./calendar-DP7TRrVk.js";import"./check-CCN_hKCv.js";import"./chevron-down-DE3MDeT_.js";import"./search-CHcbFz1o.js";import"./eye-BSP_eqS9.js";import"./user-DqQweJq8.js";import"./loader-circle-C6aWLiTR.js";import"./sun-CHiFviOU.js";import"./play-BfK4gtAA.js";import"./plus-sb2eCx51.js";import"./square-pen-Dxax8hMl.js";import"./trash-2-9N1zjS01.js";import"./triangle-alert-DHoTqL2V.js";const te={class:"space-y-6"},ae={class:"flex items-center justify-between"},le={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},re={class:"flex items-center space-x-3"},oe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ie={class:"lg:col-span-2"},ne={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},me=["value"],ue=["value"],ge={key:0,class:"space-y-3"},_e={class:"relative inline-block"},fe=["src","alt"],ce={key:1,class:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg"},pe={class:"flex items-center gap-2"},be={class:"space-y-3"},ve={class:"relative"},ye={class:"mt-2 flex items-center gap-2 text-xs text-gray-500"},we={key:1,class:"mt-4 space-y-3"},xe={class:"relative inline-block"},ke=["src"],he={class:"flex items-center justify-between"},Ve={class:"space-y-6"},$e={class:"mt-1 text-sm text-gray-900 dark:text-gray-100 font-mono"},Ce={key:0},Te={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Ie={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Se={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Ue={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Ae={class:"flex justify-end pt-2"},ds=O({__name:"Edit",props:{asset:{},categories:{},locations:{}},setup(F){const{t:m}=Q(),f=F,r=H({serial_number:f.asset.serial_number||"",service_tag_number:f.asset.service_tag_number||"",finance_tag_number:f.asset.finance_tag_number||"",asset_category_id:f.asset.asset_category_id,location_id:f.asset.location_id,model_name:f.asset.model_name||"",model_number:f.asset.model_number||"",notes:f.asset.notes||"",image:null,remove_image:!1}),y=j(null),h=j(!1),M=K(()=>[{title:m("nav.dashboard"),href:"/dashboard"},{title:m("nav.assets"),href:"/assets"},{title:f.asset.asset_tag,href:`/assets/${f.asset.id}`},{title:m("assets.edit_asset"),href:`/assets/${f.asset.id}/edit`}]),B=o=>{switch(o){case"available":return"default";case"assigned":return"secondary";case"maintenance":return"destructive";case"retired":return"outline";default:return"secondary"}},R=o=>{var A;const l=o.target,i=(A=l.files)==null?void 0:A[0];if(!i){r.image=null,y.value=null;return}if(!["image/jpeg","image/png","image/jpg","image/gif"].includes(i.type)){alert(m("assets.invalid_file_type")),l.value="";return}if(i.size>5*1024*1024){alert(m("assets.file_too_large")),l.value="";return}r.image=i;const U=new FileReader;U.onload=J=>{var D;y.value=(D=J.target)==null?void 0:D.result},U.readAsDataURL(i)},G=()=>{r.image=null,y.value=null;const o=document.getElementById("image");o&&(o.value="")},P=()=>{h.value=!0,r.remove_image=!0},z=()=>{h.value=!1,r.remove_image=!1},X=()=>{console.warn("Failed to load asset image")},q=()=>{r.put(route("assets.update",f.asset.id),{onSuccess:()=>{y.value=null,h.value=!1,r.image=null,r.remove_image=!1}})};return(o,l)=>(u(),b(S,null,[s(e(W),{title:`${e(m)("assets.edit_asset")} - ${o.asset.asset_tag}`},null,8,["title"]),s(ee,{breadcrumbs:M.value},{default:t(()=>[a("div",te,[a("div",ae,[a("div",null,[s(se,{title:`${e(m)("assets.edit_asset")} - ${o.asset.asset_tag}`},null,8,["title"]),a("p",le,d(e(m)("assets.edit_asset_description")),1)]),a("div",re,[s(e(x),{variant:"outline",asChild:""},{default:t(()=>[s(e(w),{href:o.route("assets.show",o.asset.id)},{default:t(()=>[s(p,{name:"Eye",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),n(" "+d(e(m)("common.view")),1)]),_:1},8,["href"])]),_:1}),s(e(x),{variant:"outline",asChild:""},{default:t(()=>[s(e(w),{href:o.route("assets.index")},{default:t(()=>[s(p,{name:"ArrowLeft",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),n(" "+d(e(m)("common.back")),1)]),_:1},8,["href"])]),_:1})])]),a("div",oe,[a("div",ie,[a("form",{onSubmit:Y(q,["prevent"]),class:"space-y-6"},[s(e(V),null,{default:t(()=>[s(e(C),null,{default:t(()=>[s(e(T),null,{default:t(()=>[n(d(e(m)("assets.basic_information")),1)]),_:1})]),_:1}),s(e($),{class:"space-y-6"},{default:t(()=>[a("div",null,[s(e(g),{for:"asset_tag"},{default:t(()=>[n(d(e(m)("assets.asset_tag")),1)]),_:1}),s(e(k),{id:"asset_tag",value:o.asset.asset_tag,disabled:"",class:"mt-1 bg-gray-50 dark:bg-gray-800"},null,8,["value"]),l[8]||(l[8]=a("p",{class:"text-xs text-gray-500 mt-1"}," Asset tag cannot be changed ",-1))]),a("div",ne,[a("div",null,[s(e(g),{for:"serial_number"},{default:t(()=>[n(d(e(m)("assets.serial_number")),1)]),_:1}),s(e(k),{id:"serial_number",modelValue:e(r).serial_number,"onUpdate:modelValue":l[0]||(l[0]=i=>e(r).serial_number=i),placeholder:"Enter serial number",class:"mt-1"},null,8,["modelValue"]),e(r).errors.serial_number?(u(),c(v,{key:0,message:e(r).errors.serial_number,class:"mt-1"},null,8,["message"])):_("",!0)]),a("div",null,[s(e(g),{for:"service_tag_number"},{default:t(()=>[n(d(e(m)("assets.service_tag_number")),1)]),_:1}),s(e(k),{id:"service_tag_number",modelValue:e(r).service_tag_number,"onUpdate:modelValue":l[1]||(l[1]=i=>e(r).service_tag_number=i),placeholder:"Service tag number",class:"mt-1"},null,8,["modelValue"]),e(r).errors.service_tag_number?(u(),c(v,{key:0,message:e(r).errors.service_tag_number,class:"mt-1"},null,8,["message"])):_("",!0)]),a("div",null,[s(e(g),{for:"finance_tag_number"},{default:t(()=>[n(d(e(m)("assets.finance_tag_number")),1)]),_:1}),s(e(k),{id:"finance_tag_number",modelValue:e(r).finance_tag_number,"onUpdate:modelValue":l[2]||(l[2]=i=>e(r).finance_tag_number=i),placeholder:"Finance tag number",class:"mt-1"},null,8,["modelValue"]),e(r).errors.finance_tag_number?(u(),c(v,{key:0,message:e(r).errors.finance_tag_number,class:"mt-1"},null,8,["message"])):_("",!0)])]),a("div",de,[a("div",null,[s(e(g),{for:"model_name"},{default:t(()=>[n(d(e(m)("assets.model_name")),1)]),_:1}),s(e(k),{id:"model_name",modelValue:e(r).model_name,"onUpdate:modelValue":l[3]||(l[3]=i=>e(r).model_name=i),placeholder:"Model name",class:"mt-1"},null,8,["modelValue"]),e(r).errors.model_name?(u(),c(v,{key:0,message:e(r).errors.model_name,class:"mt-1"},null,8,["message"])):_("",!0)]),a("div",null,[s(e(g),{for:"model_number"},{default:t(()=>[n(d(e(m)("assets.model_number")),1)]),_:1}),s(e(k),{id:"model_number",modelValue:e(r).model_number,"onUpdate:modelValue":l[4]||(l[4]=i=>e(r).model_number=i),placeholder:"Model number",class:"mt-1"},null,8,["modelValue"]),e(r).errors.model_number?(u(),c(v,{key:0,message:e(r).errors.model_number,class:"mt-1"},null,8,["message"])):_("",!0)])]),a("div",null,[s(e(g),{for:"asset_category_id"},{default:t(()=>[n(d(e(m)("assets.category"))+" *",1)]),_:1}),I(a("select",{id:"asset_category_id","onUpdate:modelValue":l[5]||(l[5]=i=>e(r).asset_category_id=i),required:"",class:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[l[9]||(l[9]=a("option",{value:""},"Select a category",-1)),(u(!0),b(S,null,E(o.categories,i=>(u(),b("option",{key:i.id,value:i.id},d("â€”".repeat(Math.max(0,i.depth||0)))+" "+d(i.name),9,me))),128))],512),[[L,e(r).asset_category_id]]),e(r).errors.asset_category_id?(u(),c(v,{key:0,message:e(r).errors.asset_category_id,class:"mt-1"},null,8,["message"])):_("",!0)]),a("div",null,[s(e(g),{for:"location_id"},{default:t(()=>[n(d(e(m)("assets.location"))+" *",1)]),_:1}),I(a("select",{id:"location_id","onUpdate:modelValue":l[6]||(l[6]=i=>e(r).location_id=i),required:"",class:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[l[10]||(l[10]=a("option",{value:""},"Select a location",-1)),(u(!0),b(S,null,E(o.locations,i=>(u(),b("option",{key:i.id,value:i.id},d(i.code?`${i.code}: ${i.name}`:i.name),9,ue))),128))],512),[[L,e(r).location_id]]),e(r).errors.location_id?(u(),c(v,{key:0,message:e(r).errors.location_id,class:"mt-1"},null,8,["message"])):_("",!0)]),a("div",null,[s(e(g),{for:"notes"},{default:t(()=>[n(d(e(m)("assets.notes")),1)]),_:1}),I(a("textarea",{id:"notes","onUpdate:modelValue":l[7]||(l[7]=i=>e(r).notes=i),rows:"4",placeholder:"Additional notes about this asset",class:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[Z,e(r).notes]]),e(r).errors.notes?(u(),c(v,{key:0,message:e(r).errors.notes,class:"mt-1"},null,8,["message"])):_("",!0)])]),_:1})]),_:1}),s(e(V),null,{default:t(()=>[s(e(C),null,{default:t(()=>[s(e(T),null,{default:t(()=>[n(d(e(m)("assets.asset_image")),1)]),_:1})]),_:1}),s(e($),{class:"space-y-6"},{default:t(()=>[o.asset.image_path&&!h.value?(u(),b("div",ge,[s(e(g),{class:"text-sm font-medium"},{default:t(()=>l[11]||(l[11]=[n("Current Image")])),_:1,__:[11]}),a("div",_e,[a("img",{src:`/storage/${o.asset.image_path}`,alt:o.asset.asset_tag,class:"max-w-sm max-h-64 rounded-lg border-2 border-gray-200 dark:border-gray-600 shadow-sm",onError:X},null,40,fe),a("button",{type:"button",onClick:P,class:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-colors",title:"Remove current image"},[s(p,{name:"X",class:"h-4 w-4"})])]),l[12]||(l[12]=a("p",{class:"text-xs text-gray-500"},"Click the X to remove this image",-1))])):_("",!0),h.value?(u(),b("div",ce,[a("div",pe,[s(p,{name:"AlertTriangle",class:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}),l[13]||(l[13]=a("p",{class:"text-sm text-yellow-800 dark:text-yellow-200"}," Current image will be removed when you save the asset. ",-1)),a("button",{type:"button",onClick:z,class:"ml-auto text-sm text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 underline"}," Undo ")])])):_("",!0),a("div",be,[s(e(g),{for:"image",class:"text-sm font-medium"},{default:t(()=>[n(d(o.asset.image_path?"Replace Image":"Upload Image"),1)]),_:1}),a("div",ve,[a("input",{id:"image",type:"file",accept:"image/jpeg,image/png,image/jpg,image/gif",onChange:R,class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-3 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-gray-700 dark:file:text-gray-300 border border-gray-300 rounded-lg dark:border-gray-600"},null,32),a("div",ye,[s(p,{name:"Info",class:"h-4 w-4"}),l[14]||(l[14]=a("span",null,"Supported: PNG, JPG, GIF up to 5MB",-1))])]),e(r).errors.image?(u(),c(v,{key:0,message:e(r).errors.image,class:"mt-1"},null,8,["message"])):_("",!0),y.value?(u(),b("div",we,[s(e(g),{class:"text-sm font-medium text-green-700 dark:text-green-400"},{default:t(()=>l[15]||(l[15]=[n("New Image Preview")])),_:1,__:[15]}),a("div",xe,[a("img",{src:y.value,alt:"New image preview",class:"max-w-sm max-h-64 rounded-lg border-2 border-green-200 dark:border-green-600 shadow-sm"},null,8,ke),a("button",{type:"button",onClick:G,class:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-colors",title:"Remove new image"},[s(p,{name:"X",class:"h-4 w-4"})])])])):_("",!0)])]),_:1})]),_:1}),a("div",he,[s(e(x),{variant:"outline",type:"button",asChild:""},{default:t(()=>[s(e(w),{href:o.route("assets.show",o.asset.id)},{default:t(()=>[s(p,{name:"ArrowLeft",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),n(" "+d(e(m)("common.cancel")),1)]),_:1},8,["href"])]),_:1}),s(e(x),{type:"submit",disabled:e(r).processing,class:"min-w-32"},{default:t(()=>[e(r).processing?(u(),c(p,{key:0,name:"Loader2",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4 animate-spin"})):(u(),c(p,{key:1,name:"Save",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"})),n(" "+d(e(r).processing?e(m)("common.saving"):e(m)("common.save_changes")),1)]),_:1},8,["disabled"])])],32)]),a("div",Ve,[s(e(V),null,{default:t(()=>[s(e(C),null,{default:t(()=>[s(e(T),null,{default:t(()=>l[16]||(l[16]=[n("Asset Overview")])),_:1,__:[16]})]),_:1}),s(e($),{class:"space-y-4"},{default:t(()=>[a("div",null,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:t(()=>[n(d(e(m)("assets.asset_tag")),1)]),_:1}),a("p",$e,d(o.asset.asset_tag),1)]),a("div",null,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:t(()=>[n(d(e(m)("assets.status")),1)]),_:1}),s(e(N),{variant:B(o.asset.status),class:"mt-1"},{default:t(()=>[n(d(e(m)(`assets.status_${o.asset.status}`)),1)]),_:1},8,["variant"])]),o.asset.company?(u(),b("div",Ce,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:t(()=>[n(d(e(m)("assets.company")),1)]),_:1}),a("p",Te,d(o.asset.company.name_en),1)])):_("",!0),a("div",null,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:t(()=>[n(d(e(m)("assets.created_at")),1)]),_:1}),a("p",Ie,d(new Date(o.asset.created_at).toLocaleDateString()),1)]),a("div",null,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:t(()=>[n(d(e(m)("assets.updated_at")),1)]),_:1}),a("p",Se,d(new Date(o.asset.updated_at).toLocaleDateString()),1)])]),_:1})]),_:1}),o.asset.assetTemplate?(u(),c(e(V),{key:0},{default:t(()=>[s(e(C),null,{default:t(()=>[s(e(T),null,{default:t(()=>l[17]||(l[17]=[n("Template Information")])),_:1,__:[17]})]),_:1}),s(e($),{class:"space-y-3"},{default:t(()=>[a("div",null,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:t(()=>l[18]||(l[18]=[n(" Template Name ")])),_:1,__:[18]}),a("p",Ue,d(o.asset.assetTemplate.name),1)]),a("div",null,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:t(()=>l[19]||(l[19]=[n(" Template Type ")])),_:1,__:[19]}),s(e(N),{variant:o.asset.assetTemplate.is_global?"secondary":"default",class:"mt-1"},{default:t(()=>{var i;return[n(d(o.asset.assetTemplate.is_global?"Global":(i=o.asset.assetTemplate.company)==null?void 0:i.name_en),1)]}),_:1},8,["variant"])]),a("div",Ae,[s(e(w),{href:o.route("asset-templates.show",o.asset.assetTemplate.id),class:"inline-flex items-center text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"},{default:t(()=>[l[20]||(l[20]=n(" View Template ")),s(p,{name:"ExternalLink",class:"ml-1 rtl:ml-0 rtl:mr-1 h-3 w-3"})]),_:1,__:[20]},8,["href"])])]),_:1})]),_:1})):_("",!0),s(e(V),null,{default:t(()=>[s(e(C),null,{default:t(()=>[s(e(T),null,{default:t(()=>l[21]||(l[21]=[n("Quick Actions")])),_:1,__:[21]})]),_:1}),s(e($),{class:"space-y-3"},{default:t(()=>[s(e(x),{variant:"outline",size:"sm",asChild:"",class:"w-full justify-start"},{default:t(()=>[s(e(w),{href:o.route("assets.show",o.asset.id)},{default:t(()=>[s(p,{name:"Eye",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),l[22]||(l[22]=n(" View Details "))]),_:1,__:[22]},8,["href"])]),_:1}),s(e(x),{variant:"outline",size:"sm",asChild:"",class:"w-full justify-start"},{default:t(()=>[s(e(w),{href:o.route("assets.index")},{default:t(()=>[s(p,{name:"List",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),l[23]||(l[23]=n(" All Assets "))]),_:1,__:[23]},8,["href"])]),_:1})]),_:1})]),_:1})])])])]),_:1},8,["breadcrumbs"])],64))}});export{ds as default};
