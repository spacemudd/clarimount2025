import{d as re,u as le,p as F,c as ie,C as oe,W as ne,a as c,o as d,b as i,e as r,g as de,w as n,f as t,l as w,S as J,h as f,t as o,m as M,i as E,F as S,r as C,v as $,z as ue,D as ce}from"./app-rHGgcSzy.js";import{_ as me}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bes4-_Ei.js";import{_}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bi-hnJgk.js";import{_ as fe}from"./Input.vue_vue_type_script_setup_true_lang-DMEELx6P.js";import{_ as W}from"./Badge.vue_vue_type_script_setup_true_lang-C1ec_XWJ.js";import{_ as ge,a as pe,b as _e,c as ve,d as he,e as ye}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BmKCJoSR.js";import{_ as K}from"./Label.vue_vue_type_script_setup_true_lang-DzAXn9r1.js";import{_ as p}from"./Icon.vue_vue_type_script_setup_true_lang-CEHnRL7i.js";import{_ as be}from"./Heading.vue_vue_type_script_setup_true_lang-BjDffiyG.js";import"./useForwardExpose-DaYHy9uB.js";import"./RovingFocusGroup-D-89HKBZ.js";import"./building-008uwQfG.js";import"./users-DRJvXsLO.js";import"./activity-CdN7Rc5m.js";import"./arrow-left-CaMf4Bpg.js";import"./calendar-L4j_aMgW.js";import"./check-KwHGu40P.js";import"./chevron-down-B4bVWWpc.js";import"./search-D47eMssb.js";import"./eye-Cr1K8dLz.js";import"./user-CMLr72_a.js";import"./loader-circle-D5tbTpmk.js";import"./sun-Cs-7Xw2G.js";import"./play-DiQpodLN.js";import"./plus-DiXNaRVr.js";import"./square-pen-BKtRn00s.js";import"./trash-2-CeH2uVtb.js";import"./triangle-alert-Cj-EBphU.js";const xe={class:"space-y-6"},we={class:"flex items-center justify-between my-2"},ke={class:"flex flex-col sm:flex-row gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},Pe={class:"flex-1 relative"},Fe={class:"absolute inset-y-0 left-0 rtl:left-auto rtl:right-0 pl-3 rtl:pl-0 rtl:pr-3 flex items-center pointer-events-none"},Se={value:""},Ce=["value"],Je={value:""},Me=["value"],Ae={key:0,class:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg mb-4"},Ee={class:"flex items-center gap-4"},$e={class:"text-sm font-medium text-blue-900 dark:text-blue-100"},De={class:"flex items-center gap-2"},Ie={key:1,class:"text-center py-12"},je={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},Le={class:"text-gray-600 dark:text-gray-400 mb-6"},Ne={key:2,class:"bg-white dark:bg-gray-800 rounded-lg border overflow-hidden"},Be={class:"overflow-x-auto"},Ve={class:"w-full"},ze={class:"bg-gray-50 dark:bg-gray-700"},Oe={class:"text-left rtl:text-right"},Te={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12"},We=["checked"],Ke={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ue={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},He={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},qe={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Xe={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ze={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ge={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Re={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ye={class:"px-6 py-4 whitespace-nowrap"},Qe=["checked","onChange"],et={class:"px-6 py-4 whitespace-nowrap"},tt={class:"flex items-center"},st={class:"flex-shrink-0 h-10 w-10"},at={key:0,class:"h-10 w-10 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600"},rt=["src","alt"],lt={key:1,class:"h-10 w-10 rounded-lg bg-gray-300 dark:bg-gray-600 flex items-center justify-center"},it={class:"ml-4 rtl:ml-0 rtl:mr-4"},ot={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},nt={class:"text-sm text-gray-500 dark:text-gray-400"},dt={class:"px-6 py-4 whitespace-nowrap"},ut={class:"text-sm text-gray-900 dark:text-gray-100"},ct={class:"text-sm text-gray-500 dark:text-gray-400"},mt={class:"px-6 py-4 whitespace-nowrap"},ft={class:"text-sm text-gray-900 dark:text-gray-100"},gt={class:"text-sm text-gray-500 dark:text-gray-400"},pt={class:"px-6 py-4 whitespace-nowrap"},_t={class:"text-sm text-gray-900 dark:text-gray-100"},vt={class:"text-sm text-gray-500 dark:text-gray-400"},ht={class:"px-6 py-4 whitespace-nowrap"},yt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"px-6 py-4 whitespace-nowrap text-right rtl:text-left text-sm font-medium"},xt={class:"flex justify-end rtl:justify-start gap-1"},wt={key:0,class:"mt-2 font-medium"},kt={key:1,class:"mt-2"},Pt={class:"font-medium mb-2"},Ft={class:"max-h-32 overflow-y-auto bg-gray-50 dark:bg-gray-800 rounded p-2 text-sm"},St={key:0,class:"text-gray-500 ml-2"},Ct={class:"space-y-4"},Jt={class:"flex items-center space-x-2"},Mt={key:0,class:"space-y-2"},At=["value"],Et={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},is=re({__name:"Index",props:{assets:{},categories:{},locations:{},filters:{}},setup(U){var N,B,V;const{t:u}=le(),P=U,v=F(((N=P.filters)==null?void 0:N.search)||""),h=F(((B=P.filters)==null?void 0:B.category_id)||""),y=F(((V=P.filters)==null?void 0:V.location_id)||""),g=F(new Set),k=F(!1),a=F({show:!1,printing:!1,useDefaultPrinter:!1,selectedPrinter:"",availablePrinters:[],status:"",currentAsset:null,selectedAssets:[]}),H=ie(()=>[{title:u("nav.dashboard"),href:"/dashboard"},{title:u("nav.assets"),href:"/assets"}]),q=l=>{switch(l){case"available":return"default";case"assigned":return"secondary";case"maintenance":return"destructive";case"retired":return"outline";default:return"secondary"}};let D;oe([v,h,y],()=>{clearTimeout(D),D=window.setTimeout(()=>{ne.get("/assets",{search:v.value||void 0,category_id:h.value||void 0,location_id:y.value||void 0},{preserveState:!0,replace:!0})},300)});const X=()=>{v.value="",h.value="",y.value=""},I=l=>{var e;const s=l.image_path||((e=l.assetTemplate)==null?void 0:e.image_path);return s?`/storage/${s}`:null},Z=l=>{const s=l.target;s.style.display="none"},A=l=>new Promise((s,e)=>{if(document.querySelector(`script[src="${l}"]`)){s();return}const x=document.createElement("script");x.src=l,x.onload=()=>s(),x.onerror=()=>e(new Error(`Failed to load script: ${l}`)),document.head.appendChild(x)}),G=async()=>{try{a.value.status="Loading print libraries...",await A("/js/bluebird.min.js"),await A("/js/jquery-3.2.1.slim.min.js"),await A("/js/jsmanager/JSPrintManager.js"),a.value.status="Print libraries loaded successfully"}catch(l){console.error("Failed to load scripts:",l),a.value.status="Failed to load print libraries"}},R=l=>{g.value.has(l)?g.value.delete(l):g.value.add(l),Q()},Y=()=>{k.value?g.value.clear():P.assets.data.forEach(l=>{g.value.add(l.id)}),k.value=!k.value},Q=()=>{const l=P.assets.data.length,s=g.value.size;k.value=l>0&&s===l},ee=()=>P.assets.data.filter(l=>g.value.has(l.id)),j=async l=>{l?(a.value.currentAsset=l,a.value.selectedAssets=[l]):(a.value.currentAsset=null,a.value.selectedAssets=ee()),a.value.show=!0,typeof window.JSPM>"u"&&await G(),te()},te=()=>{ce(()=>{typeof window.JSPM<"u"?(window.JSPM.JSPrintManager.auto_reconnect=!0,window.JSPM.JSPrintManager.start(),window.JSPM.JSPrintManager.WS.onStatusChanged=function(){L()&&(a.value.status="Connected to JSPrintManager",window.JSPM.JSPrintManager.getPrinters().then(function(l){a.value.availablePrinters=l}))}):a.value.status="JSPrintManager not loaded"})},L=()=>window.JSPM.JSPrintManager.websocket_status==window.JSPM.WSStatus.Open?!0:window.JSPM.JSPrintManager.websocket_status==window.JSPM.WSStatus.Closed?(a.value.status="JSPrintManager is not installed or not running! Download JSPM Client App from https://neodynamic.com/downloads/jspm",!1):(window.JSPM.JSPrintManager.websocket_status==window.JSPM.WSStatus.Blocked&&(a.value.status="JSPM has blocked this website!"),!1),se=()=>{const l=a.value.selectedAssets;if(!(!l||l.length===0))if(L()){a.value.printing=!0,a.value.status=`Printing ${l.length} label(s)...`;try{const s=new window.JSPM.ClientPrintJob;a.value.useDefaultPrinter?s.clientPrinter=new window.JSPM.DefaultPrinter:s.clientPrinter=new window.JSPM.InstalledPrinter(a.value.selectedPrinter);let e="";l.forEach((b,x)=>{let m="^XA";m+="^PW406",m+="^LL203",m+="^MD30",m+="^SD15",m+="^FO10,50^GFA,329,329,7,,,,,,K0F1C,J01E3E,I039F1C4,I079E10F,I07BF03E,I073E17E,00213E7FC,00607CFF8,00F87CFF,00F8F9F800C,00FCF8J08,007EF,003E6,03BEK03F,039FK07F,039FK07F,07CFK03F8,008F,I0F8I018,I07J03C,03DK03E68,07FCJ01C7,03FFJ01E7,03FF8I01F3,017FEI09F,I0FE0018F8,0043E003CF8,00F1I03C7C,00F80807C3C,0070700F838,0020F00F008,I03E00F3,I07E01F38,I07C01E78,I03801E3,L01E,L01C,L01,,,,,^FS",m+="^FO70,30^A0N,18,18^FDFAHAD NAWAF ALZEER HOLDING CO.^FS",m+=`^FO70,65^A0N,24,24^FD${b.asset_tag}^FS`,m+="^FO70,100^BY2,2,35",m+="^BCN,35,Y,N,N",m+=`^FD${b.serial_number||b.asset_tag}^FS`,m+="^FO320,50^BQN,2,4",m+=`^FDMM,${b.asset_tag}^FS`,m+=`^FO70,175^A0N,18,18^FD${new Date().toISOString().split("T")[0]}^FS`,m+="^XZ",e+=m}),s.printerCommands=e,s.sendToClient(),a.value.status=`${l.length} label(s) sent to printer successfully!`,setTimeout(()=>{a.value.show=!1,a.value.printing=!1,g.value.clear(),k.value=!1},2e3)}catch(s){console.error("Print error:",s),a.value.status="Error occurred while printing",a.value.printing=!1}}else a.value.printing=!1};return(l,s)=>(d(),c(S,null,[i(r(de),{title:r(u)("assets.title")},null,8,["title"]),i(me,{breadcrumbs:H.value},{default:n(()=>[t("div",xe,[t("div",we,[i(be,{title:r(u)("assets.title")},null,8,["title"]),i(r(_),{asChild:""},{default:n(()=>[i(r(J),{href:l.route("assets.create")},{default:n(()=>[i(p,{name:"Plus",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),f(" "+o(r(u)("assets.create_asset")),1)]),_:1},8,["href"])]),_:1})]),t("div",ke,[t("div",Pe,[t("div",Fe,[i(p,{name:"Search",class:"h-4 w-4 text-gray-400"})]),i(r(fe),{modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=e=>v.value=e),placeholder:r(u)("assets.search_placeholder"),class:"w-full pl-10 rtl:pl-3 rtl:pr-10"},null,8,["modelValue","placeholder"])]),M(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>h.value=e),class:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t("option",Se,o(r(u)("assets.filter_by_category")),1),(d(!0),c(S,null,C(l.categories,e=>(d(),c("option",{key:e.id,value:e.id},o(e.name),9,Ce))),128))],512),[[$,h.value]]),M(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>y.value=e),class:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t("option",Je,o(r(u)("assets.filter_by_location")),1),(d(!0),c(S,null,C(l.locations,e=>(d(),c("option",{key:e.id,value:e.id},o(`${e.code}: ${e.name}`),9,Me))),128))],512),[[$,y.value]]),v.value||h.value||y.value?(d(),E(r(_),{key:0,variant:"ghost",onClick:X},{default:n(()=>[i(p,{name:"X",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),f(" "+o(r(u)("common.clear")),1)]),_:1})):w("",!0)]),g.value.size>0?(d(),c("div",Ae,[t("div",Ee,[t("span",$e,o(g.value.size)+" asset(s) selected ",1),i(r(_),{variant:"outline",size:"sm",onClick:s[3]||(s[3]=e=>{g.value.clear(),k.value=!1})},{default:n(()=>s[9]||(s[9]=[f(" Clear Selection ")])),_:1,__:[9]})]),t("div",De,[i(r(_),{onClick:s[4]||(s[4]=e=>j()),class:"bg-blue-600 hover:bg-blue-700"},{default:n(()=>[i(p,{name:"Printer",class:"h-4 w-4 mr-2"}),f(" Print "+o(g.value.size)+" Label(s) ",1)]),_:1})])])):w("",!0),l.assets.data.length===0?(d(),c("div",Ie,[i(p,{name:"HardDrive",class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t("h3",je,o(r(u)("assets.no_assets")),1),t("p",Le,o(v.value||h.value||y.value?r(u)("assets.no_assets_found"):r(u)("assets.create_first_asset")),1),!v.value&&!h.value&&!y.value?(d(),E(r(_),{key:0,asChild:""},{default:n(()=>[i(r(J),{href:l.route("assets.create")},{default:n(()=>[i(p,{name:"Plus",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),f(" "+o(r(u)("assets.create_asset")),1)]),_:1},8,["href"])]),_:1})):w("",!0)])):(d(),c("div",Ne,[t("div",Be,[t("table",Ve,[t("thead",ze,[t("tr",Oe,[t("th",Te,[t("input",{type:"checkbox",checked:k.value,onChange:Y,class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,40,We)]),t("th",Ke,o(r(u)("assets.asset")),1),t("th",Ue,o(r(u)("assets.company")),1),t("th",He,o(r(u)("assets.category")),1),t("th",qe,o(r(u)("assets.location")),1),t("th",Xe,o(r(u)("assets.condition")),1),t("th",Ze,o(r(u)("assets.status")),1),t("th",Ge,o(r(u)("common.actions")),1)])]),t("tbody",Re,[(d(!0),c(S,null,C(l.assets.data,e=>{var b,x,m,z,O,T;return d(),c("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",Ye,[t("input",{type:"checkbox",checked:g.value.has(e.id),onChange:ae=>R(e.id),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,40,Qe)]),t("td",et,[t("div",tt,[t("div",st,[I(e)?(d(),c("div",at,[t("img",{src:I(e),alt:e.asset_tag,class:"h-full w-full object-cover",onError:Z},null,40,rt)])):(d(),c("div",lt,[i(p,{name:"HardDrive",class:"h-5 w-5 text-gray-700 dark:text-gray-300"})]))]),t("div",it,[t("div",ot,o(e.asset_tag),1),t("div",nt,o(e.model_name||e.serial_number||"-"),1)])])]),t("td",dt,[t("div",ut,o(((b=e.company)==null?void 0:b.name_en)||"-"),1),t("div",ct,o(((x=e.company)==null?void 0:x.slug)||"-"),1)]),t("td",mt,[t("div",ft,o(((m=e.category)==null?void 0:m.name)||"-"),1),t("div",gt,o(((z=e.category)==null?void 0:z.code)||"-"),1)]),t("td",pt,[t("div",_t,o(((O=e.location)==null?void 0:O.name)||"-"),1),t("div",vt,o(((T=e.location)==null?void 0:T.code)||"-"),1)]),t("td",ht,[i(r(W),{variant:e.condition==="good"?"default":"destructive"},{default:n(()=>[f(o(r(u)(`assets.condition_${e.condition}`)),1)]),_:2},1032,["variant"])]),t("td",yt,[i(r(W),{variant:q(e.status)},{default:n(()=>[f(o(r(u)(`assets.status_${e.status}`)),1)]),_:2},1032,["variant"])]),t("td",bt,[t("div",xt,[i(r(_),{variant:"ghost",size:"sm",onClick:ae=>j(e),title:"Print Label"},{default:n(()=>[i(p,{name:"Printer",class:"h-4 w-4"})]),_:2},1032,["onClick"]),i(r(_),{variant:"ghost",size:"sm",asChild:"",title:"View"},{default:n(()=>[i(r(J),{href:l.route("assets.show",e.id)},{default:n(()=>[i(p,{name:"Eye",class:"h-4 w-4"})]),_:2},1032,["href"])]),_:2},1024),i(r(_),{variant:"ghost",size:"sm",asChild:"",title:"Edit"},{default:n(()=>[i(r(J),{href:l.route("assets.edit",e.id)},{default:n(()=>[i(p,{name:"Pencil",class:"h-4 w-4"})]),_:2},1032,["href"])]),_:2},1024)])])])}),128))])])])]))]),i(r(ge),{open:a.value.show,"onUpdate:open":s[8]||(s[8]=e=>a.value.show=e)},{default:n(()=>[i(r(pe),{class:"sm:max-w-md"},{default:n(()=>[i(r(_e),null,{default:n(()=>[i(r(ve),null,{default:n(()=>s[10]||(s[10]=[f("Print Barcode Label")])),_:1,__:[10]}),i(r(he),null,{default:n(()=>[s[11]||(s[11]=f(" Configure printer settings for the Zebra label printer. ")),a.value.selectedAssets.length===1?(d(),c("div",wt," Asset: "+o(a.value.selectedAssets[0].asset_tag),1)):a.value.selectedAssets.length>1?(d(),c("div",kt,[t("div",Pt," Printing "+o(a.value.selectedAssets.length)+" assets: ",1),t("div",Ft,[(d(!0),c(S,null,C(a.value.selectedAssets,e=>(d(),c("div",{key:e.id,class:"py-1"},[f(o(e.asset_tag)+" ",1),e.serial_number?(d(),c("span",St,"("+o(e.serial_number)+")",1)):w("",!0)]))),128))])])):w("",!0)]),_:1,__:[11]})]),_:1}),t("div",Ct,[t("div",Jt,[M(t("input",{type:"checkbox",id:"useDefaultPrinter","onUpdate:modelValue":s[5]||(s[5]=e=>a.value.useDefaultPrinter=e),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[ue,a.value.useDefaultPrinter]]),i(r(K),{for:"useDefaultPrinter",class:"font-medium"},{default:n(()=>s[12]||(s[12]=[f(" Print to Default printer ")])),_:1,__:[12]})]),a.value.useDefaultPrinter?w("",!0):(d(),c("div",Mt,[i(r(K),{for:"installedPrinterName"},{default:n(()=>s[13]||(s[13]=[f("Select an installed Printer:")])),_:1,__:[13]}),M(t("select",{id:"installedPrinterName","onUpdate:modelValue":s[6]||(s[6]=e=>a.value.selectedPrinter=e),class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"},[s[14]||(s[14]=t("option",{value:""},"Select a printer...",-1)),(d(!0),c(S,null,C(a.value.availablePrinters,e=>(d(),c("option",{key:e,value:e},o(e),9,At))),128))],512),[[$,a.value.selectedPrinter]])])),a.value.status?(d(),c("div",Et," Status: "+o(a.value.status),1)):w("",!0)]),i(r(ye),null,{default:n(()=>[i(r(_),{variant:"outline",onClick:s[7]||(s[7]=e=>a.value.show=!1)},{default:n(()=>s[15]||(s[15]=[f(" Cancel ")])),_:1,__:[15]}),i(r(_),{onClick:se,disabled:a.value.printing||!a.value.useDefaultPrinter&&!a.value.selectedPrinter},{default:n(()=>[a.value.printing?(d(),E(p,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 animate-spin"})):w("",!0),f(" Print "+o(a.value.selectedAssets.length>1?`${a.value.selectedAssets.length} Labels`:"Label"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["breadcrumbs"])],64))}});export{is as default};
