import{d as ke,u as Pe,q as A,c as $e,H as Ae,y as Ce,D as Se,a as m,o as i,b as n,e as r,h as De,w as l,f as s,m as P,s as M,g as f,t as d,p as F,i as h,F as z,r as N,v as O,G as je,z as Te}from"./app-BXrKzvLN.js";import{_ as Le}from"./AppLayout.vue_vue_type_script_setup_true_lang-DaRJsVNh.js";import{_ as y}from"./index-oTuGssnE.js";import{_ as Ue}from"./Input.vue_vue_type_script_setup_true_lang-BCuFgQ0l.js";import{_ as J}from"./Badge.vue_vue_type_script_setup_true_lang-DtLBwGLQ.js";import{_ as q,a as H,b as I,c as X,d as K}from"./DialogTitle.vue_vue_type_script_setup_true_lang-B7efu8EJ.js";import{_ as Z}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CpLCXTNp.js";import{_ as R}from"./Label.vue_vue_type_script_setup_true_lang-jpk8-4yg.js";import{_ as g}from"./Icon.vue_vue_type_script_setup_true_lang-DKJKdV5h.js";import{_ as ze}from"./Heading.vue_vue_type_script_setup_true_lang-BCLZswfi.js";import{P as Ee}from"./PrintService-Il55q5dY.js";import"./useForwardExpose-W9iILB0G.js";import"./x-DhIxxX5O.js";import"./building-BI7hMlkJ.js";import"./users-M0XHIFGR.js";import"./activity-D_PrRM_H.js";import"./arrow-left-DynVa_2p.js";import"./calendar-BpDQPph8.js";import"./chevron-down-DFMuuyMl.js";import"./search-DvMXvNs3.js";import"./eye-BULOlcPe.js";import"./user-DnEz3ToP.js";import"./loader-circle-BP0asllC.js";import"./sun-leX6A77Z.js";import"./play-BwtsLJW2.js";import"./plus-DNlw4JNr.js";import"./square-pen-BfuBYkiM.js";import"./trash-2-ejZ3laI_.js";import"./triangle-alert-XsXEVLRv.js";const Fe={class:"space-y-6"},Ne={class:"flex items-center justify-between my-2"},Ve={class:"flex flex-col sm:flex-row gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},Me={class:"flex-1 relative"},Oe={class:"absolute inset-y-0 left-0 rtl:left-auto rtl:right-0 pl-3 rtl:pl-0 rtl:pr-3 flex items-center pointer-events-none"},Re={value:""},Be=["value"],Je={value:""},qe=["value"],He={key:0,class:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg mb-4"},Ie={class:"flex items-center gap-4"},Xe={class:"text-sm font-medium text-blue-900 dark:text-blue-100"},Ke={class:"flex items-center gap-2"},Ze={key:1,class:"text-center py-12"},We={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},Ge={class:"text-gray-600 dark:text-gray-400 mb-6"},Qe={key:2,class:"bg-white dark:bg-gray-800 rounded-lg border overflow-hidden"},Ye={class:"overflow-x-auto"},et={class:"w-full"},tt={class:"bg-gray-50 dark:bg-gray-700"},st={class:"text-left rtl:text-right"},at={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12"},rt=["checked"],nt={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ot={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},lt={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},it={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},dt={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ut={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ct={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},mt={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},gt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},pt={class:"px-6 py-4 whitespace-nowrap"},ft=["checked","onChange"],vt={class:"px-6 py-4 whitespace-nowrap"},_t={class:"flex items-center"},yt={class:"flex-shrink-0 h-10 w-10"},ht={key:0,class:"h-10 w-10 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600"},bt=["src","alt","onError"],wt={key:1,class:"h-10 w-10 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600"},xt=["src","alt","onError"],kt={key:2,class:"h-10 w-10 rounded-lg bg-gray-300 dark:bg-gray-600 flex items-center justify-center"},Pt={class:"ml-4 rtl:ml-0 rtl:mr-4"},$t={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},At={class:"text-sm text-gray-500 dark:text-gray-400"},Ct={class:"px-6 py-4 whitespace-nowrap"},St={class:"flex justify-center"},Dt=["src","alt"],jt={key:1,class:"h-12 w-12 bg-gray-100 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 flex items-center justify-center"},Tt={class:"px-6 py-4 whitespace-nowrap"},Lt={class:"text-sm text-gray-900 dark:text-gray-100"},Ut={class:"text-sm text-gray-500 dark:text-gray-400"},zt={class:"px-6 py-4 whitespace-nowrap"},Et={class:"text-sm text-gray-900 dark:text-gray-100"},Ft={class:"text-sm text-gray-500 dark:text-gray-400"},Nt={key:0,class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},Vt={class:"px-6 py-4 whitespace-nowrap"},Mt={class:"text-sm text-gray-900 dark:text-gray-100"},Ot={class:"text-sm text-gray-500 dark:text-gray-400"},Rt={class:"px-6 py-4 whitespace-nowrap"},Bt={class:"px-6 py-4 whitespace-nowrap"},Jt={class:"px-6 py-4 whitespace-nowrap text-right rtl:text-left text-sm font-medium"},qt={class:"flex justify-end rtl:justify-start gap-1"},Ht={key:0,class:"mt-2 font-medium"},It={key:1,class:"mt-2"},Xt={class:"font-medium mb-2"},Kt={class:"max-h-32 overflow-y-auto bg-gray-50 dark:bg-gray-800 rounded p-2 text-sm"},Zt={key:0,class:"text-gray-500 ml-2"},Wt={class:"space-y-4"},Gt={class:"flex items-center space-x-2"},Qt={key:0,class:"space-y-2"},Yt=["value"],es={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},ts={key:0,class:"mt-2 font-medium"},ss={class:"space-y-4"},as={class:"space-y-2"},rs={class:"space-y-2"},ns={key:0,class:"text-center py-8"},os={key:1,class:"text-center py-8"},ls={key:2,class:"overflow-x-auto"},is={class:"w-full"},ds={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},us={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},cs={class:"px-6 py-4 whitespace-nowrap"},ms={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},gs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},ps={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},fs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},vs={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},_s={class:"flex justify-end rtl:justify-start gap-1"},Xs=ke({__name:"Index",props:{assets:{},categories:{},locations:{},filters:{}},setup(de){var ne,oe,le;const{t:v}=Pe(),V=Ee.getInstance(),E=de,C=A(((ne=E.filters)==null?void 0:ne.search)||""),S=A(((oe=E.filters)==null?void 0:oe.category_id)||""),D=A(((le=E.filters)==null?void 0:le.location_id)||""),x=A(new Set),L=A(!1),W=A(new Set),G=A(new Set),o=A({show:!1,printing:!1,useDefaultPrinter:!1,selectedPrinter:"",availablePrinters:[],status:"",currentAsset:null,selectedAssets:[]}),ue=$e(()=>[{title:v("nav.dashboard"),href:"/dashboard"},{title:v("nav.assets"),href:"/assets"}]),_=A({show:!1,asset:null,comment:"",priority:"normal",sending:!1}),ce=a=>{_.value.asset=a,_.value.comment="",_.value.priority="normal",_.value.show=!0},me=async()=>{var a;if(_.value.asset){_.value.sending=!0;try{const t=await fetch("/api/print-jobs",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({asset_id:_.value.asset.id,priority:_.value.priority,comment:_.value.comment||null})});if(t.ok){const e=await t.json();alert(`Print job ${e.print_job.job_id} sent to print machine successfully!`),_.value.show=!1}else{const e=await t.json();alert(`Failed to send print job: ${e.error||"Unknown error"}`)}}catch(t){console.error("Failed to send print job:",t),alert("Failed to send print job. Please try again.")}finally{_.value.sending=!1}}},u=A({show:!1,asset:null,assignments:[],loading:!1,currentAction:null,uploadingDocument:!1,selectedAssignmentId:null}),Q=async a=>{u.value.asset=a,u.value.show=!0,u.value.loading=!0;try{const t=await fetch(`/api/assets/${a.id}/assignments`);if(t.ok){const e=await t.json();u.value.assignments=e.assignments||[]}else console.error("Failed to fetch assignments"),u.value.assignments=[]}catch(t){console.error("Error fetching assignments:",t),u.value.assignments=[]}finally{u.value.loading=!1}},Y=async(a,t)=>{var e;if(u.value.asset)try{u.value.currentAction=`printing_${t}_${a}`;const c=await fetch(`/api/assets/${u.value.asset.id}/assignments/${a}/print-document`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((e=document.querySelector('meta[name="csrf-token"]'))==null?void 0:e.getAttribute("content"))||""},body:JSON.stringify({type:t,asset_id:u.value.asset.id,assignment_id:a})});if(c.ok){const p=await c.blob(),b=window.URL.createObjectURL(p),k=document.createElement("a");k.href=b,k.download=`${t}_document_${u.value.asset.asset_tag}_${a}.html`,document.body.appendChild(k),k.click(),window.URL.revokeObjectURL(b),document.body.removeChild(k);const w=window.open(b,"_blank");w&&(w.onload=()=>{w.print()})}else{const p=await c.json();alert(`Failed to generate document: ${p.error||"Unknown error"}`)}}catch(c){console.error("Error printing document:",c),alert("Failed to generate document. Please try again.")}finally{u.value.currentAction=null}},ee=async(a,t)=>{const e=document.createElement("input");e.type="file",e.accept=".pdf,.jpg,.jpeg,.png,.gif",e.multiple=!1,e.onchange=async c=>{var k,w,j;const p=(k=c.target.files)==null?void 0:k[0];if(!p)return;if(p.size>5*1024*1024){alert("File size must be less than 5MB");return}const b=new FormData;b.append("document",p),b.append("type",t),b.append("assignment_id",a.toString());try{u.value.uploadingDocument=!0,u.value.currentAction=`uploading_${t}_${a}`;const $=await fetch(`/api/assets/${(w=u.value.asset)==null?void 0:w.id}/assignments/${a}/upload-document`,{method:"POST",headers:{"X-CSRF-TOKEN":((j=document.querySelector('meta[name="csrf-token"]'))==null?void 0:j.getAttribute("content"))||""},body:b});if($.ok){const T=await $.json();alert("Document uploaded successfully!"),await Q(u.value.asset)}else{const T=await $.json();alert(`Failed to upload document: ${T.error||"Unknown error"}`)}}catch($){console.error("Error uploading document:",$),alert("Failed to upload document. Please try again.")}finally{u.value.uploadingDocument=!1,u.value.currentAction=null}},e.click()},ge=async(a,t)=>{var e,c;try{const p=await fetch(`/api/assets/${(e=u.value.asset)==null?void 0:e.id}/assignments/${a}/download-document?type=${t}`);if(p.ok){const b=await p.blob(),k=window.URL.createObjectURL(b),w=document.createElement("a");w.href=k;const j=p.headers.get("content-disposition");let $=`${t}_document_${(c=u.value.asset)==null?void 0:c.asset_tag}_${a}`;if(j){const T=j.match(/filename="(.+)"/);T&&($=T[1])}w.download=$,document.body.appendChild(w),w.click(),window.URL.revokeObjectURL(k),document.body.removeChild(w)}else alert("Document not found or failed to download")}catch(p){console.error("Error downloading document:",p),alert("Failed to download document. Please try again.")}},te=a=>a?new Date(a).toLocaleDateString():"â€”",se=a=>{switch(a){case"available":return"default";case"assigned":return"secondary";case"maintenance":return"destructive";case"retired":return"outline";case"active":return"default";case"returned":return"secondary";case"lost":return"destructive";case"damaged":return"destructive";default:return"outline"}};let ae;Ae([C,S,D],()=>{clearTimeout(ae),ae=window.setTimeout(()=>{Ce.get("/assets",{search:C.value||void 0,category_id:S.value||void 0,location_id:D.value||void 0},{preserveState:!0,replace:!0})},300)});const pe=()=>{C.value="",S.value="",D.value=""},fe=(a,t)=>{W.value.add(t.id)},ve=(a,t)=>{G.value.add(t.id)},_e=a=>{if(console.log("Print service status:",a),o.value.status=a.status,a.isConnected&&a.availablePrinters.length>0&&(o.value.availablePrinters=a.availablePrinters,!o.value.selectedPrinter)){const t=a.availablePrinters.find(e=>e.toLowerCase().includes("zdesigner"));t?(o.value.selectedPrinter=t,console.log("Auto-selected ZDesigner printer via callback:",t)):a.availablePrinters.length>0&&(o.value.selectedPrinter=a.availablePrinters[0],console.log("Auto-selected first available printer via callback:",a.availablePrinters[0]))}},ye=a=>{x.value.has(a)?x.value.delete(a):x.value.add(a),re()},he=()=>{L.value?x.value.clear():E.assets.data.forEach(a=>{x.value.add(a.id)}),L.value=!L.value},re=()=>{const a=E.assets.data.length,t=x.value.size;L.value=a>0&&t===a},be=()=>E.assets.data.filter(a=>x.value.has(a.id)),B=async a=>{a?(o.value.currentAsset=a,o.value.selectedAssets=[a]):(o.value.currentAsset=null,o.value.selectedAssets=be()),o.value.show=!0,V.onStatusChange(_e),await we()},we=async(a=3,t=2e3)=>{for(let e=1;e<=a;e++)try{console.log(`Printer initialization attempt ${e}/${a}...`),o.value.status=`Connecting to JSPrintManager (attempt ${e}/${a})...`,e>1&&await new Promise(p=>setTimeout(p,t)),await V.initializeJSPrintManager();const c=await V.getAvailablePrinters();if(console.log(`Attempt ${e}: Found ${c.length} printers:`,c),c.length>0){if(o.value.availablePrinters=c,!o.value.selectedPrinter){const p=c.find(b=>b.toLowerCase().includes("zdesigner"));p?(o.value.selectedPrinter=p,console.log("Auto-selected ZDesigner printer:",p)):c.length>0&&(o.value.selectedPrinter=c[0],console.log("Auto-selected first available printer:",c[0]))}o.value.status=`Connected! Found ${c.length} printer(s)`,console.log("Printer initialization successful!");return}else e<a?(console.log(`Attempt ${e}: No printers found, retrying...`),o.value.status=`No printers found, retrying in ${t/1e3} seconds...`):(console.log("No printers found after all attempts"),o.value.status="Connected to JSPrintManager but no printers found")}catch(c){console.error(`Printer initialization attempt ${e} failed:`,c),e<a?o.value.status=`Connection failed, retrying in ${t/1e3} seconds... (${e}/${a})`:o.value.status="Failed to connect to JSPrintManager: "+(c instanceof Error?c.message:String(c))}};Se(async()=>{if(new URLSearchParams(window.location.search).get("show_bulk_print")==="true")try{const t=await fetch("/api/assets/bulk-created");if(t.ok){const e=await t.json();if(e.length>0){e.forEach(p=>{x.value.add(p.id)}),re(),await B();const c=window.location.pathname;window.history.replaceState({},"",c)}}}catch(t){console.error("Failed to fetch bulk created assets:",t)}});const xe=async()=>{const a=o.value.selectedAssets;if(!(!a||a.length===0)){console.log("Print settings:",{useDefaultPrinter:o.value.useDefaultPrinter,selectedPrinter:o.value.selectedPrinter,availablePrinters:o.value.availablePrinters}),o.value.printing=!0,o.value.status=`Printing ${a.length} label(s)...`;try{a.length===1?await V.printAssetLabel(a[0],o.value.useDefaultPrinter,o.value.selectedPrinter):await V.printMultipleAssetLabels(a,o.value.useDefaultPrinter,o.value.selectedPrinter),o.value.status=`${a.length} label(s) sent to printer successfully!`,setTimeout(()=>{o.value.show=!1,o.value.printing=!1,x.value.clear(),L.value=!1},2e3)}catch(t){console.error("Print error:",t),o.value.status="Error occurred while printing: "+(t instanceof Error?t.message:String(t)),o.value.printing=!1}}};return(a,t)=>(i(),m(z,null,[n(r(De),{title:r(v)("assets.title")},null,8,["title"]),n(Le,{breadcrumbs:ue.value},{default:l(()=>[s("div",Fe,[s("div",Ne,[n(ze,{title:r(v)("assets.title")},null,8,["title"]),n(r(y),{asChild:""},{default:l(()=>[n(r(M),{href:a.route("assets.create")},{default:l(()=>[n(g,{name:"Plus",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),f(" "+d(r(v)("assets.create_asset")),1)]),_:1},8,["href"])]),_:1})]),s("div",Ve,[s("div",Me,[s("div",Oe,[n(g,{name:"Search",class:"h-4 w-4 text-gray-400"})]),n(r(Ue),{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=e=>C.value=e),placeholder:r(v)("assets.search_placeholder"),class:"w-full pl-10 rtl:pl-3 rtl:pr-10"},null,8,["modelValue","placeholder"])]),F(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>S.value=e),class:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s("option",Re,d(r(v)("assets.filter_by_category")),1),(i(!0),m(z,null,N(a.categories,e=>(i(),m("option",{key:e.id,value:e.id},d(e.name),9,Be))),128))],512),[[O,S.value]]),F(s("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>D.value=e),class:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s("option",Je,d(r(v)("assets.filter_by_location")),1),(i(!0),m(z,null,N(a.locations,e=>(i(),m("option",{key:e.id,value:e.id},d(`${e.code}: ${e.name}`),9,qe))),128))],512),[[O,D.value]]),C.value||S.value||D.value?(i(),h(r(y),{key:0,variant:"ghost",onClick:pe},{default:l(()=>[n(g,{name:"X",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),f(" "+d(r(v)("common.clear")),1)]),_:1})):P("",!0)]),x.value.size>0?(i(),m("div",He,[s("div",Ie,[s("span",Xe,d(x.value.size)+" asset(s) selected ",1),n(r(y),{variant:"outline",size:"sm",onClick:t[3]||(t[3]=e=>{x.value.clear(),L.value=!1})},{default:l(()=>t[15]||(t[15]=[f(" Clear Selection ",-1)])),_:1,__:[15]})]),s("div",Ke,[n(r(y),{onClick:t[4]||(t[4]=e=>B()),class:"bg-blue-600 hover:bg-blue-700"},{default:l(()=>[n(g,{name:"Printer",class:"h-4 w-4 mr-2"}),f(" Print "+d(x.value.size)+" Label(s) ",1)]),_:1})])])):P("",!0),a.assets.data.length===0?(i(),m("div",Ze,[n(g,{name:"HardDrive",class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s("h3",We,d(r(v)("assets.no_assets")),1),s("p",Ge,d(C.value||S.value||D.value?r(v)("assets.no_assets_found"):r(v)("assets.create_first_asset")),1),!C.value&&!S.value&&!D.value?(i(),h(r(y),{key:0,asChild:""},{default:l(()=>[n(r(M),{href:a.route("assets.create")},{default:l(()=>[n(g,{name:"Plus",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),f(" "+d(r(v)("assets.create_asset")),1)]),_:1},8,["href"])]),_:1})):P("",!0)])):(i(),m("div",Qe,[s("div",Ye,[s("table",et,[s("thead",tt,[s("tr",st,[s("th",at,[s("input",{type:"checkbox",checked:L.value,onChange:he,class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,40,rt)]),s("th",nt,d(r(v)("assets.asset")),1),s("th",ot,d(r(v)("assets.template_image")),1),s("th",lt,d(r(v)("assets.company")),1),s("th",it,d(r(v)("assets.category")),1),s("th",dt,d(r(v)("assets.location")),1),s("th",ut,d(r(v)("assets.condition")),1),s("th",ct,d(r(v)("assets.status")),1),s("th",mt,d(r(v)("common.actions")),1)])]),s("tbody",gt,[(i(!0),m(z,null,N(a.assets.data,e=>{var c,p,b,k,w,j,$,T,ie;return i(),m("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[s("td",pt,[s("input",{type:"checkbox",checked:x.value.has(e.id),onChange:U=>ye(e.id),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,40,ft)]),s("td",vt,[s("div",_t,[s("div",yt,[e.image_path&&!W.value.has(e.id)?(i(),m("div",ht,[s("img",{src:`/storage/${e.image_path}`,alt:e.asset_tag,class:"h-full w-full object-cover",onError:U=>fe(U,e)},null,40,bt)])):(c=e.assetTemplate)!=null&&c.image_path&&!G.value.has(e.id)?(i(),m("div",wt,[s("img",{src:`/storage/${e.assetTemplate.image_path}`,alt:e.assetTemplate.name||"Template",class:"h-full w-full object-cover",onError:U=>ve(U,e)},null,40,xt)])):(i(),m("div",kt,[n(g,{name:"HardDrive",class:"h-5 w-5 text-gray-700 dark:text-gray-300"})]))]),s("div",Pt,[s("div",$t,d(e.asset_tag),1),s("div",At,d(e.model_name||e.serial_number||"-"),1)])])]),s("td",Ct,[s("div",St,[(p=e.assetTemplate)!=null&&p.image_path?(i(),m("img",{key:0,src:`/storage/${e.assetTemplate.image_path}`,alt:e.assetTemplate.name||"Template",class:"h-12 w-12 object-cover rounded-lg border border-gray-200 dark:border-gray-600"},null,8,Dt)):(i(),m("div",jt,[n(g,{name:"Image",class:"h-5 w-5 text-gray-400"})]))])]),s("td",Tt,[s("div",Lt,d(((b=e.company)==null?void 0:b.name_en)||"-"),1),s("div",Ut,d(((k=e.company)==null?void 0:k.slug)||"-"),1)]),s("td",zt,[s("div",Et,d(((w=e.category)==null?void 0:w.name)||"-"),1),s("div",Ft,d(((j=e.category)==null?void 0:j.code)||"-"),1),($=e.assetTemplate)!=null&&$.name?(i(),m("div",Nt,d(e.assetTemplate.name),1)):P("",!0)]),s("td",Vt,[s("div",Mt,d(((T=e.location)==null?void 0:T.name)||"-"),1),s("div",Ot,d(((ie=e.location)==null?void 0:ie.code)||"-"),1)]),s("td",Rt,[n(r(J),{variant:e.condition==="good"?"default":"destructive"},{default:l(()=>[f(d(r(v)(`assets.condition_${e.condition}`)),1)]),_:2},1032,["variant"])]),s("td",Bt,[n(r(J),{variant:se(e.status)},{default:l(()=>[f(d(r(v)(`assets.status_${e.status}`)),1)]),_:2},1032,["variant"])]),s("td",Jt,[s("div",qt,[n(r(y),{variant:"ghost",size:"sm",onClick:U=>B(e),title:"Print Label"},{default:l(()=>[n(g,{name:"Printer",class:"h-4 w-4"})]),_:2},1032,["onClick"]),n(r(y),{variant:"ghost",size:"sm",onClick:U=>ce(e),title:"Send to Print Machine"},{default:l(()=>[n(g,{name:"Send",class:"h-4 w-4"})]),_:2},1032,["onClick"]),n(r(y),{variant:"ghost",size:"sm",onClick:U=>Q(e),title:"Assignment Info"},{default:l(()=>[n(g,{name:"Info",class:"h-4 w-4"})]),_:2},1032,["onClick"]),n(r(y),{variant:"ghost",size:"sm",asChild:"",title:"View"},{default:l(()=>[n(r(M),{href:a.route("assets.show",e.id)},{default:l(()=>[n(g,{name:"Eye",class:"h-4 w-4"})]),_:2},1032,["href"])]),_:2},1024),n(r(y),{variant:"ghost",size:"sm",asChild:"",title:"Edit"},{default:l(()=>[n(r(M),{href:a.route("assets.edit",e.id)},{default:l(()=>[n(g,{name:"Pencil",class:"h-4 w-4"})]),_:2},1032,["href"])]),_:2},1024)])])])}),128))])])])]))]),n(r(q),{open:o.value.show,"onUpdate:open":t[8]||(t[8]=e=>o.value.show=e)},{default:l(()=>[n(r(H),{class:"sm:max-w-md"},{default:l(()=>[n(r(I),null,{default:l(()=>[n(r(X),null,{default:l(()=>t[16]||(t[16]=[f("Print Barcode Label",-1)])),_:1,__:[16]}),n(r(Z),null,{default:l(()=>[t[17]||(t[17]=f(" Configure printer settings for the Zebra label printer. ",-1)),o.value.selectedAssets.length===1?(i(),m("div",Ht," Asset: "+d(o.value.selectedAssets[0].asset_tag),1)):o.value.selectedAssets.length>1?(i(),m("div",It,[s("div",Xt," Printing "+d(o.value.selectedAssets.length)+" assets: ",1),s("div",Kt,[(i(!0),m(z,null,N(o.value.selectedAssets,e=>(i(),m("div",{key:e.id,class:"py-1"},[f(d(e.asset_tag)+" ",1),e.serial_number?(i(),m("span",Zt,"("+d(e.serial_number)+")",1)):P("",!0)]))),128))])])):P("",!0)]),_:1,__:[17]})]),_:1}),s("div",Wt,[s("div",Gt,[F(s("input",{type:"checkbox",id:"useDefaultPrinter","onUpdate:modelValue":t[5]||(t[5]=e=>o.value.useDefaultPrinter=e),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[je,o.value.useDefaultPrinter]]),n(r(R),{for:"useDefaultPrinter",class:"font-medium"},{default:l(()=>t[18]||(t[18]=[f(" Print to Default printer ",-1)])),_:1,__:[18]})]),o.value.useDefaultPrinter?P("",!0):(i(),m("div",Qt,[n(r(R),{for:"installedPrinterName"},{default:l(()=>t[19]||(t[19]=[f("Select an installed Printer:",-1)])),_:1,__:[19]}),F(s("select",{id:"installedPrinterName","onUpdate:modelValue":t[6]||(t[6]=e=>o.value.selectedPrinter=e),class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"},[t[20]||(t[20]=s("option",{value:""},"Select a printer...",-1)),(i(!0),m(z,null,N(o.value.availablePrinters,e=>(i(),m("option",{key:e,value:e},d(e),9,Yt))),128))],512),[[O,o.value.selectedPrinter]])])),o.value.status?(i(),m("div",es," Status: "+d(o.value.status),1)):P("",!0)]),n(r(K),null,{default:l(()=>[n(r(y),{variant:"outline",onClick:t[7]||(t[7]=e=>o.value.show=!1)},{default:l(()=>t[21]||(t[21]=[f(" Cancel ",-1)])),_:1,__:[21]}),n(r(y),{onClick:xe,disabled:o.value.printing||!o.value.useDefaultPrinter&&!o.value.selectedPrinter},{default:l(()=>[o.value.printing?(i(),h(g,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 animate-spin"})):P("",!0),f(" Print "+d(o.value.selectedAssets.length>1?`${o.value.selectedAssets.length} Labels`:"Label"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),n(r(q),{open:_.value.show,"onUpdate:open":t[12]||(t[12]=e=>_.value.show=e)},{default:l(()=>[n(r(H),{class:"sm:max-w-md"},{default:l(()=>[n(r(I),null,{default:l(()=>[n(r(X),null,{default:l(()=>t[22]||(t[22]=[f("Send to Print Machine",-1)])),_:1,__:[22]}),n(r(Z),null,{default:l(()=>[t[23]||(t[23]=f(" Send this asset to the print station queue. ",-1)),_.value.asset?(i(),m("div",ts," Asset: "+d(_.value.asset.asset_tag),1)):P("",!0)]),_:1,__:[23]})]),_:1}),s("div",ss,[s("div",as,[n(r(R),{for:"priority"},{default:l(()=>t[24]||(t[24]=[f("Priority",-1)])),_:1,__:[24]}),F(s("select",{id:"priority","onUpdate:modelValue":t[9]||(t[9]=e=>_.value.priority=e),class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"},t[25]||(t[25]=[s("option",{value:"low"},"Low",-1),s("option",{value:"normal"},"Normal",-1),s("option",{value:"high"},"High",-1),s("option",{value:"urgent"},"Urgent",-1)]),512),[[O,_.value.priority]])]),s("div",rs,[n(r(R),{for:"comment"},{default:l(()=>t[26]||(t[26]=[f("Comment (Optional)",-1)])),_:1,__:[26]}),F(s("textarea",{id:"comment","onUpdate:modelValue":t[10]||(t[10]=e=>_.value.comment=e),class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",rows:"3",placeholder:"Add a comment for the print station operator..."},null,512),[[Te,_.value.comment]])])]),n(r(K),null,{default:l(()=>[n(r(y),{variant:"outline",onClick:t[11]||(t[11]=e=>_.value.show=!1)},{default:l(()=>t[27]||(t[27]=[f(" Cancel ",-1)])),_:1,__:[27]}),n(r(y),{onClick:me,disabled:_.value.sending},{default:l(()=>[_.value.sending?(i(),h(g,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 animate-spin"})):P("",!0),t[28]||(t[28]=f(" Send to Print Machine ",-1))]),_:1,__:[28]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),n(r(q),{open:u.value.show,"onUpdate:open":t[14]||(t[14]=e=>u.value.show=e)},{default:l(()=>[n(r(H),{class:"sm:max-w-2xl"},{default:l(()=>[n(r(I),null,{default:l(()=>[n(r(X),null,{default:l(()=>{var e;return[f("Assignment History for "+d((e=u.value.asset)==null?void 0:e.asset_tag),1)]}),_:1}),n(r(Z),null,{default:l(()=>t[29]||(t[29]=[f(" View and manage the assignment history for this asset. ",-1)])),_:1,__:[29]})]),_:1}),u.value.loading?(i(),m("div",ns,[n(g,{name:"Loader2",class:"mx-auto h-12 w-12 text-blue-500 animate-spin"}),t[30]||(t[30]=s("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"Loading assignments...",-1))])):u.value.assignments.length===0?(i(),m("div",os,[n(g,{name:"Info",class:"mx-auto h-12 w-12 text-gray-400"}),t[31]||(t[31]=s("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"No assignment history found for this asset.",-1))])):(i(),m("div",ls,[s("table",is,[t[32]||(t[32]=s("thead",{class:"bg-gray-50 dark:bg-gray-700"},[s("tr",{class:"text-left rtl:text-right"},[s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Assignment ID "),s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Status "),s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Assigned To "),s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Assigned By "),s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Assigned Date "),s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Returned Date "),s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ")])],-1)),s("tbody",ds,[(i(!0),m(z,null,N(u.value.assignments,e=>(i(),m("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[s("td",us,d(e.id),1),s("td",cs,[n(r(J),{variant:se(e.status)},{default:l(()=>[f(d(e.status),1)]),_:2},1032,["variant"])]),s("td",ms,d(e.assigned_to_name),1),s("td",gs,d(e.assigned_by_name),1),s("td",ps,d(te(e.assigned_date)),1),s("td",fs,d(te(e.returned_date)),1),s("td",vs,[s("div",_s,[n(r(y),{variant:"ghost",size:"sm",onClick:c=>Y(e.id,"assignment"),disabled:u.value.currentAction===`printing_assignment_${e.id}`,title:"Print Assignment Document"},{default:l(()=>[u.value.currentAction===`printing_assignment_${e.id}`?(i(),h(g,{key:0,name:"Loader2",class:"h-4 w-4 animate-spin"})):(i(),h(g,{key:1,name:"Printer",class:"h-4 w-4"}))]),_:2},1032,["onClick","disabled"]),n(r(y),{variant:"ghost",size:"sm",onClick:c=>ee(e.id,"assignment"),disabled:u.value.currentAction===`uploading_assignment_${e.id}`,title:"Upload Signed Assignment Document"},{default:l(()=>[u.value.currentAction===`uploading_assignment_${e.id}`?(i(),h(g,{key:0,name:"Loader2",class:"h-4 w-4 animate-spin"})):(i(),h(g,{key:1,name:"Upload",class:"h-4 w-4"}))]),_:2},1032,["onClick","disabled"]),n(r(y),{variant:"ghost",size:"sm",onClick:c=>ge(e.id,"assignment"),disabled:u.value.currentAction===`downloading_assignment_${e.id}`,title:"Download Signed Assignment Document"},{default:l(()=>[u.value.currentAction===`downloading_assignment_${e.id}`?(i(),h(g,{key:0,name:"Loader2",class:"h-4 w-4 animate-spin"})):(i(),h(g,{key:1,name:"Download",class:"h-4 w-4"}))]),_:2},1032,["onClick","disabled"]),e.status==="returned"?(i(),h(r(y),{key:0,variant:"ghost",size:"sm",onClick:c=>Y(e.id,"return"),disabled:u.value.currentAction===`printing_return_${e.id}`,title:"Print Return Document"},{default:l(()=>[u.value.currentAction===`printing_return_${e.id}`?(i(),h(g,{key:0,name:"Loader2",class:"h-4 w-4 animate-spin"})):(i(),h(g,{key:1,name:"FileText",class:"h-4 w-4"}))]),_:2},1032,["onClick","disabled"])):P("",!0),e.status==="returned"?(i(),h(r(y),{key:1,variant:"ghost",size:"sm",onClick:c=>ee(e.id,"return"),disabled:u.value.currentAction===`uploading_return_${e.id}`,title:"Upload Signed Return Document"},{default:l(()=>[u.value.currentAction===`uploading_return_${e.id}`?(i(),h(g,{key:0,name:"Loader2",class:"h-4 w-4 animate-spin"})):(i(),h(g,{key:1,name:"Upload",class:"h-4 w-4"}))]),_:2},1032,["onClick","disabled"])):P("",!0)])])]))),128))])])])),n(r(K),null,{default:l(()=>[n(r(y),{variant:"outline",onClick:t[13]||(t[13]=e=>u.value.show=!1)},{default:l(()=>t[33]||(t[33]=[f(" Close ",-1)])),_:1,__:[33]})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["breadcrumbs"])],64))}});export{Xs as default};
