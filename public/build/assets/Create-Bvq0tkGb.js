import{d as ot,u as lt,B as rt,p as y,x as he,c as be,a as d,o as n,b as r,e,g as nt,w as p,f as t,t as s,F as U,r as A,l as _,n as w,h as m,k as xe,m as ke,v as we,i as ee,S as it,W as Se}from"./app-B5xG6VJo.js";import{_ as dt}from"./AppLayout.vue_vue_type_script_setup_true_lang-BpKS02d2.js";import{_ as I}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-t2CM3wfk.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-CUj1WB0N.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-BCcKRch3.js";import{_ as ct,a as ut}from"./CardContent.vue_vue_type_script_setup_true_lang-DgkV_500.js";import{_ as mt}from"./CardDescription.vue_vue_type_script_setup_true_lang-DHeXwlz4.js";import{_ as _t,a as pt}from"./CardTitle.vue_vue_type_script_setup_true_lang-BWheNoRk.js";import{_ as vt,a as yt,b as ft,c as gt,d as ht,e as bt}from"./DialogTitle.vue_vue_type_script_setup_true_lang-D79vAYvq.js";import{_ as xt}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-C6fePRF1.js";import{_ as f}from"./Icon.vue_vue_type_script_setup_true_lang-ChCGxzCG.js";import{_ as kt}from"./Heading.vue_vue_type_script_setup_true_lang-GzPup3nW.js";import{B as wt}from"./BarcodeScanner-s5Ijj9y0.js";import"./useForwardExpose-CW3agmvV.js";import"./RovingFocusGroup-Dpbxf47o.js";import"./building-8exrNDlG.js";import"./users-DUQ-Wx_u.js";import"./activity-Fey6ue7E.js";import"./arrow-left-PSbV3--E.js";import"./calendar-BuQGgu0B.js";import"./check-CoJot0MZ.js";import"./chevron-down-D2O6nPqE.js";import"./search-BFC8Dl0i.js";import"./eye-D7pV6z7x.js";import"./user-BUAHZ6tz.js";import"./loader-circle-BIQtJpGo.js";import"./sun-B3fuyjWS.js";import"./play-DYgSNvvO.js";import"./plus-BlzWNVij.js";import"./square-pen-BhfOP72A.js";import"./trash-2-BiUA5WJq.js";import"./triangle-alert-BCBivXGO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const St={class:"max-w-4xl mx-auto"},Ct={class:"mb-8"},Vt={class:"text-gray-600 dark:text-gray-400 mt-2"},$t={class:"flex items-center justify-center mb-8"},Tt={class:"flex items-center"},qt={key:0,class:"space-y-4"},Rt={class:"space-y-2"},Ut={class:"flex gap-2"},It={class:"flex-1 relative"},Lt={class:"relative"},Bt={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},Et={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},jt=["onClick"],Ft={class:"font-medium text-sm"},Dt={class:"text-xs text-gray-500 dark:text-gray-400"},zt={key:0},Xt={key:1,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg px-3 py-2"},Nt={class:"text-sm text-gray-500 dark:text-gray-400"},Qt={class:"space-y-2"},At=["disabled"],Ot={value:""},Pt=["value"],Mt={key:0,class:"text-sm text-red-600 dark:text-red-400"},Wt={class:"grid grid-cols-2 gap-4"},Gt={class:"space-y-2"},Ht={class:"space-y-2"},Jt={class:"text-sm text-muted-foreground"},Kt={class:"grid grid-cols-2 gap-4"},Yt={class:"space-y-2"},Zt={class:"space-y-2"},es={class:"space-y-2"},ts={class:"grid grid-cols-2 gap-4"},ss={class:"space-y-2"},as={class:"space-y-2"},os={class:"grid grid-cols-2 gap-4"},ls={class:"space-y-2"},rs={class:"space-y-2"},ns={key:0,class:"text-sm text-red-600 dark:text-red-400"},is={key:1,class:"space-y-6"},ds={class:"space-y-2"},cs={class:"relative"},us={class:"relative"},ms={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},_s={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},ps=["onClick"],vs={class:"font-medium text-sm"},ys={class:"text-xs text-gray-500 dark:text-gray-400"},fs={key:0},gs={key:1},hs={key:2},bs={key:3},xs={key:1,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg px-3 py-2"},ks={class:"text-sm text-gray-500 dark:text-gray-400"},ws={key:0,class:"text-sm text-red-600 dark:text-red-400"},Ss={class:"space-y-2"},Cs={class:"flex gap-2"},Vs={class:"text-sm text-muted-foreground"},$s={key:0,class:"text-sm text-red-600 dark:text-red-400"},Ts={class:"space-y-2"},qs={value:"good"},Rs={value:"damaged"},Us={key:0,class:"text-sm text-red-600 dark:text-red-400"},Is={class:"space-y-2"},Ls={class:"text-sm text-muted-foreground"},Bs={key:0,class:"text-sm text-red-600 dark:text-red-400"},Es={class:"space-y-6 border-t pt-6"},js={class:"font-medium text-gray-900 dark:text-gray-100"},Fs={class:"space-y-2"},Ds={class:"relative"},zs={class:"relative"},Xs={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},Ns={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},Qs=["onClick"],As={class:"font-medium text-sm"},Os={class:"text-xs text-gray-500 dark:text-gray-400"},Ps={class:"text-sm text-muted-foreground"},Ms={key:0,class:"text-sm text-red-600 dark:text-red-400"},Ws={class:"space-y-2"},Gs={class:"relative"},Hs={class:"relative"},Js={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},Ks={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},Ys=["onClick"],Zs={class:"font-medium text-sm"},ea={class:"text-xs text-gray-500 dark:text-gray-400"},ta={key:0},sa={class:"text-sm text-muted-foreground"},aa={key:0,class:"text-sm text-red-600 dark:text-red-400"},oa={class:"space-y-2"},la={class:"relative"},ra={class:"relative"},na={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},ia={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},da=["onClick"],ca={class:"font-medium text-sm"},ua={class:"text-xs text-gray-500 dark:text-gray-400"},ma={key:0},_a={key:1},pa={class:"text-sm text-muted-foreground"},va={key:0,class:"text-sm text-red-600 dark:text-red-400"},ya={key:0,class:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},fa={class:"font-medium text-gray-900 dark:text-gray-100 mb-2"},ga={class:"space-y-1 text-sm"},ha={key:0},ba={key:1},xa={key:2},ka={key:2,class:"space-y-6"},wa={class:"space-y-4"},Sa={class:"space-y-2"},Ca={class:"flex items-center justify-center w-full"},Va={key:0,class:"flex flex-col items-center justify-center pt-5 pb-6"},$a={class:"mb-2 text-sm text-gray-500 dark:text-gray-400"},Ta={class:"font-semibold"},qa={class:"text-xs text-gray-500 dark:text-gray-400"},Ra={key:1,class:"relative w-full h-full"},Ua=["src"],Ia={key:0,class:"text-sm text-red-600 dark:text-red-400"},La={class:"text-sm text-muted-foreground"},Ba={class:"mt-8 p-6 bg-gray-50 dark:bg-gray-800 rounded-lg"},Ea={class:"font-medium text-gray-900 dark:text-gray-100 mb-4"},ja={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Fa={key:0,class:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},Da={class:"flex items-start"},za={class:"text-sm text-blue-700 dark:text-blue-300"},Xa={class:"font-medium"},Na={class:"mt-1"},Qa={class:"flex justify-between mt-8"},Aa={class:"flex gap-2"},Oa={class:"flex gap-2"},oe=3,Vo=ot({__name:"Create",props:{companies:{},currentCompany:{},categories:{},locations:{}},setup(Ce){var fe,ge;const{t:l}=lt(),L=Ce;rt();const Ve=()=>{var a;return((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},x=y(1),te=y(!1),H=y(!1),C=y(""),B=y([]),se=y(!1),V=y(!1),$=y(null),T=y(""),E=y([]),ae=y(!1),q=y(!1),h=y(null),j=y(""),O=y([]),le=y(!1),F=y(!1),R=y(null),D=y(""),P=y([]),re=y(!1),z=y(!1),M=y(null),X=y(""),W=y([]),ne=y(!1),N=y(!1),G=y(null),J=y(null),K=y(null),Q=y(null),c=he({location_id:"",asset_template_id:"",company_id:((fe=L.currentCompany)==null?void 0:fe.id)||"",department_id:"",assigned_to:"",serial_number:"",condition:"good",image:null,quantity:1}),u=he({company_id:((ge=L.currentCompany)==null?void 0:ge.id)||(L.companies.length===1?L.companies[0].id:""),name:"",building:"",office_number:"",address:"",city:"",state:"",postal_code:"",country:""}),$e=be(()=>[{title:l("nav.dashboard"),href:"/dashboard"},{title:l("nav.assets"),href:"/assets"},{title:l("assets.create_asset"),href:"/assets/create"}]),ie=be(()=>{switch(x.value){case 1:return $.value!==null;case 2:return h.value!==null;case 3:return!0;default:return!1}});let ce;const Te=async()=>{if(C.value.length<2){B.value=[],V.value=!1;return}se.value=!0;try{const a=await(await fetch(`/api/locations/search?q=${encodeURIComponent(C.value)}`)).json();B.value=a,V.value=!0}catch(i){console.error("Location search failed:",i),B.value=[]}finally{se.value=!1}},qe=()=>{clearTimeout(ce),ce=window.setTimeout(Te,300)},ue=i=>{$.value=i,c.location_id=i.id.toString(),C.value=i.display_name,V.value=!1},Re=()=>{$.value=null,c.location_id="",C.value="",B.value=[],V.value=!1},Ue=()=>{setTimeout(()=>{V.value=!1},200)};let me;const Ie=async()=>{if(T.value.length<2){E.value=[],q.value=!1;return}ae.value=!0;try{const a=await(await fetch(`/api/asset-templates/search?q=${encodeURIComponent(T.value)}`)).json();E.value=a,q.value=!0}catch(i){console.error("Template search failed:",i),E.value=[]}finally{ae.value=!1}},Le=()=>{clearTimeout(me),me=window.setTimeout(Ie,300)},Be=i=>{h.value=i,c.asset_template_id=i.id.toString(),T.value=i.display_name,q.value=!1},Ee=()=>{h.value=null,c.asset_template_id="",T.value="",E.value=[],q.value=!1},je=()=>{setTimeout(()=>{q.value=!1},200)};let _e;const Fe=async()=>{if(j.value.length<2){O.value=[],F.value=!1;return}le.value=!0;try{const a=await(await fetch(`/api/companies/search?q=${encodeURIComponent(j.value)}`)).json();O.value=a,F.value=!0}catch(i){console.error("Company search failed:",i),O.value=[]}finally{le.value=!1}},De=()=>{clearTimeout(_e),_e=window.setTimeout(Fe,300)},ze=i=>{R.value=i,c.company_id=i.id.toString(),j.value=i.display_name,F.value=!1,de(),Y()},Xe=()=>{var i;R.value=null,c.company_id=((i=L.currentCompany)==null?void 0:i.id)||"",j.value="",O.value=[],F.value=!1,de(),Y()},Ne=()=>{setTimeout(()=>{F.value=!1},200)};let pe;const Qe=async()=>{var i,a;if(D.value.length<2){P.value=[],z.value=!1;return}re.value=!0;try{const v=((i=R.value)==null?void 0:i.id)||((a=L.currentCompany)==null?void 0:a.id),o=await(await fetch(`/api/departments/search?q=${encodeURIComponent(D.value)}&company_id=${v}`)).json();P.value=o,z.value=!0}catch(v){console.error("Department search failed:",v),P.value=[]}finally{re.value=!1}},Ae=()=>{clearTimeout(pe),pe=window.setTimeout(Qe,300)},Oe=i=>{M.value=i,c.department_id=i.id,D.value=i.display_name,z.value=!1,Y()},de=()=>{M.value=null,c.department_id="",D.value="",P.value=[],z.value=!1,Y()},Pe=()=>{setTimeout(()=>{z.value=!1},200)};let ve;const Me=async()=>{var i,a;if(X.value.length<2){W.value=[],N.value=!1;return}ne.value=!0;try{const v=((i=R.value)==null?void 0:i.id)||((a=L.currentCompany)==null?void 0:a.id),k=`/api/employees/search?q=${encodeURIComponent(X.value)}&company_id=${v}`,S=await(await fetch(k)).json();W.value=S,N.value=!0}catch(v){console.error("Employee search failed:",v),W.value=[]}finally{ne.value=!1}},We=()=>{clearTimeout(ve),ve=window.setTimeout(Me,300)},Ge=i=>{G.value=i,c.assigned_to=i.id.toString(),X.value=i.display_name,N.value=!1},Y=()=>{G.value=null,c.assigned_to="",X.value="",W.value=[],N.value=!1},He=()=>{setTimeout(()=>{N.value=!1},200)},Je=i=>{var o;const v=(o=i.target.files)==null?void 0:o[0];if(!v){J.value=null,K.value=null,c.image=null;return}if(!v.type.startsWith("image/")){Q.value=l("assets.invalid_file_type");return}if(v.size>5*1024*1024){Q.value=l("assets.file_too_large");return}Q.value=null,J.value=v,c.image=v;const k=new FileReader;k.onload=S=>{var Z;K.value=(Z=S.target)==null?void 0:Z.result},k.readAsDataURL(v)},Ke=()=>{J.value=null,K.value=null,Q.value=null,c.image=null;const i=document.getElementById("asset_image");i&&(i.value="")},Ye=()=>{ie.value&&x.value<oe&&x.value++},Ze=()=>{x.value>1&&x.value--},ye=async()=>{u.processing=!0,u.clearErrors();try{const i=await fetch("/locations",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":Ve()},body:JSON.stringify({company_id:u.company_id,name:u.name,building:u.building,office_number:u.office_number,address:u.address,city:u.city,state:u.state,postal_code:u.postal_code,country:u.country,_from_modal:!0})}),a=await i.json();if(i.ok&&a.success){te.value=!1,u.reset();const v={id:a.location.id,name:a.location.name,code:a.location.code,building:a.location.building,office_number:a.location.office_number,address:a.location.address,city:a.location.city,company_name:a.location.company.name_en,display_name:`${a.location.code}: ${a.location.name}`+(a.location.building?` - Building ${a.location.building}`:"")+(a.location.office_number?` - Office ${a.location.office_number}`:""),full_address:[a.location.address,a.location.city].filter(Boolean).join(", ")};ue(v)}else if(a.errors){const v=["company_id","name","building","office_number","address","city","state","postal_code","country"];Object.keys(a.errors).forEach(k=>{v.includes(k)&&u.setError(k,a.errors[k][0])})}else console.error("Failed to create location:",a)}catch(i){console.error("Error creating location:",i),u.setError("name","An error occurred while creating the location.")}finally{u.processing=!1}},et=()=>{c.post("/assets",{onSuccess:i=>{var v,k;((k=(v=i.props)==null?void 0:v.flash)==null?void 0:k.show_bulk_print)&&c.quantity>1?Se.visit("/assets?show_bulk_print=true"):Se.visit("/assets")},onError:()=>{}})},tt=i=>i<x.value?"bg-primary text-primary-foreground":i===x.value?"bg-primary text-primary-foreground ring-2 ring-primary ring-offset-2":"bg-muted text-muted-foreground",st=i=>i<x.value?"bg-primary":"bg-muted",at=i=>{c.serial_number=i,H.value=!1};return(i,a)=>(n(),d(U,null,[r(e(nt),{title:e(l)("assets.create_asset")},null,8,["title"]),r(dt,{breadcrumbs:$e.value},{default:p(()=>[t("div",St,[t("div",Ct,[r(kt,{title:e(l)("assets.create_asset")},null,8,["title"]),t("p",Vt,s(e(l)("assets.create_asset_description")),1)]),t("div",$t,[t("div",Tt,[(n(),d(U,null,A(oe,v=>t("div",{key:v,class:"flex items-center"},[t("div",{class:w([tt(v),"w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium transition-colors"])},s(v),3),v<oe?(n(),d("div",{key:0,class:w([st(v),"w-16 h-1 mx-4 transition-colors"])},null,2)):_("",!0)])),64))])]),r(e(ct),null,{default:p(()=>[r(e(_t),null,{default:p(()=>[r(e(pt),null,{default:p(()=>[m(s(e(l)(`assets.step_${x.value}_title`)),1)]),_:1}),r(e(mt),null,{default:p(()=>[m(s(e(l)(`assets.step_${x.value}_description`)),1)]),_:1})]),_:1}),r(e(ut),{class:"space-y-6"},{default:p(()=>{var v,k;return[x.value===1?(n(),d("div",qt,[t("div",Rt,[r(e(g),{for:"location_search"},{default:p(()=>[m(s(e(l)("assets.location"))+" *",1)]),_:1}),t("div",Ut,[t("div",It,[t("div",Lt,[r(e(b),{id:"location_search",modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=o=>C.value=o),type:"text",placeholder:$.value?$.value.display_name:e(l)("assets.search_location_placeholder"),onInput:qe,onFocus:a[1]||(a[1]=o=>C.value.length>=2&&(V.value=!0)),onBlur:Ue,class:w({"border-red-500":e(c).errors.location_id}),disabled:$.value!==null},null,8,["modelValue","placeholder","class","disabled"]),$.value?(n(),d("button",{key:0,type:"button",onClick:Re,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r(f,{name:"X",class:"h-4 w-4"})])):_("",!0),se.value?(n(),d("div",Bt,[r(f,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),V.value&&B.value.length>0?(n(),d("div",Et,[(n(!0),d(U,null,A(B.value,o=>(n(),d("div",{key:o.id,onClick:S=>ue(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",Ft,s(o.display_name),1),t("div",Dt,[m(s(o.company_name)+" ",1),o.full_address?(n(),d("span",zt," • "+s(o.full_address),1)):_("",!0)])],8,jt))),128))])):_("",!0),V.value&&B.value.length===0&&!se.value&&C.value.length>=2?(n(),d("div",Xt,[t("div",Nt,s(e(l)("assets.no_locations_found")),1)])):_("",!0)]),r(e(vt),{open:te.value,"onUpdate:open":a[12]||(a[12]=o=>te.value=o)},{default:p(()=>[r(e(xt),{asChild:""},{default:p(()=>[r(e(I),{variant:"outline",type:"button"},{default:p(()=>[r(f,{name:"Plus",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),m(" "+s(e(l)("locations.create_location")),1)]),_:1})]),_:1}),r(e(yt),{class:"sm:max-w-lg"},{default:p(()=>[r(e(ft),null,{default:p(()=>[r(e(gt),null,{default:p(()=>[m(s(e(l)("locations.create_location")),1)]),_:1}),r(e(ht),null,{default:p(()=>[m(s(e(l)("locations.create_location_description")),1)]),_:1})]),_:1}),t("form",{onSubmit:xe(ye,["prevent"]),class:"space-y-4"},[t("div",Qt,[r(e(g),{for:"location_company_id"},{default:p(()=>[m(s(e(l)("locations.company"))+" *",1)]),_:1}),ke(t("select",{id:"location_company_id","onUpdate:modelValue":a[2]||(a[2]=o=>e(u).company_id=o),class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(u).errors.company_id}]),disabled:e(u).processing,required:""},[t("option",Ot,s(e(l)("locations.select_company")),1),(n(!0),d(U,null,A(i.companies,o=>(n(),d("option",{key:o.id,value:o.id},s(o.name_en)+" "+s(o.name_ar?`(${o.name_ar})`:""),9,Pt))),128))],10,At),[[we,e(u).company_id]]),e(u).errors.company_id?(n(),d("div",Mt,s(e(u).errors.company_id),1)):_("",!0)]),t("div",Wt,[t("div",Gt,[r(e(g),{for:"location_name"},{default:p(()=>[m(s(e(l)("locations.name"))+" *",1)]),_:1}),r(e(b),{id:"location_name",modelValue:e(u).name,"onUpdate:modelValue":a[3]||(a[3]=o=>e(u).name=o),error:e(u).errors.name,required:""},null,8,["modelValue","error"])]),t("div",Ht,[r(e(g),{for:"location_code"},{default:p(()=>[m(s(e(l)("locations.code")),1)]),_:1}),r(e(b),{id:"location_code",type:"text",placeholder:e(l)("locations.code_auto_generated"),disabled:"",class:"bg-muted"},null,8,["placeholder"]),t("p",Jt,s(e(l)("locations.code_auto_generated")),1)])]),t("div",Kt,[t("div",Yt,[r(e(g),{for:"location_building"},{default:p(()=>[m(s(e(l)("locations.building")),1)]),_:1}),r(e(b),{id:"location_building",modelValue:e(u).building,"onUpdate:modelValue":a[4]||(a[4]=o=>e(u).building=o),error:e(u).errors.building},null,8,["modelValue","error"])]),t("div",Zt,[r(e(g),{for:"location_office_number"},{default:p(()=>[m(s(e(l)("locations.office_number")),1)]),_:1}),r(e(b),{id:"location_office_number",modelValue:e(u).office_number,"onUpdate:modelValue":a[5]||(a[5]=o=>e(u).office_number=o),error:e(u).errors.office_number},null,8,["modelValue","error"])])]),t("div",es,[r(e(g),{for:"location_address"},{default:p(()=>[m(s(e(l)("locations.address")),1)]),_:1}),r(e(b),{id:"location_address",modelValue:e(u).address,"onUpdate:modelValue":a[6]||(a[6]=o=>e(u).address=o),error:e(u).errors.address},null,8,["modelValue","error"])]),t("div",ts,[t("div",ss,[r(e(g),{for:"location_city"},{default:p(()=>[m(s(e(l)("locations.city")),1)]),_:1}),r(e(b),{id:"location_city",modelValue:e(u).city,"onUpdate:modelValue":a[7]||(a[7]=o=>e(u).city=o),error:e(u).errors.city},null,8,["modelValue","error"])]),t("div",as,[r(e(g),{for:"location_state"},{default:p(()=>[m(s(e(l)("locations.state")),1)]),_:1}),r(e(b),{id:"location_state",modelValue:e(u).state,"onUpdate:modelValue":a[8]||(a[8]=o=>e(u).state=o),error:e(u).errors.state},null,8,["modelValue","error"])])]),t("div",os,[t("div",ls,[r(e(g),{for:"location_postal_code"},{default:p(()=>[m(s(e(l)("locations.postal_code")),1)]),_:1}),r(e(b),{id:"location_postal_code",modelValue:e(u).postal_code,"onUpdate:modelValue":a[9]||(a[9]=o=>e(u).postal_code=o),error:e(u).errors.postal_code},null,8,["modelValue","error"])]),t("div",rs,[r(e(g),{for:"location_country"},{default:p(()=>[m(s(e(l)("locations.country")),1)]),_:1}),r(e(b),{id:"location_country",modelValue:e(u).country,"onUpdate:modelValue":a[10]||(a[10]=o=>e(u).country=o),error:e(u).errors.country},null,8,["modelValue","error"])])])],32),r(e(bt),null,{default:p(()=>[r(e(I),{variant:"outline",onClick:a[11]||(a[11]=o=>te.value=!1),type:"button"},{default:p(()=>[m(s(e(l)("common.cancel")),1)]),_:1}),r(e(I),{onClick:ye,disabled:e(u).processing},{default:p(()=>[e(u).processing?(n(),ee(f,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"})):_("",!0),m(" "+s(e(l)("common.create")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),e(c).errors.location_id?(n(),d("div",ns,s(e(c).errors.location_id),1)):_("",!0)])])):x.value===2?(n(),d("div",is,[t("div",ds,[r(e(g),{for:"template_search"},{default:p(()=>[m(s(e(l)("assets.template"))+" *",1)]),_:1}),t("div",cs,[t("div",us,[r(e(b),{id:"template_search",modelValue:T.value,"onUpdate:modelValue":a[13]||(a[13]=o=>T.value=o),type:"text",placeholder:h.value?h.value.display_name:e(l)("assets.search_template_placeholder"),onInput:Le,onFocus:a[14]||(a[14]=o=>T.value.length>=2&&(q.value=!0)),onBlur:je,class:w({"border-red-500":e(c).errors.asset_template_id}),disabled:h.value!==null},null,8,["modelValue","placeholder","class","disabled"]),h.value?(n(),d("button",{key:0,type:"button",onClick:Ee,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r(f,{name:"X",class:"h-4 w-4"})])):_("",!0),ae.value?(n(),d("div",ms,[r(f,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),q.value&&E.value.length>0?(n(),d("div",_s,[(n(!0),d(U,null,A(E.value,o=>{var S,Z;return n(),d("div",{key:o.id,onClick:Pa=>Be(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",vs,s(o.display_name),1),t("div",ys,[o.category_name?(n(),d("span",fs,s(o.category_name),1)):_("",!0),o.category_name&&((S=o.company)!=null&&S.name_en||o.is_global)?(n(),d("span",gs," • ")):_("",!0),o.is_global?(n(),d("span",hs,s(e(l)("asset_templates.global")),1)):(Z=o.company)!=null&&Z.name_en?(n(),d("span",bs,s(o.company.name_en),1)):_("",!0)])],8,ps)}),128))])):_("",!0),q.value&&E.value.length===0&&!ae.value&&T.value.length>=2?(n(),d("div",xs,[t("div",ks,s(e(l)("assets.no_templates_found")),1)])):_("",!0)]),e(c).errors.asset_template_id?(n(),d("div",ws,s(e(c).errors.asset_template_id),1)):_("",!0)]),t("div",Ss,[r(e(g),{for:"serial_number"},{default:p(()=>[m(s(e(l)("assets.serial_number")),1)]),_:1}),t("div",Cs,[r(e(b),{id:"serial_number",modelValue:e(c).serial_number,"onUpdate:modelValue":a[15]||(a[15]=o=>e(c).serial_number=o),type:"text",placeholder:e(l)("assets.serial_number_placeholder"),class:w([{"border-red-500":e(c).errors.serial_number},"flex-1"])},null,8,["modelValue","placeholder","class"]),r(e(I),{type:"button",variant:"outline",onClick:a[16]||(a[16]=o=>H.value=!0),class:"shrink-0"},{default:p(()=>[r(f,{name:"ScanSearch",class:"h-4 w-4 mr-2"}),a[27]||(a[27]=m(" Scan "))]),_:1,__:[27]})]),t("p",Vs,s(e(l)("assets.serial_number_optional")),1),e(c).errors.serial_number?(n(),d("div",$s,s(e(c).errors.serial_number),1)):_("",!0)]),t("div",Ts,[r(e(g),{for:"condition"},{default:p(()=>[m(s(e(l)("assets.condition"))+" *",1)]),_:1}),ke(t("select",{id:"condition","onUpdate:modelValue":a[17]||(a[17]=o=>e(c).condition=o),class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(c).errors.condition}]),required:""},[t("option",qs,s(e(l)("assets.condition_good")),1),t("option",Rs,s(e(l)("assets.condition_damaged")),1)],2),[[we,e(c).condition]]),e(c).errors.condition?(n(),d("div",Us,s(e(c).errors.condition),1)):_("",!0)]),t("div",Is,[r(e(g),{for:"quantity"},{default:p(()=>[m(s(e(l)("assets.quantity"))+" *",1)]),_:1}),r(e(b),{id:"quantity",modelValue:e(c).quantity,"onUpdate:modelValue":a[18]||(a[18]=o=>e(c).quantity=o),modelModifiers:{number:!0},type:"number",min:"1",max:"100",placeholder:e(l)("assets.quantity_placeholder"),class:w({"border-red-500":e(c).errors.quantity}),required:""},null,8,["modelValue","placeholder","class"]),t("p",Ls,s(e(l)("assets.quantity_description")),1),e(c).errors.quantity?(n(),d("div",Bs,s(e(c).errors.quantity),1)):_("",!0)]),t("div",Es,[t("h4",js,s(e(l)("assets.assignment_details")),1),t("div",Fs,[r(e(g),{for:"company_search"},{default:p(()=>[m(s(e(l)("assets.company")),1)]),_:1}),t("div",Ds,[t("div",zs,[r(e(b),{id:"company_search",modelValue:j.value,"onUpdate:modelValue":a[19]||(a[19]=o=>j.value=o),type:"text",placeholder:R.value?R.value.display_name:e(l)("assets.search_company_placeholder"),onInput:De,onFocus:a[20]||(a[20]=o=>j.value.length>=2&&(F.value=!0)),onBlur:Ne,class:w({"border-red-500":e(c).errors.company_id}),disabled:R.value!==null},null,8,["modelValue","placeholder","class","disabled"]),R.value?(n(),d("button",{key:0,type:"button",onClick:Xe,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r(f,{name:"X",class:"h-4 w-4"})])):_("",!0),le.value?(n(),d("div",Xs,[r(f,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),F.value&&O.value.length>0?(n(),d("div",Ns,[(n(!0),d(U,null,A(O.value,o=>(n(),d("div",{key:o.id,onClick:S=>ze(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",As,s(o.display_name),1),t("div",Os,s(o.company_email),1)],8,Qs))),128))])):_("",!0)]),t("p",Ps,s(e(l)("assets.company_optional")),1),e(c).errors.company_id?(n(),d("div",Ms,s(e(c).errors.company_id),1)):_("",!0)]),t("div",Ws,[r(e(g),{for:"department_search"},{default:p(()=>[m(s(e(l)("assets.department")),1)]),_:1}),t("div",Gs,[t("div",Hs,[r(e(b),{id:"department_search",modelValue:D.value,"onUpdate:modelValue":a[21]||(a[21]=o=>D.value=o),type:"text",placeholder:M.value?M.value.display_name:e(l)("assets.search_department_placeholder"),onInput:Ae,onFocus:a[22]||(a[22]=o=>D.value.length>=2&&(z.value=!0)),onBlur:Pe,class:w({"border-red-500":e(c).errors.department_id}),disabled:M.value!==null},null,8,["modelValue","placeholder","class","disabled"]),M.value?(n(),d("button",{key:0,type:"button",onClick:de,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r(f,{name:"X",class:"h-4 w-4"})])):_("",!0),re.value?(n(),d("div",Js,[r(f,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),z.value&&P.value.length>0?(n(),d("div",Ks,[(n(!0),d(U,null,A(P.value,o=>(n(),d("div",{key:o.id,onClick:S=>Oe(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",Zs,s(o.display_name),1),t("div",ea,[m(s(o.company_name)+" ",1),o.description?(n(),d("span",ta," • "+s(o.description),1)):_("",!0)])],8,Ys))),128))])):_("",!0)]),t("p",sa,s(e(l)("assets.department_optional")),1),e(c).errors.department_id?(n(),d("div",aa,s(e(c).errors.department_id),1)):_("",!0)]),t("div",oa,[r(e(g),{for:"employee_search"},{default:p(()=>[m(s(e(l)("assets.assign_to_employee")),1)]),_:1}),t("div",la,[t("div",ra,[r(e(b),{id:"employee_search",modelValue:X.value,"onUpdate:modelValue":a[23]||(a[23]=o=>X.value=o),type:"text",placeholder:G.value?G.value.display_name:e(l)("assets.search_employee_placeholder"),onInput:We,onFocus:a[24]||(a[24]=o=>X.value.length>=2&&(N.value=!0)),onBlur:He,class:w({"border-red-500":e(c).errors.assigned_to}),disabled:G.value!==null},null,8,["modelValue","placeholder","class","disabled"]),G.value?(n(),d("button",{key:0,type:"button",onClick:Y,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r(f,{name:"X",class:"h-4 w-4"})])):_("",!0),ne.value?(n(),d("div",na,[r(f,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),N.value&&W.value.length>0?(n(),d("div",ia,[(n(!0),d(U,null,A(W.value,o=>(n(),d("div",{key:o.id,onClick:S=>Ge(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",ca,s(o.display_name),1),t("div",ua,[m(s(o.email)+" ",1),o.department?(n(),d("span",ma," • "+s(o.department),1)):_("",!0),o.company_name?(n(),d("span",_a," • "+s(o.company_name),1)):_("",!0)])],8,da))),128))])):_("",!0)]),t("p",pa,s(e(l)("assets.assign_to_employee_optional")),1),e(c).errors.assigned_to?(n(),d("div",va,s(e(c).errors.assigned_to),1)):_("",!0)])]),h.value?(n(),d("div",ya,[t("h4",fa,s(e(l)("assets.selected_template")),1),t("div",ga,[t("div",null,[t("strong",null,s(e(l)("assets.name"))+":",1),m(" "+s(h.value.name),1)]),h.value.manufacturer?(n(),d("div",ha,[t("strong",null,s(e(l)("assets.manufacturer"))+":",1),m(" "+s(h.value.manufacturer),1)])):_("",!0),h.value.model_name?(n(),d("div",ba,[t("strong",null,s(e(l)("assets.model"))+":",1),m(" "+s(h.value.model_name),1)])):_("",!0),h.value.asset_category?(n(),d("div",xa,[t("strong",null,s(e(l)("assets.category"))+":",1),m(" "+s(h.value.asset_category.name),1)])):_("",!0)])])):_("",!0)])):x.value===3?(n(),d("div",ka,[t("div",wa,[t("div",Sa,[r(e(g),{for:"asset_image"},{default:p(()=>[m(s(e(l)("assets.image")),1)]),_:1}),t("div",Ca,[t("label",{for:"asset_image",class:w(["flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-gray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500",{"border-red-500":Q.value}])},[K.value?(n(),d("div",Ra,[t("img",{src:K.value,alt:"Asset preview",class:"w-full h-full object-contain rounded-lg"},null,8,Ua),t("button",{type:"button",onClick:xe(Ke,["prevent"]),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors"},[r(f,{name:"X",class:"h-4 w-4"})])])):(n(),d("div",Va,[r(f,{name:"Upload",class:"w-10 h-10 mb-3 text-gray-400"}),t("p",$a,[t("span",Ta,s(e(l)("assets.click_to_upload")),1),m(" "+s(e(l)("assets.or_drag_and_drop")),1)]),t("p",qa,s(e(l)("assets.supported_formats")),1)])),t("input",{id:"asset_image",type:"file",accept:"image/*",onChange:Je,class:"hidden"},null,32)],2)]),Q.value?(n(),d("div",Ia,s(Q.value),1)):_("",!0),t("p",La,s(e(l)("assets.image_optional")),1)])]),t("div",Ba,[t("h4",Ea,s(e(l)("assets.review_asset")),1),t("div",ja,[t("div",null,[t("strong",null,s(e(l)("assets.location"))+":",1),m(" "+s(((v=$.value)==null?void 0:v.display_name)||"—"),1)]),t("div",null,[t("strong",null,s(e(l)("assets.template"))+":",1),m(" "+s(((k=h.value)==null?void 0:k.display_name)||"—"),1)]),t("div",null,[t("strong",null,s(e(l)("assets.serial_number"))+":",1),m(" "+s(e(c).serial_number||e(l)("assets.not_provided")),1)]),t("div",null,[t("strong",null,s(e(l)("assets.condition"))+":",1),m(" "+s(e(c).condition==="good"?e(l)("assets.condition_good"):e(l)("assets.condition_damaged")),1)]),t("div",null,[t("strong",null,s(e(l)("assets.quantity"))+":",1),m(" "+s(e(c).quantity)+" "+s(e(c).quantity===1?e(l)("assets.asset"):e(l)("assets.assets")),1)]),t("div",null,[t("strong",null,s(e(l)("assets.image"))+":",1),m(" "+s(J.value?J.value.name:e(l)("assets.not_provided")),1)])]),e(c).quantity>1?(n(),d("div",Fa,[t("div",Da,[r(f,{name:"Info",class:"h-4 w-4 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),t("div",za,[t("p",Xa,s(e(l)("assets.bulk_creation_notice")),1),t("p",Na,s(e(l)("assets.bulk_creation_description",{quantity:e(c).quantity})),1)])])])):_("",!0)])])):_("",!0)]}),_:1})]),_:1}),t("div",Qa,[t("div",Aa,[r(e(I),{variant:"outline",asChild:""},{default:p(()=>[r(e(it),{href:i.route("assets.index")},{default:p(()=>[r(f,{name:"ArrowLeft",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),m(" "+s(e(l)("common.cancel")),1)]),_:1},8,["href"])]),_:1}),x.value>1?(n(),ee(e(I),{key:0,variant:"outline",onClick:Ze},{default:p(()=>[r(f,{name:"ChevronLeft",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),m(" "+s(e(l)("common.previous")),1)]),_:1})):_("",!0)]),t("div",Oa,[x.value<oe?(n(),ee(e(I),{key:0,onClick:Ye,disabled:!ie.value},{default:p(()=>[m(s(e(l)("common.next"))+" ",1),r(f,{name:"ChevronRight",class:"h-4 w-4 ml-2 rtl:ml-0 rtl:mr-2"})]),_:1},8,["disabled"])):(n(),ee(e(I),{key:1,onClick:et,disabled:!ie.value||e(c).processing},{default:p(()=>[e(c).processing?(n(),ee(f,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"})):_("",!0),m(" "+s(e(l)("assets.create_asset")),1)]),_:1},8,["disabled"]))])])]),r(wt,{modelValue:H.value,"onUpdate:modelValue":a[25]||(a[25]=v=>H.value=v),title:"Scan Serial Number",description:"Position the barcode or QR code on the asset within the camera view to scan the serial number automatically. Supports all common barcode formats and QR codes.",onScanned:at,onCancel:a[26]||(a[26]=v=>H.value=!1)},null,8,["modelValue"])]),_:1},8,["breadcrumbs"])],64))}});export{Vo as default};
