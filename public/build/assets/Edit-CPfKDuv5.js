import{d as O,u as Q,x as H,p as L,c as K,a as b,o as u,b as s,e,g as W,w as l,f as t,t as n,S as w,h as m,k as Y,i as _,l as c,m as V,F as S,r as A,v as U,s as Z}from"./app-WnUIJAcw.js";import{_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cpwk7PFf.js";import{_ as x}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BPbOLveI.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-DRoXN2FS.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-BWf0gMi0.js";import{_ as $,a as C}from"./CardContent.vue_vue_type_script_setup_true_lang-Ci6RTFb2.js";import{_ as T,a as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bo_pxKkn.js";import{_ as N}from"./Badge.vue_vue_type_script_setup_true_lang-06jbRlhW.js";import{_ as p}from"./Icon.vue_vue_type_script_setup_true_lang-Bq-L6RIC.js";import{_ as se}from"./Heading.vue_vue_type_script_setup_true_lang-CW5kJC1-.js";import{_ as v}from"./InputError.vue_vue_type_script_setup_true_lang-BU9OmMjv.js";import"./useForwardExpose-Da-0qvPW.js";import"./RovingFocusGroup-iHLUCWmR.js";import"./building-QchNyxtu.js";import"./users-Dk504i1q.js";import"./activity-4LUdboPK.js";import"./arrow-left-CtDryYr0.js";import"./calendar-BvCOQbXf.js";import"./check-BA_tcNl0.js";import"./chevron-down-Dv1fuB8F.js";import"./search-Drz7iWDP.js";import"./eye-BVlft-MJ.js";import"./user-DIEgs1Qj.js";import"./loader-circle-fuHXj6Af.js";import"./sun-BiTdkNBj.js";import"./play-XI07b5yj.js";import"./plus-DSJP2Qqh.js";import"./square-pen-CqIzKXue.js";import"./trash-2-r1t2DcUO.js";import"./triangle-alert-DPSaIVgw.js";const te={class:"space-y-6"},ae={class:"flex items-center justify-between"},le={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},re={class:"flex items-center space-x-3"},oe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ie={class:"lg:col-span-2"},ne={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},me=["value"],ue={value:""},ge=["value"],ce=["value"],fe={value:"good"},_e={value:"damaged"},pe={key:0,class:"space-y-3"},be={class:"relative inline-block"},ve=["src","alt"],ye={key:1,class:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg"},we={class:"flex items-center gap-2"},xe={class:"space-y-3"},ke={class:"relative"},he={class:"mt-2 flex items-center gap-2 text-xs text-gray-500"},Ve={key:1,class:"mt-4 space-y-3"},$e={class:"relative inline-block"},Ce=["src"],Te={class:"flex items-center justify-between"},Ie={class:"space-y-6"},Se={class:"mt-1 text-sm text-gray-900 dark:text-gray-100 font-mono"},Ue={key:0},Ae={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},De={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},je={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Ee={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Le={class:"flex justify-end pt-2"},cs=O({__name:"Edit",props:{asset:{},categories:{},locations:{},companies:{}},setup(F){const{t:d}=Q(),f=F,r=H({serial_number:f.asset.serial_number||"",service_tag_number:f.asset.service_tag_number||"",finance_tag_number:f.asset.finance_tag_number||"",asset_category_id:f.asset.asset_category_id,location_id:f.asset.location_id,company_id:f.asset.company_id,model_name:f.asset.model_name||"",model_number:f.asset.model_number||"",condition:f.asset.condition||"good",notes:f.asset.notes||"",image:null,remove_image:!1}),y=L(null),h=L(!1),M=K(()=>[{title:d("nav.dashboard"),href:"/dashboard"},{title:d("nav.assets"),href:"/assets"},{title:f.asset.asset_tag,href:`/assets/${f.asset.id}`},{title:d("assets.edit_asset"),href:`/assets/${f.asset.id}/edit`}]),B=i=>{switch(i){case"available":return"default";case"assigned":return"secondary";case"maintenance":return"destructive";case"retired":return"outline";default:return"secondary"}},R=i=>{var j;const a=i.target,o=(j=a.files)==null?void 0:j[0];if(!o){r.image=null,y.value=null;return}if(!["image/jpeg","image/png","image/jpg","image/gif"].includes(o.type)){alert(d("assets.invalid_file_type")),a.value="";return}if(o.size>5*1024*1024){alert(d("assets.file_too_large")),a.value="";return}r.image=o;const D=new FileReader;D.onload=J=>{var E;y.value=(E=J.target)==null?void 0:E.result},D.readAsDataURL(o)},q=()=>{r.image=null,y.value=null;const i=document.getElementById("image");i&&(i.value="")},G=()=>{h.value=!0,r.remove_image=!0},P=()=>{h.value=!1,r.remove_image=!1},z=()=>{console.warn("Failed to load asset image")},X=()=>{r.put(route("assets.update",f.asset.id),{onSuccess:()=>{y.value=null,h.value=!1,r.image=null,r.remove_image=!1}})};return(i,a)=>(u(),b(S,null,[s(e(W),{title:`${e(d)("assets.edit_asset")} - ${i.asset.asset_tag}`},null,8,["title"]),s(ee,{breadcrumbs:M.value},{default:l(()=>[t("div",te,[t("div",ae,[t("div",null,[s(se,{title:`${e(d)("assets.edit_asset")} - ${i.asset.asset_tag}`},null,8,["title"]),t("p",le,n(e(d)("assets.edit_asset_description")),1)]),t("div",re,[s(e(x),{variant:"outline",asChild:""},{default:l(()=>[s(e(w),{href:i.route("assets.show",i.asset.id)},{default:l(()=>[s(p,{name:"Eye",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),m(" "+n(e(d)("common.view")),1)]),_:1},8,["href"])]),_:1}),s(e(x),{variant:"outline",asChild:""},{default:l(()=>[s(e(w),{href:i.route("assets.index")},{default:l(()=>[s(p,{name:"ArrowLeft",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),m(" "+n(e(d)("common.back")),1)]),_:1},8,["href"])]),_:1})])]),t("div",oe,[t("div",ie,[t("form",{onSubmit:Y(X,["prevent"]),class:"space-y-6"},[s(e($),null,{default:l(()=>[s(e(T),null,{default:l(()=>[s(e(I),null,{default:l(()=>[m(n(e(d)("assets.basic_information")),1)]),_:1})]),_:1}),s(e(C),{class:"space-y-6"},{default:l(()=>[t("div",null,[s(e(g),{for:"asset_tag"},{default:l(()=>[m(n(e(d)("assets.asset_tag")),1)]),_:1}),s(e(k),{id:"asset_tag",value:i.asset.asset_tag,disabled:"",class:"mt-1 bg-gray-50 dark:bg-gray-800"},null,8,["value"]),a[10]||(a[10]=t("p",{class:"text-xs text-gray-500 mt-1"}," Asset tag cannot be changed ",-1))]),t("div",ne,[t("div",null,[s(e(g),{for:"serial_number"},{default:l(()=>[m(n(e(d)("assets.serial_number")),1)]),_:1}),s(e(k),{id:"serial_number",modelValue:e(r).serial_number,"onUpdate:modelValue":a[0]||(a[0]=o=>e(r).serial_number=o),placeholder:"Enter serial number",class:"mt-1"},null,8,["modelValue"]),e(r).errors.serial_number?(u(),_(v,{key:0,message:e(r).errors.serial_number,class:"mt-1"},null,8,["message"])):c("",!0)]),t("div",null,[s(e(g),{for:"service_tag_number"},{default:l(()=>[m(n(e(d)("assets.service_tag_number")),1)]),_:1}),s(e(k),{id:"service_tag_number",modelValue:e(r).service_tag_number,"onUpdate:modelValue":a[1]||(a[1]=o=>e(r).service_tag_number=o),placeholder:"Service tag number",class:"mt-1"},null,8,["modelValue"]),e(r).errors.service_tag_number?(u(),_(v,{key:0,message:e(r).errors.service_tag_number,class:"mt-1"},null,8,["message"])):c("",!0)]),t("div",null,[s(e(g),{for:"finance_tag_number"},{default:l(()=>[m(n(e(d)("assets.finance_tag_number")),1)]),_:1}),s(e(k),{id:"finance_tag_number",modelValue:e(r).finance_tag_number,"onUpdate:modelValue":a[2]||(a[2]=o=>e(r).finance_tag_number=o),placeholder:"Finance tag number",class:"mt-1"},null,8,["modelValue"]),e(r).errors.finance_tag_number?(u(),_(v,{key:0,message:e(r).errors.finance_tag_number,class:"mt-1"},null,8,["message"])):c("",!0)])]),t("div",de,[t("div",null,[s(e(g),{for:"model_name"},{default:l(()=>[m(n(e(d)("assets.model_name")),1)]),_:1}),s(e(k),{id:"model_name",modelValue:e(r).model_name,"onUpdate:modelValue":a[3]||(a[3]=o=>e(r).model_name=o),placeholder:"Model name",class:"mt-1"},null,8,["modelValue"]),e(r).errors.model_name?(u(),_(v,{key:0,message:e(r).errors.model_name,class:"mt-1"},null,8,["message"])):c("",!0)]),t("div",null,[s(e(g),{for:"model_number"},{default:l(()=>[m(n(e(d)("assets.model_number")),1)]),_:1}),s(e(k),{id:"model_number",modelValue:e(r).model_number,"onUpdate:modelValue":a[4]||(a[4]=o=>e(r).model_number=o),placeholder:"Model number",class:"mt-1"},null,8,["modelValue"]),e(r).errors.model_number?(u(),_(v,{key:0,message:e(r).errors.model_number,class:"mt-1"},null,8,["message"])):c("",!0)])]),t("div",null,[s(e(g),{for:"asset_category_id"},{default:l(()=>[m(n(e(d)("assets.category"))+" *",1)]),_:1}),V(t("select",{id:"asset_category_id","onUpdate:modelValue":a[5]||(a[5]=o=>e(r).asset_category_id=o),required:"",class:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[a[11]||(a[11]=t("option",{value:""},"Select a category",-1)),(u(!0),b(S,null,A(i.categories,o=>(u(),b("option",{key:o.id,value:o.id},n("â€”".repeat(Math.max(0,o.depth||0)))+" "+n(o.name),9,me))),128))],512),[[U,e(r).asset_category_id]]),e(r).errors.asset_category_id?(u(),_(v,{key:0,message:e(r).errors.asset_category_id,class:"mt-1"},null,8,["message"])):c("",!0)]),t("div",null,[s(e(g),{for:"company_id"},{default:l(()=>[m(n(e(d)("assets.company"))+" *",1)]),_:1}),V(t("select",{id:"company_id","onUpdate:modelValue":a[6]||(a[6]=o=>e(r).company_id=o),required:"",class:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t("option",ue,n(e(d)("assets.select_company")),1),(u(!0),b(S,null,A(i.companies,o=>(u(),b("option",{key:o.id,value:o.id},n(o.name_en),9,ge))),128))],512),[[U,e(r).company_id]]),e(r).errors.company_id?(u(),_(v,{key:0,message:e(r).errors.company_id,class:"mt-1"},null,8,["message"])):c("",!0),a[12]||(a[12]=t("p",{class:"text-xs text-gray-500 mt-1"}," Changing the company will affect asset ownership and access permissions. ",-1))]),t("div",null,[s(e(g),{for:"location_id"},{default:l(()=>[m(n(e(d)("assets.location"))+" *",1)]),_:1}),V(t("select",{id:"location_id","onUpdate:modelValue":a[7]||(a[7]=o=>e(r).location_id=o),required:"",class:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[a[13]||(a[13]=t("option",{value:""},"Select a location",-1)),(u(!0),b(S,null,A(i.locations,o=>(u(),b("option",{key:o.id,value:o.id},n(o.code?`${o.code}: ${o.name}`:o.name),9,ce))),128))],512),[[U,e(r).location_id]]),e(r).errors.location_id?(u(),_(v,{key:0,message:e(r).errors.location_id,class:"mt-1"},null,8,["message"])):c("",!0)]),t("div",null,[s(e(g),{for:"condition"},{default:l(()=>[m(n(e(d)("assets.condition"))+" *",1)]),_:1}),V(t("select",{id:"condition","onUpdate:modelValue":a[8]||(a[8]=o=>e(r).condition=o),required:"",class:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t("option",fe,n(e(d)("assets.condition_good")),1),t("option",_e,n(e(d)("assets.condition_damaged")),1)],512),[[U,e(r).condition]]),e(r).errors.condition?(u(),_(v,{key:0,message:e(r).errors.condition,class:"mt-1"},null,8,["message"])):c("",!0)]),t("div",null,[s(e(g),{for:"notes"},{default:l(()=>[m(n(e(d)("assets.notes")),1)]),_:1}),V(t("textarea",{id:"notes","onUpdate:modelValue":a[9]||(a[9]=o=>e(r).notes=o),rows:"4",placeholder:"Additional notes about this asset",class:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[Z,e(r).notes]]),e(r).errors.notes?(u(),_(v,{key:0,message:e(r).errors.notes,class:"mt-1"},null,8,["message"])):c("",!0)])]),_:1})]),_:1}),s(e($),null,{default:l(()=>[s(e(T),null,{default:l(()=>[s(e(I),null,{default:l(()=>[m(n(e(d)("assets.asset_image")),1)]),_:1})]),_:1}),s(e(C),{class:"space-y-6"},{default:l(()=>[i.asset.image_path&&!h.value?(u(),b("div",pe,[s(e(g),{class:"text-sm font-medium"},{default:l(()=>a[14]||(a[14]=[m("Current Image")])),_:1,__:[14]}),t("div",be,[t("img",{src:`/storage/${i.asset.image_path}`,alt:i.asset.asset_tag,class:"max-w-sm max-h-64 rounded-lg border-2 border-gray-200 dark:border-gray-600 shadow-sm",onError:z},null,40,ve),t("button",{type:"button",onClick:G,class:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-colors",title:"Remove current image"},[s(p,{name:"X",class:"h-4 w-4"})])]),a[15]||(a[15]=t("p",{class:"text-xs text-gray-500"},"Click the X to remove this image",-1))])):c("",!0),h.value?(u(),b("div",ye,[t("div",we,[s(p,{name:"AlertTriangle",class:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}),a[16]||(a[16]=t("p",{class:"text-sm text-yellow-800 dark:text-yellow-200"}," Current image will be removed when you save the asset. ",-1)),t("button",{type:"button",onClick:P,class:"ml-auto text-sm text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 underline"}," Undo ")])])):c("",!0),t("div",xe,[s(e(g),{for:"image",class:"text-sm font-medium"},{default:l(()=>[m(n(i.asset.image_path?"Replace Image":"Upload Image"),1)]),_:1}),t("div",ke,[t("input",{id:"image",type:"file",accept:"image/jpeg,image/png,image/jpg,image/gif",onChange:R,class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-3 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-gray-700 dark:file:text-gray-300 border border-gray-300 rounded-lg dark:border-gray-600"},null,32),t("div",he,[s(p,{name:"Info",class:"h-4 w-4"}),a[17]||(a[17]=t("span",null,"Supported: PNG, JPG, GIF up to 5MB",-1))])]),e(r).errors.image?(u(),_(v,{key:0,message:e(r).errors.image,class:"mt-1"},null,8,["message"])):c("",!0),y.value?(u(),b("div",Ve,[s(e(g),{class:"text-sm font-medium text-green-700 dark:text-green-400"},{default:l(()=>a[18]||(a[18]=[m("New Image Preview")])),_:1,__:[18]}),t("div",$e,[t("img",{src:y.value,alt:"New image preview",class:"max-w-sm max-h-64 rounded-lg border-2 border-green-200 dark:border-green-600 shadow-sm"},null,8,Ce),t("button",{type:"button",onClick:q,class:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-colors",title:"Remove new image"},[s(p,{name:"X",class:"h-4 w-4"})])])])):c("",!0)])]),_:1})]),_:1}),t("div",Te,[s(e(x),{variant:"outline",type:"button",asChild:""},{default:l(()=>[s(e(w),{href:i.route("assets.show",i.asset.id)},{default:l(()=>[s(p,{name:"ArrowLeft",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),m(" "+n(e(d)("common.cancel")),1)]),_:1},8,["href"])]),_:1}),s(e(x),{type:"submit",disabled:e(r).processing,class:"min-w-32"},{default:l(()=>[e(r).processing?(u(),_(p,{key:0,name:"Loader2",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4 animate-spin"})):(u(),_(p,{key:1,name:"Save",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"})),m(" "+n(e(r).processing?e(d)("common.saving"):e(d)("common.save_changes")),1)]),_:1},8,["disabled"])])],32)]),t("div",Ie,[s(e($),null,{default:l(()=>[s(e(T),null,{default:l(()=>[s(e(I),null,{default:l(()=>a[19]||(a[19]=[m("Asset Overview")])),_:1,__:[19]})]),_:1}),s(e(C),{class:"space-y-4"},{default:l(()=>[t("div",null,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:l(()=>[m(n(e(d)("assets.asset_tag")),1)]),_:1}),t("p",Se,n(i.asset.asset_tag),1)]),t("div",null,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:l(()=>[m(n(e(d)("assets.status")),1)]),_:1}),s(e(N),{variant:B(i.asset.status),class:"mt-1"},{default:l(()=>[m(n(e(d)(`assets.status_${i.asset.status}`)),1)]),_:1},8,["variant"])]),i.asset.company?(u(),b("div",Ue,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:l(()=>[m(n(e(d)("assets.company")),1)]),_:1}),t("p",Ae,n(i.asset.company.name_en),1)])):c("",!0),t("div",null,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:l(()=>[m(n(e(d)("assets.created_at")),1)]),_:1}),t("p",De,n(new Date(i.asset.created_at).toLocaleDateString()),1)]),t("div",null,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:l(()=>[m(n(e(d)("assets.updated_at")),1)]),_:1}),t("p",je,n(new Date(i.asset.updated_at).toLocaleDateString()),1)])]),_:1})]),_:1}),i.asset.assetTemplate?(u(),_(e($),{key:0},{default:l(()=>[s(e(T),null,{default:l(()=>[s(e(I),null,{default:l(()=>a[20]||(a[20]=[m("Template Information")])),_:1,__:[20]})]),_:1}),s(e(C),{class:"space-y-3"},{default:l(()=>[t("div",null,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:l(()=>a[21]||(a[21]=[m(" Template Name ")])),_:1,__:[21]}),t("p",Ee,n(i.asset.assetTemplate.name),1)]),t("div",null,[s(e(g),{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},{default:l(()=>a[22]||(a[22]=[m(" Template Type ")])),_:1,__:[22]}),s(e(N),{variant:i.asset.assetTemplate.is_global?"secondary":"default",class:"mt-1"},{default:l(()=>{var o;return[m(n(i.asset.assetTemplate.is_global?"Global":(o=i.asset.assetTemplate.company)==null?void 0:o.name_en),1)]}),_:1},8,["variant"])]),t("div",Le,[s(e(w),{href:i.route("asset-templates.show",i.asset.assetTemplate.id),class:"inline-flex items-center text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"},{default:l(()=>[a[23]||(a[23]=m(" View Template ")),s(p,{name:"ExternalLink",class:"ml-1 rtl:ml-0 rtl:mr-1 h-3 w-3"})]),_:1,__:[23]},8,["href"])])]),_:1})]),_:1})):c("",!0),s(e($),null,{default:l(()=>[s(e(T),null,{default:l(()=>[s(e(I),null,{default:l(()=>a[24]||(a[24]=[m("Quick Actions")])),_:1,__:[24]})]),_:1}),s(e(C),{class:"space-y-3"},{default:l(()=>[s(e(x),{variant:"outline",size:"sm",asChild:"",class:"w-full justify-start"},{default:l(()=>[s(e(w),{href:i.route("assets.show",i.asset.id)},{default:l(()=>[s(p,{name:"Eye",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),a[25]||(a[25]=m(" View Details "))]),_:1,__:[25]},8,["href"])]),_:1}),s(e(x),{variant:"outline",size:"sm",asChild:"",class:"w-full justify-start"},{default:l(()=>[s(e(w),{href:i.route("assets.index")},{default:l(()=>[s(p,{name:"List",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),a[26]||(a[26]=m(" All Assets "))]),_:1,__:[26]},8,["href"])]),_:1})]),_:1})]),_:1})])])])]),_:1},8,["breadcrumbs"])],64))}});export{cs as default};
