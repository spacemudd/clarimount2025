import{d as A,k as P,q as c,i as g,o as d,w as m,f as t,l as R,b as l,e as a,g as i,a as b,m as u,p as N,F as G,r as X,t as h,v as j,z as q}from"./app-BXrKzvLN.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-DaRJsVNh.js";import{_ as U}from"./index-oTuGssnE.js";import{_ as H,a as J}from"./CardContent.vue_vue_type_script_setup_true_lang-DyKY7wJi.js";import{_ as K,a as O}from"./CardTitle.vue_vue_type_script_setup_true_lang-BneLXc-Y.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-BCuFgQ0l.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-jpk8-4yg.js";import{_}from"./InputError.vue_vue_type_script_setup_true_lang-CRR7h7a0.js";import{_ as y}from"./Icon.vue_vue_type_script_setup_true_lang-DKJKdV5h.js";import"./useForwardExpose-W9iILB0G.js";import"./x-DhIxxX5O.js";import"./building-BI7hMlkJ.js";import"./users-M0XHIFGR.js";import"./activity-D_PrRM_H.js";import"./arrow-left-DynVa_2p.js";import"./calendar-BpDQPph8.js";import"./chevron-down-DFMuuyMl.js";import"./search-DvMXvNs3.js";import"./eye-BULOlcPe.js";import"./user-DnEz3ToP.js";import"./loader-circle-BP0asllC.js";import"./sun-leX6A77Z.js";import"./play-BwtsLJW2.js";import"./plus-DNlw4JNr.js";import"./square-pen-BfuBYkiM.js";import"./trash-2-ejZ3laI_.js";import"./triangle-alert-XsXEVLRv.js";const Q={class:"p-6"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y=["value"],Z={key:0,class:"space-y-3"},ee={class:"relative inline-block"},te=["src"],ae={key:1,class:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg"},le={class:"flex items-center gap-2"},se={class:"space-y-3"},re={class:"relative"},oe={class:"mt-2 flex items-center gap-2 text-xs text-gray-500"},me={key:1,class:"mt-4 space-y-3"},de={class:"relative inline-block"},ne=["src"],ie={class:"mt-6 flex items-center gap-4"},Ae=A({__name:"Edit",props:{template:{},categories:{}},setup($){const f=$,r=P({name:f.template.name,manufacturer:f.template.manufacturer||"",model_name:f.template.model_name||"",model_number:f.template.model_number||"",asset_category_id:f.template.asset_category_id,specifications:{},default_notes:f.template.default_notes||"",image:null,delete_image:!1}),v=c(!1),o=c({}),x=c(null),w=c(!1),D=c(!1),T=()=>{v.value=!0,o.value={},r.put(route("asset-templates.update",f.template.id),{onSuccess:()=>{v.value=!1},onError:n=>{o.value=n,v.value=!1},onFinish:()=>{v.value=!1}})},E=n=>{var V;const s=(V=n.target.files)==null?void 0:V[0];if(s){r.image=s;const C=new FileReader;C.onload=B=>{var I;x.value=(I=B.target)==null?void 0:I.result},C.readAsDataURL(s)}},M=()=>{r.image=null,x.value=null;const n=document.getElementById("image");n&&(n.value="")},F=()=>{D.value=!0},L=()=>{w.value=!0,r.delete_image=!0},S=()=>{w.value=!1,r.delete_image=!1};return(n,e)=>(d(),g(z,null,{default:m(()=>[t("div",Q,[e[22]||(e[22]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"}," Edit Template "),t("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," Update this asset template ")],-1)),t("form",{onSubmit:R(T,["prevent"]),class:"max-w-2xl"},[l(a(H),null,{default:m(()=>[l(a(K),null,{default:m(()=>[l(a(O),null,{default:m(()=>e[6]||(e[6]=[i("Template Details",-1)])),_:1,__:[6]})]),_:1}),l(a(J),{class:"space-y-6"},{default:m(()=>[t("div",null,[l(a(p),{for:"name"},{default:m(()=>e[7]||(e[7]=[i("Template Name *",-1)])),_:1,__:[7]}),l(a(k),{id:"name",modelValue:a(r).name,"onUpdate:modelValue":e[0]||(e[0]=s=>a(r).name=s),required:"",placeholder:"Dell Latitude 7420 Laptop",class:"mt-1"},null,8,["modelValue"]),o.value.name?(d(),g(_,{key:0,message:o.value.name,class:"mt-1"},null,8,["message"])):u("",!0)]),t("div",null,[l(a(p),{for:"manufacturer"},{default:m(()=>e[8]||(e[8]=[i("Manufacturer",-1)])),_:1,__:[8]}),l(a(k),{id:"manufacturer",modelValue:a(r).manufacturer,"onUpdate:modelValue":e[1]||(e[1]=s=>a(r).manufacturer=s),placeholder:"Dell, HP, Apple...",class:"mt-1"},null,8,["modelValue"]),o.value.manufacturer?(d(),g(_,{key:0,message:o.value.manufacturer,class:"mt-1"},null,8,["message"])):u("",!0)]),t("div",W,[t("div",null,[l(a(p),{for:"model_name"},{default:m(()=>e[9]||(e[9]=[i("Model Name",-1)])),_:1,__:[9]}),l(a(k),{id:"model_name",modelValue:a(r).model_name,"onUpdate:modelValue":e[2]||(e[2]=s=>a(r).model_name=s),placeholder:"Latitude 7420",class:"mt-1"},null,8,["modelValue"]),o.value.model_name?(d(),g(_,{key:0,message:o.value.model_name,class:"mt-1"},null,8,["message"])):u("",!0)]),t("div",null,[l(a(p),{for:"model_number"},{default:m(()=>e[10]||(e[10]=[i("Model Number",-1)])),_:1,__:[10]}),l(a(k),{id:"model_number",modelValue:a(r).model_number,"onUpdate:modelValue":e[3]||(e[3]=s=>a(r).model_number=s),placeholder:"LAT7420-001",class:"mt-1"},null,8,["modelValue"]),o.value.model_number?(d(),g(_,{key:0,message:o.value.model_number,class:"mt-1"},null,8,["message"])):u("",!0)])]),t("div",null,[l(a(p),{for:"asset_category_id"},{default:m(()=>e[11]||(e[11]=[i("Category",-1)])),_:1,__:[11]}),N(t("select",{id:"asset_category_id","onUpdate:modelValue":e[4]||(e[4]=s=>a(r).asset_category_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100"},[e[12]||(e[12]=t("option",{value:""},"Select a category",-1)),(d(!0),b(G,null,X(n.categories,s=>(d(),b("option",{key:s.id,value:s.id},h("â€”".repeat(Math.max(0,s.depth||0)))+" "+h(s.name),9,Y))),128))],512),[[j,a(r).asset_category_id]]),o.value.asset_category_id?(d(),g(_,{key:0,message:o.value.asset_category_id,class:"mt-1"},null,8,["message"])):u("",!0)]),t("div",null,[l(a(p),{for:"default_notes"},{default:m(()=>e[13]||(e[13]=[i("Default Notes",-1)])),_:1,__:[13]}),N(t("textarea",{id:"default_notes","onUpdate:modelValue":e[5]||(e[5]=s=>a(r).default_notes=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100",placeholder:"Additional notes about this template"},null,512),[[q,a(r).default_notes]]),o.value.default_notes?(d(),g(_,{key:0,message:o.value.default_notes,class:"mt-1"},null,8,["message"])):u("",!0)]),n.template.image_path&&!w.value?(d(),b("div",Z,[l(a(p),{class:"text-sm font-medium"},{default:m(()=>e[14]||(e[14]=[i("Current Image",-1)])),_:1,__:[14]}),t("div",ee,[t("img",{src:`/storage/${n.template.image_path}`,alt:"Current template image",class:"max-w-sm max-h-64 rounded-lg border-2 border-gray-200 dark:border-gray-600 shadow-sm",onError:F},null,40,te),t("button",{type:"button",onClick:L,class:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-colors",title:"Remove current image"},[l(y,{name:"X",class:"h-4 w-4"})])]),e[15]||(e[15]=t("p",{class:"text-xs text-gray-500"},"Click the X to remove this image",-1))])):u("",!0),w.value?(d(),b("div",ae,[t("div",le,[l(y,{name:"AlertTriangle",class:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}),e[16]||(e[16]=t("p",{class:"text-sm text-yellow-800 dark:text-yellow-200"}," Current image will be removed when you save the template. ",-1)),t("button",{type:"button",onClick:S,class:"ml-auto text-sm text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 underline"}," Undo ")])])):u("",!0),t("div",se,[l(a(p),{for:"image",class:"text-sm font-medium"},{default:m(()=>[i(h(n.template.image_path?"Replace Image":"Upload Image"),1)]),_:1}),t("div",re,[t("input",{id:"image",type:"file",accept:"image/jpeg,image/png,image/jpg,image/gif",onChange:E,class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-3 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-gray-700 dark:file:text-gray-300 border border-gray-300 rounded-lg dark:border-gray-600"},null,32),t("div",oe,[l(y,{name:"Info",class:"h-4 w-4"}),e[17]||(e[17]=t("span",null,"Supported: PNG, JPG, GIF up to 2MB",-1))])]),o.value.image?(d(),g(_,{key:0,message:o.value.image,class:"mt-1"},null,8,["message"])):u("",!0),x.value?(d(),b("div",me,[l(a(p),{class:"text-sm font-medium text-green-700 dark:text-green-400"},{default:m(()=>e[18]||(e[18]=[i("New Image Preview",-1)])),_:1,__:[18]}),t("div",de,[t("img",{src:x.value,alt:"New image preview",class:"max-w-sm max-h-64 rounded-lg border-2 border-green-200 dark:border-green-600 shadow-sm"},null,8,ne),t("button",{type:"button",onClick:M,class:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-colors",title:"Remove new image"},[l(y,{name:"X",class:"h-4 w-4"})])]),e[19]||(e[19]=t("p",{class:"text-xs text-green-600 dark:text-green-400"}," This new image will replace the current one when saved ",-1))])):u("",!0)])]),_:1})]),_:1}),t("div",ie,[l(a(U),{type:"submit",disabled:v.value},{default:m(()=>[v.value?(d(),g(y,{key:0,name:"loader-2",class:"h-4 w-4 mr-2 animate-spin"})):u("",!0),e[20]||(e[20]=i(" Update Template ",-1))]),_:1,__:[20]},8,["disabled"]),l(a(U),{variant:"outline",as:"Link",href:n.route("asset-templates.show",n.template.id)},{default:m(()=>e[21]||(e[21]=[i(" Cancel ",-1)])),_:1,__:[21]},8,["href"])])],32)])]),_:1}))}});export{Ae as default};
