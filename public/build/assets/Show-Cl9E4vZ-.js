import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-BJdKCi8B.js";import{_ as k}from"./index-BVKlX1El.js";import{_ as u,a as m}from"./CardContent.vue_vue_type_script_setup_true_lang-CIRecHqL.js";import{_ as b,a as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-BPQ0Tuht.js";import{_ as g}from"./Badge.vue_vue_type_script_setup_true_lang-BwC_mOsW.js";import{u as L,c as T,i as x,o,w as d,f as t,b as n,m as y,e as a,t as e,g as c,a as i,F as h,r as f,A,n as O,y as $}from"./app-CxR3Rgxi.js";import{F as R}from"./x-DHtexKo2.js";import{C as E,a as I}from"./circle-x-ISUweIqP.js";import{C as X}from"./chart-column-BPj_LaoC.js";import{R as B}from"./rotate-ccw-C-VOvnJY.js";import"./useForwardExpose-3NUKWST4.js";import"./building-rc9xLOpA.js";import"./users-C6UN0_C7.js";const q={class:"flex justify-between items-center"},G={class:"text-xl font-semibold text-gray-900 dark:text-white"},H={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},J={class:"flex space-x-3"},K={class:"py-12"},M={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-8"},Q={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},U={class:"flex items-center"},W={class:"p-2 bg-blue-100 rounded-lg dark:bg-blue-900/20"},Y={class:"ml-4"},Z={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},tt={class:"text-2xl font-bold text-gray-900 dark:text-white"},et={class:"flex items-center"},st={class:"p-2 bg-green-100 rounded-lg dark:bg-green-900/20"},at={class:"ml-4"},rt={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},dt={class:"text-2xl font-bold text-gray-900 dark:text-white"},nt={class:"flex items-center"},ot={class:"p-2 bg-red-100 rounded-lg dark:bg-red-900/20"},it={class:"ml-4"},lt={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},ct={class:"text-2xl font-bold text-gray-900 dark:text-white"},_t={class:"flex items-center"},ut={class:"p-2 bg-purple-100 rounded-lg dark:bg-purple-900/20"},mt={class:"ml-4"},yt={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},pt={class:"text-2xl font-bold text-gray-900 dark:text-white"},xt={key:0,class:"text-center py-8"},gt={class:"text-gray-500 dark:text-gray-400"},ht={key:1,class:"space-y-4"},ft={class:"flex items-center justify-between mb-3"},vt={class:"text-lg font-medium text-gray-900 dark:text-white"},kt={class:"text-sm text-gray-500 dark:text-gray-400"},bt={class:"flex items-center space-x-3"},wt={class:"mb-3"},$t={class:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-1"},Ct={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},St={class:"grid grid-cols-3 gap-4 text-sm"},Bt={class:"text-gray-500 dark:text-gray-400"},Ft={class:"font-medium text-green-600 dark:text-green-400"},jt={class:"text-gray-500 dark:text-gray-400"},zt={class:"font-medium text-red-600 dark:text-red-400"},Pt={class:"text-gray-500 dark:text-gray-400"},Vt={class:"font-medium text-gray-900 dark:text-white"},Dt={key:0,class:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-md"},Nt={class:"text-sm text-red-600 dark:text-red-400"},Lt={class:"space-y-4"},Tt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},At={class:"text-sm font-medium text-red-800 dark:text-red-200"},Ot={class:"text-2xl font-bold text-red-600 dark:text-red-400"},Rt={key:0},Et={class:"text-sm font-medium text-gray-900 dark:text-white mb-2"},It={class:"flex flex-wrap gap-2"},Xt={class:"overflow-x-auto"},qt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Gt={class:"bg-gray-50 dark:bg-gray-800"},Ht={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Jt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Kt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Mt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Qt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ut={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Wt={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},Yt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Zt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},se={class:"px-6 py-4 whitespace-nowrap"},ae={class:"px-6 py-4 whitespace-nowrap"},re={key:0,class:"mt-4 text-center"},de={class:"text-sm text-gray-500 dark:text-gray-400"},fe={__name:"Show",props:{import:Object,syncProgress:Array,validationSummary:Object},setup(_){const{t:F}=L(),l=_,j=T(()=>l.syncProgress.some(s=>s.status==="failed")),C=s=>{switch(s){case"synced":case"completed":return"success";case"syncing":case"processing":return"warning";case"failed":return"destructive";default:return"secondary"}},S=s=>F(`attendance.${s}`,s),z=s=>{switch(s){case"completed":return"bg-green-500";case"processing":return"bg-yellow-500";case"failed":return"bg-red-500";default:return"bg-gray-500"}},P=s=>new Date(s).toLocaleDateString(),V=()=>{$.post(route("attendance.retry",l.import.id),{},{preserveScroll:!0})},D=s=>{const p=l.import.sync_batches.find(r=>r.company_id===s);p&&$.post(route("attendance.batch.retry",p.id),{},{preserveScroll:!0})};return(s,p)=>(o(),x(N,null,{header:d(()=>[t("div",q,[t("div",null,[t("h2",G,e(s.$t("attendance.import_details")),1),t("p",H,e(l.import.filename),1)]),t("div",J,[j.value?(o(),x(a(k),{key:0,onClick:V,variant:"outline"},{default:d(()=>[n(a(B),{class:"w-4 h-4 mr-2"}),c(" "+e(s.$t("attendance.retry_sync")),1)]),_:1})):y("",!0),n(a(k),{onClick:p[0]||(p[0]=r=>a($).visit(s.route("attendance.index"))),variant:"outline"},{default:d(()=>[c(e(s.$t("common.back")),1)]),_:1})])])]),default:d(()=>[t("div",K,[t("div",M,[t("div",Q,[n(a(u),null,{default:d(()=>[n(a(m),{class:"p-6"},{default:d(()=>[t("div",U,[t("div",W,[n(a(R),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),t("div",Y,[t("p",Z,e(s.$t("attendance.total_records")),1),t("p",tt,e(l.import.total_records),1)])])]),_:1})]),_:1}),n(a(u),null,{default:d(()=>[n(a(m),{class:"p-6"},{default:d(()=>[t("div",et,[t("div",st,[n(a(E),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),t("div",at,[t("p",rt,e(s.$t("attendance.valid_records")),1),t("p",dt,e(l.import.successful_records),1)])])]),_:1})]),_:1}),n(a(u),null,{default:d(()=>[n(a(m),{class:"p-6"},{default:d(()=>[t("div",nt,[t("div",ot,[n(a(I),{class:"w-6 h-6 text-red-600 dark:text-red-400"})]),t("div",it,[t("p",lt,e(s.$t("attendance.invalid_records")),1),t("p",ct,e(l.import.failed_records),1)])])]),_:1})]),_:1}),n(a(u),null,{default:d(()=>[n(a(m),{class:"p-6"},{default:d(()=>[t("div",_t,[t("div",ut,[n(a(X),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),t("div",mt,[t("p",yt,e(s.$t("attendance.success_rate")),1),t("p",pt,e(l.import.success_rate)+"% ",1)])])]),_:1})]),_:1})]),n(a(u),null,{default:d(()=>[n(a(b),null,{default:d(()=>[n(a(w),null,{default:d(()=>[c(e(s.$t("attendance.sync_progress")),1)]),_:1})]),_:1}),n(a(m),null,{default:d(()=>[_.syncProgress.length===0?(o(),i("div",xt,[t("p",gt,e(s.$t("attendance.no_sync_batches")),1)])):(o(),i("div",ht,[(o(!0),i(h,null,f(_.syncProgress,r=>(o(),i("div",{key:r.company_id,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},[t("div",ft,[t("div",null,[t("h3",vt,e(r.company_name),1),t("p",kt,e(r.total_records)+" "+e(s.$t("attendance.total_records").toLowerCase()),1)]),t("div",bt,[n(a(g),{variant:C(r.status)},{default:d(()=>[c(e(S(r.status)),1)]),_:2},1032,["variant"]),r.status==="failed"?(o(),x(a(k),{key:0,onClick:v=>D(r.company_id),size:"sm",variant:"outline"},{default:d(()=>[n(a(B),{class:"w-4 h-4 mr-1"}),c(" "+e(s.$t("attendance.retry_batch")),1)]),_:2},1032,["onClick"])):y("",!0)])]),t("div",wt,[t("div",$t,[t("span",null,e(s.$t("attendance.completion_percentage")),1),t("span",null,e(r.completion_percentage)+"%",1)]),t("div",Ct,[t("div",{class:O(["h-2 rounded-full transition-all duration-300",z(r.status)]),style:A({width:r.completion_percentage+"%"})},null,6)])]),t("div",St,[t("div",null,[t("p",Bt,e(s.$t("attendance.synced")),1),t("p",Ft,e(r.synced_records),1)]),t("div",null,[t("p",jt,e(s.$t("attendance.failed_sync")),1),t("p",zt,e(r.failed_records),1)]),t("div",null,[t("p",Pt,e(s.$t("attendance.success_rate")),1),t("p",Vt,e(r.success_rate)+"% ",1)])]),r.error_message?(o(),i("div",Dt,[t("p",Nt,e(r.error_message),1)])):y("",!0)]))),128))]))]),_:1})]),_:1}),_.validationSummary.total_errors>0?(o(),x(a(u),{key:0},{default:d(()=>[n(a(b),null,{default:d(()=>[n(a(w),null,{default:d(()=>[c(e(s.$t("attendance.validation_errors")),1)]),_:1})]),_:1}),n(a(m),null,{default:d(()=>[t("div",Lt,[t("div",Tt,[(o(!0),i(h,null,f(_.validationSummary.error_types,(r,v)=>(o(),i("div",{key:v,class:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg"},[t("p",At,e(s.$t(`attendance.${v}`)),1),t("p",Ot,e(r),1)]))),128))]),_.validationSummary.unmapped_departments.length>0?(o(),i("div",Rt,[t("h4",Et,e(s.$t("attendance.unmapped_departments")),1),t("div",It,[(o(!0),i(h,null,f(_.validationSummary.unmapped_departments,r=>(o(),x(a(g),{key:r,variant:"destructive"},{default:d(()=>[c(e(r),1)]),_:2},1024))),128))])])):y("",!0)])]),_:1})]),_:1})):y("",!0),n(a(u),null,{default:d(()=>[n(a(b),null,{default:d(()=>[n(a(w),null,{default:d(()=>[c(e(s.$t("attendance.import_records")),1)]),_:1})]),_:1}),n(a(m),null,{default:d(()=>[t("div",Xt,[t("table",qt,[t("thead",Gt,[t("tr",null,[t("th",Ht,e(s.$t("employees.employee_id")),1),t("th",Jt,e(s.$t("employees.first_name")),1),t("th",Kt,e(s.$t("employees.department")),1),t("th",Mt,e(s.$t("common.date")),1),t("th",Qt,e(s.$t("attendance.sync_status")),1),t("th",Ut,e(s.$t("common.status")),1)])]),t("tbody",Wt,[(o(!0),i(h,null,f(l.import.records.slice(0,50),r=>(o(),i("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},[t("td",Yt,e(r.csv_employee_id),1),t("td",Zt,e(r.first_name),1),t("td",te,e(r.fingerprint_department),1),t("td",ee,e(P(r.date)),1),t("td",se,[n(a(g),{variant:C(r.bayzat_sync_status)},{default:d(()=>[c(e(S(r.bayzat_sync_status)),1)]),_:2},1032,["variant"])]),t("td",ae,[n(a(g),{variant:r.is_valid?"success":"destructive"},{default:d(()=>[c(e(r.is_valid?s.$t("common.valid"):s.$t("common.invalid")),1)]),_:2},1032,["variant"])])]))),128))])])]),l.import.records.length>50?(o(),i("div",re,[t("p",de,e(s.$t("common.showing_first_n_records",{count:50})),1)])):y("",!0)]),_:1})]),_:1})])])]),_:1}))}};export{fe as default};
