import{d as G,x as X,p as y,i as g,o as m,w as d,f as t,k as j,b as s,e as a,h as i,a as b,l as u,m as w,F as N,r as $,t as h,v as M,s as q,z}from"./app-dLrzKn0F.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-CC2lz0RT.js";import{_ as D}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DKT4rCoS.js";import{_ as J,a as K}from"./CardContent.vue_vue_type_script_setup_true_lang-CMRhP0rd.js";import{_ as O,a as Q}from"./CardTitle.vue_vue_type_script_setup_true_lang-DyG_DfBm.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-d4BXlb9S.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-NYm1nVzK.js";import{_}from"./InputError.vue_vue_type_script_setup_true_lang-DkFL_pvV.js";import{_ as c}from"./Icon.vue_vue_type_script_setup_true_lang-8QAoSVp1.js";import"./useForwardExpose-BFVmn8q-.js";import"./RovingFocusGroup-n8bBNkc1.js";import"./building-cRr6cHnB.js";import"./users-DPgfeWw6.js";import"./activity-B-e9Y-EX.js";import"./arrow-left-BS4zfNci.js";import"./calendar-CeWKwItp.js";import"./check-vJjWrwjt.js";import"./chevron-down-Gm_v2yhr.js";import"./search-BCwAPWjy.js";import"./eye-sw0O8Wbi.js";import"./user-D-J4KGKy.js";import"./loader-circle-B25GR8gg.js";import"./sun-CI8pab6l.js";import"./play-D-Y2MDjS.js";import"./plus-DeWJrU-0.js";import"./square-pen-DVrvQtUP.js";import"./trash-2-DFt3QDPc.js";import"./triangle-alert-DQA7Yhdu.js";const W={class:"p-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z=["value"],ee=["value"],te={key:0,class:"space-y-3"},ae={class:"relative inline-block"},le=["src"],se={key:1,class:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg"},oe={class:"flex items-center gap-2"},re={class:"space-y-3"},me={class:"relative"},de={class:"mt-2 flex items-center gap-2 text-xs text-gray-500"},ne={key:1,class:"mt-4 space-y-3"},ie={class:"relative inline-block"},ue=["src"],ge={class:"flex items-center space-x-2"},pe={class:"mt-6 flex items-center gap-4"},Xe=G({__name:"Edit",props:{template:{},companies:{},categories:{}},setup(T){const f=T,o=X({name:f.template.name,manufacturer:f.template.manufacturer||"",model_name:f.template.model_name||"",model_number:f.template.model_number||"",asset_category_id:f.template.asset_category_id,company_id:f.template.company_id||"",specifications:{},default_notes:f.template.default_notes||"",image:null,delete_image:!1,is_global:f.template.is_global}),v=y(!1),r=y({}),k=y(null),x=y(!1),E=y(!1),S=()=>{v.value=!0,r.value={},o.put(route("asset-templates.update",f.template.id),{onSuccess:()=>{v.value=!1},onError:n=>{r.value=n,v.value=!1},onFinish:()=>{v.value=!1}})},L=n=>{var C;const l=(C=n.target.files)==null?void 0:C[0];if(l){o.image=l;const U=new FileReader;U.onload=R=>{var I;k.value=(I=R.target)==null?void 0:I.result},U.readAsDataURL(l)}},B=()=>{o.image=null,k.value=null;const n=document.getElementById("image");n&&(n.value="")},F=()=>{E.value=!0},A=()=>{x.value=!0,o.delete_image=!0},P=()=>{x.value=!1,o.delete_image=!1};return(n,e)=>(m(),g(H,null,{default:d(()=>[t("div",W,[e[27]||(e[27]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"}," Edit Template "),t("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," Update this asset template ")],-1)),t("form",{onSubmit:j(S,["prevent"]),class:"max-w-2xl"},[s(a(J),null,{default:d(()=>[s(a(O),null,{default:d(()=>[s(a(Q),null,{default:d(()=>e[8]||(e[8]=[i("Template Details")])),_:1,__:[8]})]),_:1}),s(a(K),{class:"space-y-6"},{default:d(()=>[t("div",null,[s(a(p),{for:"name"},{default:d(()=>e[9]||(e[9]=[i("Template Name *")])),_:1,__:[9]}),s(a(V),{id:"name",modelValue:a(o).name,"onUpdate:modelValue":e[0]||(e[0]=l=>a(o).name=l),required:"",placeholder:"Dell Latitude 7420 Laptop",class:"mt-1"},null,8,["modelValue"]),r.value.name?(m(),g(_,{key:0,message:r.value.name,class:"mt-1"},null,8,["message"])):u("",!0)]),t("div",null,[s(a(p),{for:"manufacturer"},{default:d(()=>e[10]||(e[10]=[i("Manufacturer")])),_:1,__:[10]}),s(a(V),{id:"manufacturer",modelValue:a(o).manufacturer,"onUpdate:modelValue":e[1]||(e[1]=l=>a(o).manufacturer=l),placeholder:"Dell, HP, Apple...",class:"mt-1"},null,8,["modelValue"]),r.value.manufacturer?(m(),g(_,{key:0,message:r.value.manufacturer,class:"mt-1"},null,8,["message"])):u("",!0)]),t("div",Y,[t("div",null,[s(a(p),{for:"model_name"},{default:d(()=>e[11]||(e[11]=[i("Model Name")])),_:1,__:[11]}),s(a(V),{id:"model_name",modelValue:a(o).model_name,"onUpdate:modelValue":e[2]||(e[2]=l=>a(o).model_name=l),placeholder:"Latitude 7420",class:"mt-1"},null,8,["modelValue"]),r.value.model_name?(m(),g(_,{key:0,message:r.value.model_name,class:"mt-1"},null,8,["message"])):u("",!0)]),t("div",null,[s(a(p),{for:"model_number"},{default:d(()=>e[12]||(e[12]=[i("Model Number")])),_:1,__:[12]}),s(a(V),{id:"model_number",modelValue:a(o).model_number,"onUpdate:modelValue":e[3]||(e[3]=l=>a(o).model_number=l),placeholder:"LAT7420-001",class:"mt-1"},null,8,["modelValue"]),r.value.model_number?(m(),g(_,{key:0,message:r.value.model_number,class:"mt-1"},null,8,["message"])):u("",!0)])]),t("div",null,[s(a(p),{for:"asset_category_id"},{default:d(()=>e[13]||(e[13]=[i("Category")])),_:1,__:[13]}),w(t("select",{id:"asset_category_id","onUpdate:modelValue":e[4]||(e[4]=l=>a(o).asset_category_id=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100"},[e[14]||(e[14]=t("option",{value:""},"Select a category",-1)),(m(!0),b(N,null,$(n.categories,l=>(m(),b("option",{key:l.id,value:l.id},h("â€”".repeat(Math.max(0,l.depth||0)))+" "+h(l.name),9,Z))),128))],512),[[M,a(o).asset_category_id]]),r.value.asset_category_id?(m(),g(_,{key:0,message:r.value.asset_category_id,class:"mt-1"},null,8,["message"])):u("",!0)]),t("div",null,[s(a(p),{for:"company_id"},{default:d(()=>e[15]||(e[15]=[i("Company")])),_:1,__:[15]}),w(t("select",{id:"company_id","onUpdate:modelValue":e[5]||(e[5]=l=>a(o).company_id=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100"},[e[16]||(e[16]=t("option",{value:""},"Select a company",-1)),(m(!0),b(N,null,$(n.companies,l=>(m(),b("option",{key:l.id,value:l.id},h(l.name_en),9,ee))),128))],512),[[M,a(o).company_id]]),r.value.company_id?(m(),g(_,{key:0,message:r.value.company_id,class:"mt-1"},null,8,["message"])):u("",!0)]),t("div",null,[s(a(p),{for:"default_notes"},{default:d(()=>e[17]||(e[17]=[i("Default Notes")])),_:1,__:[17]}),w(t("textarea",{id:"default_notes","onUpdate:modelValue":e[6]||(e[6]=l=>a(o).default_notes=l),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100",placeholder:"Additional notes about this template"},null,512),[[q,a(o).default_notes]]),r.value.default_notes?(m(),g(_,{key:0,message:r.value.default_notes,class:"mt-1"},null,8,["message"])):u("",!0)]),n.template.image_path&&!x.value?(m(),b("div",te,[s(a(p),{class:"text-sm font-medium"},{default:d(()=>e[18]||(e[18]=[i("Current Image")])),_:1,__:[18]}),t("div",ae,[t("img",{src:`/storage/${n.template.image_path}`,alt:"Current template image",class:"max-w-sm max-h-64 rounded-lg border-2 border-gray-200 dark:border-gray-600 shadow-sm",onError:F},null,40,le),t("button",{type:"button",onClick:A,class:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-colors",title:"Remove current image"},[s(c,{name:"X",class:"h-4 w-4"})])]),e[19]||(e[19]=t("p",{class:"text-xs text-gray-500"},"Click the X to remove this image",-1))])):u("",!0),x.value?(m(),b("div",se,[t("div",oe,[s(c,{name:"AlertTriangle",class:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}),e[20]||(e[20]=t("p",{class:"text-sm text-yellow-800 dark:text-yellow-200"}," Current image will be removed when you save the template. ",-1)),t("button",{type:"button",onClick:P,class:"ml-auto text-sm text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 underline"}," Undo ")])])):u("",!0),t("div",re,[s(a(p),{for:"image",class:"text-sm font-medium"},{default:d(()=>[i(h(n.template.image_path?"Replace Image":"Upload Image"),1)]),_:1}),t("div",me,[t("input",{id:"image",type:"file",accept:"image/jpeg,image/png,image/jpg,image/gif",onChange:L,class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-3 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-gray-700 dark:file:text-gray-300 border border-gray-300 rounded-lg dark:border-gray-600"},null,32),t("div",de,[s(c,{name:"Info",class:"h-4 w-4"}),e[21]||(e[21]=t("span",null,"Supported: PNG, JPG, GIF up to 2MB",-1))])]),r.value.image?(m(),g(_,{key:0,message:r.value.image,class:"mt-1"},null,8,["message"])):u("",!0),k.value?(m(),b("div",ne,[s(a(p),{class:"text-sm font-medium text-green-700 dark:text-green-400"},{default:d(()=>e[22]||(e[22]=[i("New Image Preview")])),_:1,__:[22]}),t("div",ie,[t("img",{src:k.value,alt:"New image preview",class:"max-w-sm max-h-64 rounded-lg border-2 border-green-200 dark:border-green-600 shadow-sm"},null,8,ue),t("button",{type:"button",onClick:B,class:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-colors",title:"Remove new image"},[s(c,{name:"X",class:"h-4 w-4"})])]),e[23]||(e[23]=t("p",{class:"text-xs text-green-600 dark:text-green-400"}," This new image will replace the current one when saved ",-1))])):u("",!0)]),t("div",ge,[w(t("input",{id:"is_global","onUpdate:modelValue":e[7]||(e[7]=l=>a(o).is_global=l),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700"},null,512),[[z,a(o).is_global]]),s(a(p),{for:"is_global",class:"text-sm font-medium"},{default:d(()=>e[24]||(e[24]=[i(" Make this template available to all companies (Global) ")])),_:1,__:[24]}),r.value.is_global?(m(),g(_,{key:0,message:r.value.is_global,class:"mt-1"},null,8,["message"])):u("",!0)])]),_:1})]),_:1}),t("div",pe,[s(a(D),{type:"submit",disabled:v.value},{default:d(()=>[v.value?(m(),g(c,{key:0,name:"loader-2",class:"h-4 w-4 mr-2 animate-spin"})):u("",!0),e[25]||(e[25]=i(" Update Template "))]),_:1,__:[25]},8,["disabled"]),s(a(D),{variant:"outline",as:"Link",href:n.route("asset-templates.show",n.template.id)},{default:d(()=>e[26]||(e[26]=[i(" Cancel ")])),_:1,__:[26]},8,["href"])])],32)])]),_:1}))}});export{Xe as default};
