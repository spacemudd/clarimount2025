import{d as V,x as D,p as v,E as U,i as C,o,w as S,f as l,k as E,m,a as d,l as a,e as s,s as i,t as n,F as j,r as B}from"./app-DIDSfSZF.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-BCIcK_gG.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BuG49Fjo.js";import"./useForwardExpose-rWx5Wlte.js";import"./RovingFocusGroup-DasZ1GaQ.js";import"./building-DfDbSVKB.js";import"./users-UXLO6h05.js";const T={class:"max-w-2xl mx-auto p-6"},F={key:0,class:"text-red-500 text-sm mt-1"},M={key:0,class:"text-red-500 text-sm mt-1"},$={key:0,class:"text-red-500 text-sm mt-1"},q={key:0,class:"text-red-500 text-sm mt-1"},L={key:0,class:"text-red-500 text-sm mt-1"},I={key:0,class:"text-red-500 text-sm mt-1"},R={class:"relative"},z={class:"flex"},H={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto"},J={key:0,class:"px-3 py-2 text-gray-500"},P={key:1,class:"px-3 py-2 text-gray-500"},A={key:2},G=["onClick"],K={class:"font-medium"},O={class:"text-sm text-gray-500"},Q={key:1,class:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded-md"},W={class:"text-sm font-medium text-blue-800"},X={class:"text-xs text-blue-600"},Y={key:0,class:"text-red-500 text-sm mt-1"},Z={key:0,class:"text-red-500 text-sm mt-1"},ee={key:0,class:"text-red-500 text-sm mt-1"},te={key:0,class:"text-red-500 text-sm mt-1"},le={key:0,class:"text-red-500 text-sm mt-1"},se={class:"flex gap-4 pt-4"},re=["disabled"],oe={key:0},de={key:1},ve=V({__name:"Create",setup(ne){const t=D({employee_id:"",first_name:"",last_name:"",email:"",phone:"",mobile:"",department:"",department_id:null,job_title:"",manager:"",hire_date:"",notes:""}),p=v(""),y=v([]),f=v(!1),b=v(!1),x=v(null);let c=null;const g=u=>{c&&clearTimeout(c),c=setTimeout(async()=>{if(u.length<2){y.value=[];return}f.value=!0;try{const e=await fetch(`/api/departments/search?q=${encodeURIComponent(u)}`);e.ok&&(y.value=await e.json())}catch(e){console.error("Error searching departments:",e)}finally{f.value=!1}},300)};U(p,u=>{u.length>=2?(b.value=!0,g(u)):(b.value=!1,y.value=[])});const _=u=>{x.value=u,t.department_id=u.id,p.value=u.name,b.value=!1},k=()=>{x.value=null,t.department_id=null,p.value="",y.value=[],b.value=!1},w=()=>{setTimeout(()=>{b.value=!1},200)},h=()=>{t.post("/employees")};return(u,e)=>(o(),C(N,null,{default:S(()=>[l("div",T,[e[24]||(e[24]=l("h1",{class:"text-2xl font-bold mb-6"},"Create Employee",-1)),l("form",{onSubmit:E(h,["prevent"]),class:"space-y-4"},[l("div",null,[e[12]||(e[12]=l("label",{class:"block text-sm font-medium mb-1"},"Employee ID",-1)),m(l("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>s(t).employee_id=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,512),[[i,s(t).employee_id]]),s(t).errors.employee_id?(o(),d("div",F,n(s(t).errors.employee_id),1)):a("",!0)]),l("div",null,[e[13]||(e[13]=l("label",{class:"block text-sm font-medium mb-1"},"First Name *",-1)),m(l("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>s(t).first_name=r),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,512),[[i,s(t).first_name]]),s(t).errors.first_name?(o(),d("div",M,n(s(t).errors.first_name),1)):a("",!0)]),l("div",null,[e[14]||(e[14]=l("label",{class:"block text-sm font-medium mb-1"},"Last Name *",-1)),m(l("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>s(t).last_name=r),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,512),[[i,s(t).last_name]]),s(t).errors.last_name?(o(),d("div",$,n(s(t).errors.last_name),1)):a("",!0)]),l("div",null,[e[15]||(e[15]=l("label",{class:"block text-sm font-medium mb-1"},"Email *",-1)),m(l("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>s(t).email=r),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,512),[[i,s(t).email]]),s(t).errors.email?(o(),d("div",q,n(s(t).errors.email),1)):a("",!0)]),l("div",null,[e[16]||(e[16]=l("label",{class:"block text-sm font-medium mb-1"},"Phone",-1)),m(l("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>s(t).phone=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,512),[[i,s(t).phone]]),s(t).errors.phone?(o(),d("div",L,n(s(t).errors.phone),1)):a("",!0)]),l("div",null,[e[17]||(e[17]=l("label",{class:"block text-sm font-medium mb-1"},"Mobile",-1)),m(l("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>s(t).mobile=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,512),[[i,s(t).mobile]]),s(t).errors.mobile?(o(),d("div",I,n(s(t).errors.mobile),1)):a("",!0)]),l("div",null,[e[18]||(e[18]=l("label",{class:"block text-sm font-medium mb-1"},"Department",-1)),l("div",R,[l("div",z,[m(l("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>p.value=r),type:"text",placeholder:"Search for a department...",class:"w-full px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onFocus:e[7]||(e[7]=r=>b.value=p.value.length>=2),onBlur:w},null,544),[[i,p.value]]),x.value?(o(),d("button",{key:0,type:"button",onClick:k,class:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"}," âœ• ")):a("",!0)]),b.value?(o(),d("div",H,[f.value?(o(),d("div",J," Searching... ")):y.value.length===0&&p.value.length>=2?(o(),d("div",P," No departments found ")):(o(),d("div",A,[(o(!0),d(j,null,B(y.value,r=>(o(),d("button",{key:r.id,type:"button",onClick:ae=>_(r),class:"w-full px-3 py-2 text-left hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"},[l("div",K,n(r.name),1),l("div",O,n(r.company_name),1)],8,G))),128))]))])):a("",!0),x.value?(o(),d("div",Q,[l("div",W,"Selected: "+n(x.value.name),1),l("div",X,n(x.value.company_name),1)])):a("",!0)]),s(t).errors.department_id?(o(),d("div",Y,n(s(t).errors.department_id),1)):a("",!0)]),l("div",null,[e[19]||(e[19]=l("label",{class:"block text-sm font-medium mb-1"},"Job Title",-1)),m(l("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>s(t).job_title=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,512),[[i,s(t).job_title]]),s(t).errors.job_title?(o(),d("div",Z,n(s(t).errors.job_title),1)):a("",!0)]),l("div",null,[e[20]||(e[20]=l("label",{class:"block text-sm font-medium mb-1"},"Manager",-1)),m(l("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>s(t).manager=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,512),[[i,s(t).manager]]),s(t).errors.manager?(o(),d("div",ee,n(s(t).errors.manager),1)):a("",!0)]),l("div",null,[e[21]||(e[21]=l("label",{class:"block text-sm font-medium mb-1"},"Hire Date",-1)),m(l("input",{"onUpdate:modelValue":e[10]||(e[10]=r=>s(t).hire_date=r),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,512),[[i,s(t).hire_date]]),s(t).errors.hire_date?(o(),d("div",te,n(s(t).errors.hire_date),1)):a("",!0)]),l("div",null,[e[22]||(e[22]=l("label",{class:"block text-sm font-medium mb-1"},"Notes",-1)),m(l("textarea",{"onUpdate:modelValue":e[11]||(e[11]=r=>s(t).notes=r),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,512),[[i,s(t).notes]]),s(t).errors.notes?(o(),d("div",le,n(s(t).errors.notes),1)):a("",!0)]),l("div",se,[e[23]||(e[23]=l("a",{href:"/employees",class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel ",-1)),l("button",{type:"submit",disabled:s(t).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},[s(t).processing?(o(),d("span",oe,"Saving...")):(o(),d("span",de,"Create Employee"))],8,re)])],32)])]),_:1}))}});export{ve as default};
