import{d as ce,u as de,q as D,c as E,I as me,y as ue,a as g,o as p,b as t,e,h as _e,w as l,f as s,m as S,i as F,t as a,s as v,g as d,p as G,v as H,F as N,r as J,n as K}from"./app-CHIjDZuZ.js";import{a as Q,b as R,c as W,e as w,f as pe,_ as fe}from"./AppLayout.vue_vue_type_script_setup_true_lang-6s3i2-Li.js";import{_ as f}from"./index-BI5lX1Qb.js";import{_ as he}from"./Input.vue_vue_type_script_setup_true_lang-DJf0hbV8.js";import{_ as xe}from"./Badge.vue_vue_type_script_setup_true_lang-CRn8JKss.js";import{_ as k,a as V}from"./CardContent.vue_vue_type_script_setup_true_lang-DlOkVb1m.js";import{_ as T,a as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-DXsNoMDC.js";import{_ as Y}from"./Checkbox.vue_vue_type_script_setup_true_lang-CQbIgS8d.js";import{_ as i}from"./Icon.vue_vue_type_script_setup_true_lang-BJJ5fV1_.js";import{_ as ye}from"./Heading.vue_vue_type_script_setup_true_lang-L0cC348Q.js";import"./useForwardExpose-BwM4eZOZ.js";import"./x-BaaE6kpm.js";import"./building-C1-G0n3X.js";import"./users-DkzFubVR.js";import"./activity-B11j2qvV.js";import"./arrow-left-BC6c0Typ.js";import"./calendar-BPdmiXCZ.js";import"./chevron-down-B-Pvo_2T.js";import"./search-DFV3jbWM.js";import"./eye-kM4RYPQj.js";import"./user-Ba_S_03D.js";import"./loader-circle-BlLlK2RK.js";import"./sun-Bc_YScej.js";import"./play-hDMb51pb.js";import"./plus-Ba8neW1X.js";import"./square-pen-C-pva_bz.js";import"./trash-2-hWt_95z4.js";import"./triangle-alert-B2Tql2sf.js";const ge={class:"space-y-6"},ve={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},we={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},be={class:"flex flex-col sm:flex-row gap-2"},ke={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Ce={class:"text-2xl font-bold"},$e={class:"text-xs text-muted-foreground"},De={class:"text-2xl font-bold text-green-600"},Ve={class:"text-xs text-muted-foreground"},je={class:"text-2xl font-bold text-orange-600"},Ue={class:"text-xs text-muted-foreground"},Se={class:"text-2xl font-bold text-orange-600"},Te={class:"text-xs text-muted-foreground"},Ae={class:"flex flex-col lg:flex-row gap-4"},Pe={class:"flex-1 relative"},Be={class:"absolute inset-y-0 left-0 rtl:left-auto rtl:right-0 pl-3 rtl:pl-0 rtl:pr-3 flex items-center pointer-events-none"},ze={class:"flex flex-col sm:flex-row gap-2"},Ee={value:""},Fe={value:"active"},Ne={value:"inactive"},Me={value:"terminated"},Xe={value:""},qe=["value"],Ie={key:0,class:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"},Le={class:"flex items-center gap-2"},Oe={class:"text-sm font-medium"},Ge={class:"flex items-center gap-2"},He={key:1,class:"text-center py-12"},Je={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},Ke={class:"text-gray-600 dark:text-gray-400 mb-6"},Qe={class:"overflow-x-auto"},Re={class:"w-full"},We={class:"bg-gray-50 dark:bg-gray-800"},Ye={class:"text-left rtl:text-right"},Ze={class:"px-6 py-4 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},et={class:"px-6 py-4 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},tt={class:"px-6 py-4 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},st={class:"px-6 py-4 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},at={class:"px-6 py-4 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},lt={class:"px-6 py-4 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ot={class:"px-6 py-4 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider text-right rtl:text-left"},rt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},nt={class:"px-6 py-4"},it={class:"px-6 py-4 whitespace-nowrap"},ct={class:"flex items-center"},dt={class:"flex-shrink-0 h-12 w-12"},mt={class:"h-12 w-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center"},ut={class:"text-sm font-semibold text-white"},_t={class:"ml-4 rtl:ml-0 rtl:mr-4"},pt={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},ft={class:"text-sm text-gray-500 dark:text-gray-400 font-mono"},ht={class:"px-6 py-4 whitespace-nowrap"},xt={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},yt={class:"text-sm text-gray-500 dark:text-gray-400"},gt={class:"text-xs text-gray-400 dark:text-gray-500"},vt={class:"px-6 py-4 whitespace-nowrap"},wt={class:"text-sm text-gray-900 dark:text-gray-100"},bt={class:"text-sm text-gray-500 dark:text-gray-400"},kt={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"flex items-center"},$t={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Dt={class:"px-6 py-4 whitespace-nowrap"},Vt={class:"flex flex-col gap-1"},jt={class:"flex items-center text-sm text-gray-600 dark:text-gray-400"},Ut={class:"flex items-center text-sm text-gray-600 dark:text-gray-400"},St={class:"px-6 py-4 whitespace-nowrap text-right rtl:text-left"},Tt={class:"flex justify-end rtl:justify-start gap-1"},At={class:"sr-only"},Pt={class:"sr-only"},Bt={class:"sr-only"},ds=ce({__name:"Index",props:{employees:{},company:{},filters:{}},setup(Z){var X,q,I;const{t:o}=de(),_=Z,h=D(((X=_.filters)==null?void 0:X.search)||""),x=D(((q=_.filters)==null?void 0:q.status)||""),y=D(((I=_.filters)==null?void 0:I.department)||""),m=D([]),P=D(!1),ee=E(()=>[{title:o("nav.dashboard"),href:"/dashboard"},{title:o("employees.title"),href:"/employees"}]),C=E(()=>{const n=_.employees.data.length,c=_.employees.data.filter(u=>u.employment_status==="active").length,r=_.employees.data.filter(u=>u.employment_status==="inactive").length,b=_.employees.data.filter(u=>u.employment_status==="terminated").length,j=_.employees.data.reduce((u,U)=>u+(U.reported_tickets_count||0),0),$=_.employees.data.filter(u=>{const U=new Date,ie=new Date(U.getTime()+720*60*60*1e3);return[u.residence_expiry_date,u.contract_end_date,u.exit_reentry_visa_expiry,u.passport_expiry_date,u.insurance_expiry_date].filter(Boolean).some(L=>{if(!L)return!1;const O=new Date(L);return O<=ie&&O>=U})});return{total:n,active:c,inactive:r,terminated:b,totalTickets:j,needingAttention:$.length,needingAttentionEmployees:$,activePercentage:n>0?Math.round(c/n*100):0}}),te=n=>{switch(n){case"active":return"default";case"inactive":return"secondary";case"terminated":return"destructive";default:return"secondary"}},se=n=>{switch(n){case"active":return"CheckCircle";case"inactive":return"Clock";case"terminated":return"XCircle";default:return"Circle"}},ae=n=>new Date(n).toLocaleDateString(),le=E(()=>_.employees.data.map(c=>c.department).filter(Boolean).filter((c,r,b)=>b.indexOf(c)===r).sort()),oe=()=>{P.value?m.value=_.employees.data.map(n=>n.id):m.value=[]},re=n=>{const c=m.value.indexOf(n);c>-1?m.value.splice(c,1):m.value.push(n),P.value=m.value.length===_.employees.data.length},B=n=>{if(m.value.length!==0)switch(n){case"activate":z("active");break;case"deactivate":z("inactive");break;case"terminate":z("terminated");break}},z=n=>{console.log(`Updating ${m.value.length} employees to status: ${n}`)};let M;me([h,x,y],()=>{clearTimeout(M),M=window.setTimeout(()=>{ue.get("/employees",{search:h.value||void 0,status:x.value||void 0,department:y.value||void 0},{preserveState:!0,replace:!0})},300)});const ne=()=>{h.value="",x.value="",y.value=""};return(n,c)=>(p(),g(N,null,[t(e(_e),{title:e(o)("employees.title")},null,8,["title"]),t(fe,{breadcrumbs:ee.value},{default:l(()=>[s("div",ge,[s("div",ve,[s("div",null,[t(ye,{title:e(o)("employees.my_employees")},null,8,["title"]),s("p",we,a(e(o)("employees.manage_workforce")),1)]),s("div",be,[t(e(f),{variant:"outline",asChild:""},{default:l(()=>[t(e(v),{href:n.route("employees.import")},{default:l(()=>[t(i,{name:"Upload",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),d(" "+a(e(o)("employees.import_csv")),1)]),_:1},8,["href"])]),_:1}),t(e(f),{asChild:""},{default:l(()=>[t(e(v),{href:n.route("employees.create")},{default:l(()=>[t(i,{name:"Plus",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),d(" "+a(e(o)("employees.create_employee")),1)]),_:1},8,["href"])]),_:1})])]),s("div",ke,[t(e(k),null,{default:l(()=>[t(e(T),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(A),{class:"text-sm font-medium"},{default:l(()=>[d(a(e(o)("employees.total_employees")),1)]),_:1}),t(i,{name:"Users",class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(V),null,{default:l(()=>[s("div",Ce,a(C.value.total),1),s("p",$e,a(C.value.activePercentage)+"% "+a(e(o)("employees.active")),1)]),_:1})]),_:1}),t(e(k),null,{default:l(()=>[t(e(T),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(A),{class:"text-sm font-medium"},{default:l(()=>[d(a(e(o)("employees.active_employees")),1)]),_:1}),t(i,{name:"CheckCircle",class:"h-4 w-4 text-green-600"})]),_:1}),t(e(V),null,{default:l(()=>[s("div",De,a(C.value.active),1),s("p",Ve,a(e(o)("employees.currently_employed")),1)]),_:1})]),_:1}),t(e(k),null,{default:l(()=>[t(e(T),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(A),{class:"text-sm font-medium"},{default:l(()=>[d(a(e(o)("employees.needing_attention")),1)]),_:1}),t(i,{name:"AlertTriangle",class:"h-4 w-4 text-orange-600"})]),_:1}),t(e(V),null,{default:l(()=>[s("div",je,a(C.value.needingAttention),1),s("p",Ue,a(e(o)("employees.documents_expiring")),1)]),_:1})]),_:1}),t(e(k),null,{default:l(()=>[t(e(T),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(A),{class:"text-sm font-medium"},{default:l(()=>[d(a(e(o)("employees.open_tickets")),1)]),_:1}),t(i,{name:"Ticket",class:"h-4 w-4 text-orange-600"})]),_:1}),t(e(V),null,{default:l(()=>[s("div",Se,a(C.value.totalTickets),1),s("p",Te,a(e(o)("employees.support_requests")),1)]),_:1})]),_:1})]),t(e(k),null,{default:l(()=>[t(e(V),{class:"pt-6"},{default:l(()=>[s("div",Ae,[s("div",Pe,[s("div",Be,[t(i,{name:"Search",class:"h-4 w-4 text-gray-400"})]),t(e(he),{modelValue:h.value,"onUpdate:modelValue":c[0]||(c[0]=r=>h.value=r),placeholder:e(o)("employees.search_placeholder"),class:"w-full pl-10 rtl:pl-3 rtl:pr-10"},null,8,["modelValue","placeholder"])]),s("div",ze,[G(s("select",{"onUpdate:modelValue":c[1]||(c[1]=r=>x.value=r),class:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s("option",Ee,a(e(o)("employees.all_statuses")),1),s("option",Fe,a(e(o)("employees.status_active")),1),s("option",Ne,a(e(o)("employees.status_inactive")),1),s("option",Me,a(e(o)("employees.status_terminated")),1)],512),[[H,x.value]]),G(s("select",{"onUpdate:modelValue":c[2]||(c[2]=r=>y.value=r),class:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s("option",Xe,a(e(o)("employees.all_departments")),1),(p(!0),g(N,null,J(le.value,r=>(p(),g("option",{key:r,value:r},a(r),9,qe))),128))],512),[[H,y.value]]),h.value||x.value||y.value?(p(),F(e(f),{key:0,variant:"ghost",onClick:ne},{default:l(()=>[t(i,{name:"X",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),d(" "+a(e(o)("common.clear")),1)]),_:1})):S("",!0)])])]),_:1})]),_:1}),m.value.length>0?(p(),g("div",Ie,[s("div",Le,[t(i,{name:"CheckCircle",class:"h-5 w-5 text-blue-600"}),s("span",Oe,a(e(o)("employees.selected_count",{count:m.value.length})),1)]),s("div",Ge,[t(e(Q),null,{default:l(()=>[t(e(R),{asChild:""},{default:l(()=>[t(e(f),{variant:"outline",size:"sm"},{default:l(()=>[t(i,{name:"MoreVertical",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),d(" "+a(e(o)("employees.bulk_actions")),1)]),_:1})]),_:1}),t(e(W),{align:"end"},{default:l(()=>[t(e(w),{onClick:c[3]||(c[3]=r=>B("activate"))},{default:l(()=>[t(i,{name:"CheckCircle",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),d(" "+a(e(o)("employees.activate")),1)]),_:1}),t(e(w),{onClick:c[4]||(c[4]=r=>B("deactivate"))},{default:l(()=>[t(i,{name:"Clock",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),d(" "+a(e(o)("employees.deactivate")),1)]),_:1}),t(e(w),{onClick:c[5]||(c[5]=r=>B("terminate")),class:"text-red-600"},{default:l(()=>[t(i,{name:"XCircle",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),d(" "+a(e(o)("employees.terminate")),1)]),_:1})]),_:1})]),_:1}),t(e(f),{variant:"ghost",size:"sm",onClick:c[6]||(c[6]=r=>m.value=[])},{default:l(()=>[t(i,{name:"X",class:"h-4 w-4"})]),_:1})])])):S("",!0),n.employees.data.length===0?(p(),g("div",He,[t(i,{name:"Users",class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s("h3",Je,a(e(o)("employees.no_employees")),1),s("p",Ke,a(h.value||x.value||y.value?e(o)("employees.no_employees_found"):e(o)("employees.create_first_employee")),1),!h.value&&!x.value&&!y.value?(p(),F(e(f),{key:0,asChild:""},{default:l(()=>[t(e(v),{href:n.route("employees.create")},{default:l(()=>[t(i,{name:"Plus",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),d(" "+a(e(o)("employees.create_employee")),1)]),_:1},8,["href"])]),_:1})):S("",!0)])):(p(),F(e(k),{key:2},{default:l(()=>[s("div",Qe,[s("table",Re,[s("thead",We,[s("tr",Ye,[s("th",Ze,[t(e(Y),{checked:P.value,"onUpdate:checked":oe},null,8,["checked"])]),s("th",et,a(e(o)("employees.employee")),1),s("th",tt,a(e(o)("employees.job_information")),1),s("th",st,a(e(o)("employees.contact")),1),s("th",at,a(e(o)("employees.status")),1),s("th",lt,a(e(o)("employees.metrics")),1),s("th",ot,a(e(o)("common.actions")),1)])]),s("tbody",rt,[(p(!0),g(N,null,J(n.employees.data,r=>{var b,j,$;return p(),g("tr",{key:r.id,class:K(["hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",{"bg-blue-50 dark:bg-blue-900/20":m.value.includes(r.id)}])},[s("td",nt,[t(e(Y),{checked:m.value.includes(r.id),"onUpdate:checked":()=>re(r.id)},null,8,["checked","onUpdate:checked"])]),s("td",it,[s("div",ct,[s("div",dt,[s("div",mt,[s("span",ut,a((((b=r.first_name)==null?void 0:b[0])||"")+(((j=r.last_name)==null?void 0:j[0])||"")),1)])]),s("div",_t,[s("div",pt,a(r.first_name)+" "+a(r.last_name),1),s("div",ft,a(r.employee_id),1)])])]),s("td",ht,[s("div",xt,a(r.job_title||"-"),1),s("div",yt,a(r.department||"-"),1),s("div",gt,a((($=r.company)==null?void 0:$.name_en)||"No Company"),1)]),s("td",vt,[s("div",wt,a(r.email),1),s("div",bt,a(r.phone||"-"),1)]),s("td",kt,[s("div",Ct,[t(i,{name:se(r.employment_status),class:K(`h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 ${r.employment_status==="active"?"text-green-600":r.employment_status==="inactive"?"text-yellow-600":r.employment_status==="terminated"?"text-red-600":"text-gray-500"}`)},null,8,["name","class"]),t(e(xe),{variant:te(r.employment_status)},{default:l(()=>[d(a(e(o)(`employees.status_${r.employment_status}`)),1)]),_:2},1032,["variant"])]),r.hire_date?(p(),g("div",$t,a(e(o)("employees.since"))+" "+a(ae(r.hire_date)),1)):S("",!0)]),s("td",Dt,[s("div",Vt,[s("div",jt,[t(i,{name:"Package",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 text-blue-600"}),s("span",null,a(r.assets_count||0)+" "+a(e(o)("employees.assets")),1)]),s("div",Ut,[t(i,{name:"Ticket",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 text-orange-600"}),s("span",null,a(r.reported_tickets_count||0)+" "+a(e(o)("employees.tickets")),1)])])]),s("td",St,[s("div",Tt,[t(e(f),{variant:"ghost",size:"sm",asChild:""},{default:l(()=>[t(e(v),{href:n.route("employees.show",r.id)},{default:l(()=>[t(i,{name:"Eye",class:"h-4 w-4"}),s("span",At,a(e(o)("common.view")),1)]),_:2},1032,["href"])]),_:2},1024),t(e(f),{variant:"ghost",size:"sm",asChild:""},{default:l(()=>[t(e(v),{href:n.route("employees.edit",r.id)},{default:l(()=>[t(i,{name:"Pencil",class:"h-4 w-4"}),s("span",Pt,a(e(o)("common.edit")),1)]),_:2},1032,["href"])]),_:2},1024),t(e(Q),null,{default:l(()=>[t(e(R),{asChild:""},{default:l(()=>[t(e(f),{variant:"ghost",size:"sm"},{default:l(()=>[t(i,{name:"MoreVertical",class:"h-4 w-4"}),s("span",Bt,a(e(o)("common.more_actions")),1)]),_:1})]),_:1}),t(e(W),{align:"end"},{default:l(()=>[t(e(w),{asChild:""},{default:l(()=>[t(e(v),{href:n.route("employees.show",r.id)},{default:l(()=>[t(i,{name:"Eye",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),d(" "+a(e(o)("common.view")),1)]),_:2},1032,["href"])]),_:2},1024),t(e(w),{asChild:""},{default:l(()=>[t(e(v),{href:n.route("employees.edit",r.id)},{default:l(()=>[t(i,{name:"Pencil",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),d(" "+a(e(o)("common.edit")),1)]),_:2},1032,["href"])]),_:2},1024),t(e(pe)),t(e(w),null,{default:l(()=>[t(i,{name:"Package",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),d(" "+a(e(o)("employees.assign_assets")),1)]),_:1}),t(e(w),null,{default:l(()=>[t(i,{name:"Mail",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),d(" "+a(e(o)("employees.send_email")),1)]),_:1})]),_:2},1024)]),_:2},1024)])])],2)}),128))])])])]),_:1}))])]),_:1},8,["breadcrumbs"])],64))}});export{ds as default};
