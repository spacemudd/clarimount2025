import{d as $e,u as Ae,q as D,c as Ce,I as Se,y as ue,E as De,a as m,o,b as n,e as r,h as je,w as d,f as s,m as b,s as V,g as f,t as i,p as M,i as h,F as z,r as E,v as O,n as Le,H as ze,z as Ue}from"./app-Bc8DJoIw.js";import{_ as Te}from"./AppLayout.vue_vue_type_script_setup_true_lang-aFPrXevK.js";import{_}from"./index-Bkfj5RZf.js";import{_ as Ee}from"./Input.vue_vue_type_script_setup_true_lang-BCgAtbv3.js";import{_ as I}from"./Badge.vue_vue_type_script_setup_true_lang-B_Y-C1Z5.js";import{_ as J,a as q,b as X,c as K,d as Z}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BtYiVWnk.js";import{_ as W}from"./DialogDescription.vue_vue_type_script_setup_true_lang-B9S0fN-X.js";import{_ as R}from"./Label.vue_vue_type_script_setup_true_lang-FOGXdOVU.js";import{_ as p}from"./Icon.vue_vue_type_script_setup_true_lang-HtpKbsmg.js";import{_ as Fe}from"./Heading.vue_vue_type_script_setup_true_lang-dikqi63b.js";import{P as Me}from"./PrintService-Il55q5dY.js";import"./useForwardExpose-Dfrpkcq5.js";import"./x-Bpbu-D7u.js";import"./building-CRGTLLXw.js";import"./users-DTM0PXos.js";import"./activity-B38cCwye.js";import"./arrow-left-DBs0UCva.js";import"./calendar-OVtV47JS.js";import"./chevron-down-BXdb6Pvf.js";import"./search-5g_YNHla.js";import"./eye-DvPHRpkD.js";import"./user-DNuaKltC.js";import"./loader-circle-CDtL2eBU.js";import"./sun-61JU-X1P.js";import"./play-BsEdzLls.js";import"./plus-4ZVyP4bZ.js";import"./square-pen-qZPIacBp.js";import"./trash-2-D0MYhPD-.js";import"./triangle-alert-C96xWEZ3.js";const Ne={class:"space-y-6"},Ve={class:"flex items-center justify-between my-2"},Oe={class:"flex flex-col sm:flex-row gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},Re={class:"flex-1 relative"},Be={class:"absolute inset-y-0 left-0 rtl:left-auto rtl:right-0 pl-3 rtl:pl-0 rtl:pr-3 flex items-center pointer-events-none"},He={value:""},Ie=["value"],Je={value:""},qe=["value"],Xe={key:0,class:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg mb-4"},Ke={class:"flex items-center gap-4"},Ze={class:"text-sm font-medium text-blue-900 dark:text-blue-100"},We={class:"flex items-center gap-2"},Ge={key:1,class:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},Qe={class:"text-sm text-blue-900 dark:text-blue-100"},Ye={key:0},et={key:1},tt={key:2,class:"text-center py-12"},st={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},at={class:"text-gray-600 dark:text-gray-400 mb-6"},rt={class:"flex justify-center gap-3"},nt={key:3,class:"bg-white dark:bg-gray-800 rounded-lg border overflow-hidden"},lt={class:"overflow-x-auto"},ot={class:"w-full"},it={class:"bg-gray-50 dark:bg-gray-700"},dt={class:"text-left rtl:text-right"},ut={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12"},ct=["checked"],mt={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},gt={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},pt={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ft={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},vt={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},_t={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},yt={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ht={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},bt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},wt={class:"px-6 py-4 whitespace-nowrap"},xt=["checked","onChange"],kt={class:"px-6 py-4 whitespace-nowrap"},Pt={class:"flex items-center"},$t={class:"flex-shrink-0 h-10 w-10"},At={key:0,class:"h-10 w-10 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600"},Ct=["src","alt","onError"],St={key:1,class:"h-10 w-10 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600"},Dt=["src","alt","onError"],jt={key:2,class:"h-10 w-10 rounded-lg bg-gray-300 dark:bg-gray-600 flex items-center justify-center"},Lt={class:"ml-4 rtl:ml-0 rtl:mr-4"},zt={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Ut={key:0,class:"text-xs text-gray-400 dark:text-gray-500"},Tt={class:"text-sm text-gray-500 dark:text-gray-400"},Et={class:"px-6 py-4 whitespace-nowrap"},Ft={class:"flex justify-center"},Mt=["src","alt"],Nt={key:1,class:"h-12 w-12 bg-gray-100 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 flex items-center justify-center"},Vt={class:"px-6 py-4 whitespace-nowrap"},Ot={class:"text-sm text-gray-900 dark:text-gray-100"},Rt={class:"text-sm text-gray-500 dark:text-gray-400"},Bt={class:"px-6 py-4 whitespace-nowrap"},Ht={class:"text-sm text-gray-900 dark:text-gray-100"},It={class:"text-sm text-gray-500 dark:text-gray-400"},Jt={class:"px-6 py-4 whitespace-nowrap"},qt={class:"text-sm text-gray-900 dark:text-gray-100"},Xt={class:"text-sm text-gray-500 dark:text-gray-400"},Kt={class:"px-6 py-4 whitespace-nowrap"},Zt={class:"px-6 py-4 whitespace-nowrap"},Wt={class:"px-6 py-4 whitespace-nowrap text-right rtl:text-left text-sm font-medium"},Gt={class:"flex justify-end rtl:justify-start gap-1"},Qt={key:4,class:"mt-6 flex items-center justify-between"},Yt={class:"text-sm text-gray-700 dark:text-gray-300"},es={class:"flex space-x-1"},ts={key:0,class:"mt-2 font-medium"},ss={key:1,class:"mt-2"},as={class:"font-medium mb-2"},rs={class:"max-h-32 overflow-y-auto bg-gray-50 dark:bg-gray-800 rounded p-2 text-sm"},ns={key:0,class:"text-gray-500 ml-2"},ls={class:"space-y-4"},os={class:"flex items-center space-x-2"},is={key:0,class:"space-y-2"},ds=["value"],us={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},cs={key:0,class:"mt-2 font-medium"},ms={class:"space-y-4"},gs={class:"space-y-2"},ps={class:"space-y-2"},fs={key:0,class:"text-center py-8"},vs={key:1,class:"text-center py-8"},_s={key:2,class:"overflow-x-auto"},ys={class:"w-full"},hs={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},bs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},ws={class:"px-6 py-4 whitespace-nowrap"},xs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},ks={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},Ps={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},$s={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},As={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Cs={class:"flex justify-end rtl:justify-start gap-1"},aa=$e({__name:"Index",props:{assets:{},categories:{},locations:{},filters:{}},setup(ce){var le,oe,ie;const{t:g}=Ae(),N=Me.getInstance(),F=ce,$=D(((le=F.filters)==null?void 0:le.search)||""),A=D(((oe=F.filters)==null?void 0:oe.category_id)||""),C=D(((ie=F.filters)==null?void 0:ie.location_id)||""),k=D(new Set),U=D(!1),G=D(new Set),Q=D(new Set),l=D({show:!1,printing:!1,useDefaultPrinter:!1,selectedPrinter:"",availablePrinters:[],status:"",currentAsset:null,selectedAssets:[]}),me=Ce(()=>[{title:g("nav.dashboard"),href:"/dashboard"},{title:g("nav.assets"),href:"/assets"}]),y=D({show:!1,asset:null,comment:"",priority:"normal",sending:!1}),ge=a=>{y.value.asset=a,y.value.comment="",y.value.priority="normal",y.value.show=!0},pe=async()=>{var a;if(y.value.asset){y.value.sending=!0;try{const t=await fetch("/api/print-jobs",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({asset_id:y.value.asset.id,priority:y.value.priority,comment:y.value.comment||null})});if(t.ok){const e=await t.json();alert(`Print job ${e.print_job.job_id} sent to print machine successfully!`),y.value.show=!1}else{const e=await t.json();alert(`Failed to send print job: ${e.error||"Unknown error"}`)}}catch(t){console.error("Failed to send print job:",t),alert("Failed to send print job. Please try again.")}finally{y.value.sending=!1}}},u=D({show:!1,asset:null,assignments:[],loading:!1,currentAction:null,uploadingDocument:!1,selectedAssignmentId:null}),Y=async a=>{u.value.asset=a,u.value.show=!0,u.value.loading=!0;try{const t=await fetch(`/api/assets/${a.id}/assignments`);if(t.ok){const e=await t.json();u.value.assignments=e.assignments||[]}else console.error("Failed to fetch assignments"),u.value.assignments=[]}catch(t){console.error("Error fetching assignments:",t),u.value.assignments=[]}finally{u.value.loading=!1}},ee=async(a,t)=>{var e;if(u.value.asset)try{u.value.currentAction=`printing_${t}_${a}`;const c=await fetch(`/api/assets/${u.value.asset.id}/assignments/${a}/print-document`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((e=document.querySelector('meta[name="csrf-token"]'))==null?void 0:e.getAttribute("content"))||""},body:JSON.stringify({type:t,asset_id:u.value.asset.id,assignment_id:a})});if(c.ok){const v=await c.blob(),w=window.URL.createObjectURL(v),P=document.createElement("a");P.href=w,P.download=`${t}_document_${u.value.asset.asset_tag}_${a}.html`,document.body.appendChild(P),P.click(),window.URL.revokeObjectURL(w),document.body.removeChild(P);const x=window.open(w,"_blank");x&&(x.onload=()=>{x.print()})}else{const v=await c.json();alert(`Failed to generate document: ${v.error||"Unknown error"}`)}}catch(c){console.error("Error printing document:",c),alert("Failed to generate document. Please try again.")}finally{u.value.currentAction=null}},te=async(a,t)=>{const e=document.createElement("input");e.type="file",e.accept=".pdf,.jpg,.jpeg,.png,.gif",e.multiple=!1,e.onchange=async c=>{var P,x,j;const v=(P=c.target.files)==null?void 0:P[0];if(!v)return;if(v.size>5*1024*1024){alert("File size must be less than 5MB");return}const w=new FormData;w.append("document",v),w.append("type",t),w.append("assignment_id",a.toString());try{u.value.uploadingDocument=!0,u.value.currentAction=`uploading_${t}_${a}`;const S=await fetch(`/api/assets/${(x=u.value.asset)==null?void 0:x.id}/assignments/${a}/upload-document`,{method:"POST",headers:{"X-CSRF-TOKEN":((j=document.querySelector('meta[name="csrf-token"]'))==null?void 0:j.getAttribute("content"))||""},body:w});if(S.ok){const L=await S.json();alert("Document uploaded successfully!"),await Y(u.value.asset)}else{const L=await S.json();alert(`Failed to upload document: ${L.error||"Unknown error"}`)}}catch(S){console.error("Error uploading document:",S),alert("Failed to upload document. Please try again.")}finally{u.value.uploadingDocument=!1,u.value.currentAction=null}},e.click()},fe=async(a,t)=>{var e,c;try{const v=await fetch(`/api/assets/${(e=u.value.asset)==null?void 0:e.id}/assignments/${a}/download-document?type=${t}`);if(v.ok){const w=await v.blob(),P=window.URL.createObjectURL(w),x=document.createElement("a");x.href=P;const j=v.headers.get("content-disposition");let S=`${t}_document_${(c=u.value.asset)==null?void 0:c.asset_tag}_${a}`;if(j){const L=j.match(/filename="(.+)"/);L&&(S=L[1])}x.download=S,document.body.appendChild(x),x.click(),window.URL.revokeObjectURL(P),document.body.removeChild(x)}else alert("Document not found or failed to download")}catch(v){console.error("Error downloading document:",v),alert("Failed to download document. Please try again.")}},se=a=>a?new Date(a).toLocaleDateString():"â€”",ae=a=>{switch(a){case"available":return"default";case"assigned":return"secondary";case"maintenance":return"destructive";case"retired":return"outline";case"active":return"default";case"returned":return"secondary";case"lost":return"destructive";case"damaged":return"destructive";default:return"outline"}};let re;Se([$,A,C],()=>{clearTimeout(re),re=window.setTimeout(()=>{ue.get("/assets",{search:$.value||void 0,category_id:A.value||void 0,location_id:C.value||void 0},{preserveState:!0,replace:!0})},300)});const B=()=>{$.value="",A.value="",C.value=""},ve=a=>{a&&ue.get(a,{},{preserveState:!0})},_e=(a,t)=>{G.value.add(t.id)},ye=(a,t)=>{Q.value.add(t.id)},he=a=>{if(console.log("Print service status:",a),l.value.status=a.status,a.isConnected&&a.availablePrinters.length>0&&(l.value.availablePrinters=a.availablePrinters,!l.value.selectedPrinter)){const t=a.availablePrinters.find(e=>e.toLowerCase().includes("zdesigner"));t?(l.value.selectedPrinter=t,console.log("Auto-selected ZDesigner printer via callback:",t)):a.availablePrinters.length>0&&(l.value.selectedPrinter=a.availablePrinters[0],console.log("Auto-selected first available printer via callback:",a.availablePrinters[0]))}},be=a=>{k.value.has(a)?k.value.delete(a):k.value.add(a),ne()},we=()=>{U.value?k.value.clear():F.assets.data.forEach(a=>{k.value.add(a.id)}),U.value=!U.value},ne=()=>{const a=F.assets.data.length,t=k.value.size;U.value=a>0&&t===a},xe=()=>F.assets.data.filter(a=>k.value.has(a.id)),H=async a=>{a?(l.value.currentAsset=a,l.value.selectedAssets=[a]):(l.value.currentAsset=null,l.value.selectedAssets=xe()),l.value.show=!0,N.onStatusChange(he),await ke()},ke=async(a=3,t=2e3)=>{for(let e=1;e<=a;e++)try{console.log(`Printer initialization attempt ${e}/${a}...`),l.value.status=`Connecting to JSPrintManager (attempt ${e}/${a})...`,e>1&&await new Promise(v=>setTimeout(v,t)),await N.initializeJSPrintManager();const c=await N.getAvailablePrinters();if(console.log(`Attempt ${e}: Found ${c.length} printers:`,c),c.length>0){if(l.value.availablePrinters=c,!l.value.selectedPrinter){const v=c.find(w=>w.toLowerCase().includes("zdesigner"));v?(l.value.selectedPrinter=v,console.log("Auto-selected ZDesigner printer:",v)):c.length>0&&(l.value.selectedPrinter=c[0],console.log("Auto-selected first available printer:",c[0]))}l.value.status=`Connected! Found ${c.length} printer(s)`,console.log("Printer initialization successful!");return}else e<a?(console.log(`Attempt ${e}: No printers found, retrying...`),l.value.status=`No printers found, retrying in ${t/1e3} seconds...`):(console.log("No printers found after all attempts"),l.value.status="Connected to JSPrintManager but no printers found")}catch(c){console.error(`Printer initialization attempt ${e} failed:`,c),e<a?l.value.status=`Connection failed, retrying in ${t/1e3} seconds... (${e}/${a})`:l.value.status="Failed to connect to JSPrintManager: "+(c instanceof Error?c.message:String(c))}};De(async()=>{if(new URLSearchParams(window.location.search).get("show_bulk_print")==="true")try{const t=await fetch("/api/assets/bulk-created");if(t.ok){const e=await t.json();if(e.length>0){e.forEach(v=>{k.value.add(v.id)}),ne(),await H();const c=window.location.pathname;window.history.replaceState({},"",c)}}}catch(t){console.error("Failed to fetch bulk created assets:",t)}});const Pe=async()=>{const a=l.value.selectedAssets;if(!(!a||a.length===0)){console.log("Print settings:",{useDefaultPrinter:l.value.useDefaultPrinter,selectedPrinter:l.value.selectedPrinter,availablePrinters:l.value.availablePrinters}),l.value.printing=!0,l.value.status=`Printing ${a.length} label(s)...`;try{a.length===1?await N.printAssetLabel(a[0],l.value.useDefaultPrinter,l.value.selectedPrinter):await N.printMultipleAssetLabels(a,l.value.useDefaultPrinter,l.value.selectedPrinter),l.value.status=`${a.length} label(s) sent to printer successfully!`,setTimeout(()=>{l.value.show=!1,l.value.printing=!1,k.value.clear(),U.value=!1},2e3)}catch(t){console.error("Print error:",t),l.value.status="Error occurred while printing: "+(t instanceof Error?t.message:String(t)),l.value.printing=!1}}};return(a,t)=>(o(),m(z,null,[n(r(je),{title:r(g)("assets.title")},null,8,["title"]),n(Te,{breadcrumbs:me.value},{default:d(()=>[s("div",Ne,[s("div",Ve,[n(Fe,{title:r(g)("assets.title")},null,8,["title"]),n(r(_),{asChild:""},{default:d(()=>[n(r(V),{href:a.route("assets.create")},{default:d(()=>[n(p,{name:"Plus",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),f(" "+i(r(g)("assets.create_asset")),1)]),_:1},8,["href"])]),_:1})]),s("div",Oe,[s("div",Re,[s("div",Be,[n(p,{name:"Search",class:"h-4 w-4 text-gray-400"})]),n(r(Ee),{modelValue:$.value,"onUpdate:modelValue":t[0]||(t[0]=e=>$.value=e),placeholder:r(g)("assets.search_placeholder"),class:"w-full pl-10 rtl:pl-3 rtl:pr-10"},null,8,["modelValue","placeholder"])]),M(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>A.value=e),class:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s("option",He,i(r(g)("assets.filter_by_category")),1),(o(!0),m(z,null,E(a.categories,e=>(o(),m("option",{key:e.id,value:e.id},i(e.name),9,Ie))),128))],512),[[O,A.value]]),M(s("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>C.value=e),class:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s("option",Je,i(r(g)("assets.filter_by_location")),1),(o(!0),m(z,null,E(a.locations,e=>(o(),m("option",{key:e.id,value:e.id},i(`${e.code}: ${e.name}`),9,qe))),128))],512),[[O,C.value]]),$.value||A.value||C.value?(o(),h(r(_),{key:0,variant:"ghost",onClick:B},{default:d(()=>[n(p,{name:"X",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),f(" "+i(r(g)("common.clear")),1)]),_:1})):b("",!0),$.value||A.value||C.value?(o(),h(r(_),{key:1,variant:"outline",onClick:B},{default:d(()=>[n(p,{name:"RefreshCw",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),f(" "+i(r(g)("common.clear_all_filters")),1)]),_:1})):b("",!0)]),k.value.size>0?(o(),m("div",Xe,[s("div",Ke,[s("span",Ze,i(k.value.size)+" asset(s) selected ",1),n(r(_),{variant:"outline",size:"sm",onClick:t[3]||(t[3]=e=>{k.value.clear(),U.value=!1})},{default:d(()=>t[15]||(t[15]=[f(" Clear Selection ",-1)])),_:1,__:[15]})]),s("div",We,[n(r(_),{onClick:t[4]||(t[4]=e=>H()),class:"bg-blue-600 hover:bg-blue-700"},{default:d(()=>[n(p,{name:"Printer",class:"h-4 w-4 mr-2"}),f(" Print "+i(k.value.size)+" Label(s) ",1)]),_:1})])])):b("",!0),$.value||A.value||C.value?(o(),m("div",Ge,[s("div",Qe,[a.assets.data.length>0?(o(),m("span",Ye,i(r(g)("assets.pagination_info",{from:a.assets.from,to:a.assets.to,total:a.assets.total})),1)):(o(),m("span",et,i(r(g)("assets.no_assets_found")),1))])])):b("",!0),a.assets.data.length===0?(o(),m("div",tt,[n(p,{name:"HardDrive",class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s("h3",st,i($.value||A.value||C.value?r(g)("assets.no_assets_found"):r(g)("assets.no_assets")),1),s("p",at,i($.value||A.value||C.value?r(g)("assets.try_adjusting_search"):r(g)("assets.create_first_asset")),1),s("div",rt,[!$.value&&!A.value&&!C.value?(o(),h(r(_),{key:0,asChild:""},{default:d(()=>[n(r(V),{href:a.route("assets.create")},{default:d(()=>[n(p,{name:"Plus",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),f(" "+i(r(g)("assets.create_asset")),1)]),_:1},8,["href"])]),_:1})):b("",!0),$.value||A.value||C.value?(o(),h(r(_),{key:1,variant:"outline",onClick:B},{default:d(()=>[n(p,{name:"RefreshCw",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),f(" "+i(r(g)("common.clear_all_filters")),1)]),_:1})):b("",!0)])])):(o(),m("div",nt,[s("div",lt,[s("table",ot,[s("thead",it,[s("tr",dt,[s("th",ut,[s("input",{type:"checkbox",checked:U.value,onChange:we,class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,40,ct)]),s("th",mt,i(r(g)("assets.asset")),1),s("th",gt,i(r(g)("assets.template_image")),1),s("th",pt,i(r(g)("assets.company")),1),s("th",ft,i(r(g)("assets.category")),1),s("th",vt,i(r(g)("assets.location")),1),s("th",_t,i(r(g)("assets.condition")),1),s("th",yt,i(r(g)("assets.status")),1),s("th",ht,i(r(g)("common.actions")),1)])]),s("tbody",bt,[(o(!0),m(z,null,E(a.assets.data,e=>{var c,v,w,P,x,j,S,L,de;return o(),m("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[s("td",wt,[s("input",{type:"checkbox",checked:k.value.has(e.id),onChange:T=>be(e.id),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,40,xt)]),s("td",kt,[s("div",Pt,[s("div",$t,[e.image_path&&!G.value.has(e.id)?(o(),m("div",At,[s("img",{src:`/storage/${e.image_path}`,alt:e.asset_tag,class:"h-full w-full object-cover",onError:T=>_e(T,e)},null,40,Ct)])):(c=e.asset_template)!=null&&c.image_path&&!Q.value.has(e.id)?(o(),m("div",St,[s("img",{src:`/storage/${e.asset_template.image_path}`,alt:e.asset_template.name||"Template",class:"h-full w-full object-cover",onError:T=>ye(T,e)},null,40,Dt)])):(o(),m("div",jt,[n(p,{name:"HardDrive",class:"h-5 w-5 text-gray-700 dark:text-gray-300"})]))]),s("div",Lt,[s("div",zt,i(e.asset_tag),1),(v=e.asset_template)!=null&&v.name?(o(),m("div",Ut,i(e.asset_template.name),1)):b("",!0),s("div",Tt,i(e.model_name||e.serial_number||"-"),1)])])]),s("td",Et,[s("div",Ft,[(w=e.asset_template)!=null&&w.image_path?(o(),m("img",{key:0,src:`/storage/${e.asset_template.image_path}`,alt:e.asset_template.name||"Template",class:"h-12 w-12 object-cover rounded-lg border border-gray-200 dark:border-gray-600"},null,8,Mt)):(o(),m("div",Nt,[n(p,{name:"Image",class:"h-5 w-5 text-gray-400"})]))])]),s("td",Vt,[s("div",Ot,i(((P=e.company)==null?void 0:P.name_en)||"-"),1),s("div",Rt,i(((x=e.company)==null?void 0:x.slug)||"-"),1)]),s("td",Bt,[s("div",Ht,i(((j=e.category)==null?void 0:j.name)||"-"),1),s("div",It,i(((S=e.category)==null?void 0:S.code)||"-"),1)]),s("td",Jt,[s("div",qt,i(((L=e.location)==null?void 0:L.name)||"-"),1),s("div",Xt,i(((de=e.location)==null?void 0:de.code)||"-"),1)]),s("td",Kt,[n(r(I),{variant:e.condition==="good"?"default":"destructive"},{default:d(()=>[f(i(r(g)(`assets.condition_${e.condition}`)),1)]),_:2},1032,["variant"])]),s("td",Zt,[n(r(I),{variant:ae(e.status)},{default:d(()=>[f(i(r(g)(`assets.status_${e.status}`)),1)]),_:2},1032,["variant"])]),s("td",Wt,[s("div",Gt,[n(r(_),{variant:"ghost",size:"sm",onClick:T=>H(e),title:"Print Label"},{default:d(()=>[n(p,{name:"Printer",class:"h-4 w-4"})]),_:2},1032,["onClick"]),n(r(_),{variant:"ghost",size:"sm",onClick:T=>ge(e),title:"Send to Print Machine"},{default:d(()=>[n(p,{name:"Send",class:"h-4 w-4"})]),_:2},1032,["onClick"]),n(r(_),{variant:"ghost",size:"sm",onClick:T=>Y(e),title:"Assignment Info"},{default:d(()=>[n(p,{name:"Info",class:"h-4 w-4"})]),_:2},1032,["onClick"]),n(r(_),{variant:"ghost",size:"sm",asChild:"",title:"View"},{default:d(()=>[n(r(V),{href:a.route("assets.show",e.id)},{default:d(()=>[n(p,{name:"Eye",class:"h-4 w-4"})]),_:2},1032,["href"])]),_:2},1024),n(r(_),{variant:"ghost",size:"sm",asChild:"",title:"Edit"},{default:d(()=>[n(r(V),{href:a.route("assets.edit",e.id)},{default:d(()=>[n(p,{name:"Pencil",class:"h-4 w-4"})]),_:2},1032,["href"])]),_:2},1024)])])])}),128))])])])])),a.assets.last_page>1?(o(),m("div",Qt,[s("div",Yt,i(r(g)("messages.showing"))+" "+i(a.assets.from)+"-"+i(a.assets.to)+" "+i(r(g)("messages.of"))+" "+i(a.assets.total),1),s("div",es,[(o(!0),m(z,null,E(a.assets.links,e=>(o(),h(r(_),{key:e.label,variant:"ghost",size:"sm",disabled:!e.url,class:Le({"bg-blue-50 text-blue-700 dark:bg-blue-900 dark:text-blue-300":e.active}),onClick:c=>ve(e.url),innerHTML:e.label},null,8,["disabled","class","onClick","innerHTML"]))),128))])])):b("",!0)]),n(r(J),{open:l.value.show,"onUpdate:open":t[8]||(t[8]=e=>l.value.show=e)},{default:d(()=>[n(r(q),{class:"sm:max-w-md"},{default:d(()=>[n(r(X),null,{default:d(()=>[n(r(K),null,{default:d(()=>t[16]||(t[16]=[f("Print Barcode Label",-1)])),_:1,__:[16]}),n(r(W),null,{default:d(()=>[t[17]||(t[17]=f(" Configure printer settings for the Zebra label printer. ",-1)),l.value.selectedAssets.length===1?(o(),m("div",ts," Asset: "+i(l.value.selectedAssets[0].asset_tag),1)):l.value.selectedAssets.length>1?(o(),m("div",ss,[s("div",as," Printing "+i(l.value.selectedAssets.length)+" assets: ",1),s("div",rs,[(o(!0),m(z,null,E(l.value.selectedAssets,e=>(o(),m("div",{key:e.id,class:"py-1"},[f(i(e.asset_tag)+" ",1),e.serial_number?(o(),m("span",ns,"("+i(e.serial_number)+")",1)):b("",!0)]))),128))])])):b("",!0)]),_:1,__:[17]})]),_:1}),s("div",ls,[s("div",os,[M(s("input",{type:"checkbox",id:"useDefaultPrinter","onUpdate:modelValue":t[5]||(t[5]=e=>l.value.useDefaultPrinter=e),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[ze,l.value.useDefaultPrinter]]),n(r(R),{for:"useDefaultPrinter",class:"font-medium"},{default:d(()=>t[18]||(t[18]=[f(" Print to Default printer ",-1)])),_:1,__:[18]})]),l.value.useDefaultPrinter?b("",!0):(o(),m("div",is,[n(r(R),{for:"installedPrinterName"},{default:d(()=>t[19]||(t[19]=[f("Select an installed Printer:",-1)])),_:1,__:[19]}),M(s("select",{id:"installedPrinterName","onUpdate:modelValue":t[6]||(t[6]=e=>l.value.selectedPrinter=e),class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"},[t[20]||(t[20]=s("option",{value:""},"Select a printer...",-1)),(o(!0),m(z,null,E(l.value.availablePrinters,e=>(o(),m("option",{key:e,value:e},i(e),9,ds))),128))],512),[[O,l.value.selectedPrinter]])])),l.value.status?(o(),m("div",us," Status: "+i(l.value.status),1)):b("",!0)]),n(r(Z),null,{default:d(()=>[n(r(_),{variant:"outline",onClick:t[7]||(t[7]=e=>l.value.show=!1)},{default:d(()=>t[21]||(t[21]=[f(" Cancel ",-1)])),_:1,__:[21]}),n(r(_),{onClick:Pe,disabled:l.value.printing||!l.value.useDefaultPrinter&&!l.value.selectedPrinter},{default:d(()=>[l.value.printing?(o(),h(p,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 animate-spin"})):b("",!0),f(" Print "+i(l.value.selectedAssets.length>1?`${l.value.selectedAssets.length} Labels`:"Label"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),n(r(J),{open:y.value.show,"onUpdate:open":t[12]||(t[12]=e=>y.value.show=e)},{default:d(()=>[n(r(q),{class:"sm:max-w-md"},{default:d(()=>[n(r(X),null,{default:d(()=>[n(r(K),null,{default:d(()=>t[22]||(t[22]=[f("Send to Print Machine",-1)])),_:1,__:[22]}),n(r(W),null,{default:d(()=>[t[23]||(t[23]=f(" Send this asset to the print station queue. ",-1)),y.value.asset?(o(),m("div",cs," Asset: "+i(y.value.asset.asset_tag),1)):b("",!0)]),_:1,__:[23]})]),_:1}),s("div",ms,[s("div",gs,[n(r(R),{for:"priority"},{default:d(()=>t[24]||(t[24]=[f("Priority",-1)])),_:1,__:[24]}),M(s("select",{id:"priority","onUpdate:modelValue":t[9]||(t[9]=e=>y.value.priority=e),class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"},t[25]||(t[25]=[s("option",{value:"low"},"Low",-1),s("option",{value:"normal"},"Normal",-1),s("option",{value:"high"},"High",-1),s("option",{value:"urgent"},"Urgent",-1)]),512),[[O,y.value.priority]])]),s("div",ps,[n(r(R),{for:"comment"},{default:d(()=>t[26]||(t[26]=[f("Comment (Optional)",-1)])),_:1,__:[26]}),M(s("textarea",{id:"comment","onUpdate:modelValue":t[10]||(t[10]=e=>y.value.comment=e),class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",rows:"3",placeholder:"Add a comment for the print station operator..."},null,512),[[Ue,y.value.comment]])])]),n(r(Z),null,{default:d(()=>[n(r(_),{variant:"outline",onClick:t[11]||(t[11]=e=>y.value.show=!1)},{default:d(()=>t[27]||(t[27]=[f(" Cancel ",-1)])),_:1,__:[27]}),n(r(_),{onClick:pe,disabled:y.value.sending},{default:d(()=>[y.value.sending?(o(),h(p,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 animate-spin"})):b("",!0),t[28]||(t[28]=f(" Send to Print Machine ",-1))]),_:1,__:[28]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),n(r(J),{open:u.value.show,"onUpdate:open":t[14]||(t[14]=e=>u.value.show=e)},{default:d(()=>[n(r(q),{class:"sm:max-w-2xl"},{default:d(()=>[n(r(X),null,{default:d(()=>[n(r(K),null,{default:d(()=>{var e;return[f("Assignment History for "+i((e=u.value.asset)==null?void 0:e.asset_tag),1)]}),_:1}),n(r(W),null,{default:d(()=>t[29]||(t[29]=[f(" View and manage the assignment history for this asset. ",-1)])),_:1,__:[29]})]),_:1}),u.value.loading?(o(),m("div",fs,[n(p,{name:"Loader2",class:"mx-auto h-12 w-12 text-blue-500 animate-spin"}),t[30]||(t[30]=s("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"Loading assignments...",-1))])):u.value.assignments.length===0?(o(),m("div",vs,[n(p,{name:"Info",class:"mx-auto h-12 w-12 text-gray-400"}),t[31]||(t[31]=s("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"No assignment history found for this asset.",-1))])):(o(),m("div",_s,[s("table",ys,[t[32]||(t[32]=s("thead",{class:"bg-gray-50 dark:bg-gray-700"},[s("tr",{class:"text-left rtl:text-right"},[s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Assignment ID "),s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Status "),s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Assigned To "),s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Assigned By "),s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Assigned Date "),s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Returned Date "),s("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ")])],-1)),s("tbody",hs,[(o(!0),m(z,null,E(u.value.assignments,e=>(o(),m("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[s("td",bs,i(e.id),1),s("td",ws,[n(r(I),{variant:ae(e.status)},{default:d(()=>[f(i(e.status),1)]),_:2},1032,["variant"])]),s("td",xs,i(e.assigned_to_name),1),s("td",ks,i(e.assigned_by_name),1),s("td",Ps,i(se(e.assigned_date)),1),s("td",$s,i(se(e.returned_date)),1),s("td",As,[s("div",Cs,[n(r(_),{variant:"ghost",size:"sm",onClick:c=>ee(e.id,"assignment"),disabled:u.value.currentAction===`printing_assignment_${e.id}`,title:"Print Assignment Document"},{default:d(()=>[u.value.currentAction===`printing_assignment_${e.id}`?(o(),h(p,{key:0,name:"Loader2",class:"h-4 w-4 animate-spin"})):(o(),h(p,{key:1,name:"Printer",class:"h-4 w-4"}))]),_:2},1032,["onClick","disabled"]),n(r(_),{variant:"ghost",size:"sm",onClick:c=>te(e.id,"assignment"),disabled:u.value.currentAction===`uploading_assignment_${e.id}`,title:"Upload Signed Assignment Document"},{default:d(()=>[u.value.currentAction===`uploading_assignment_${e.id}`?(o(),h(p,{key:0,name:"Loader2",class:"h-4 w-4 animate-spin"})):(o(),h(p,{key:1,name:"Upload",class:"h-4 w-4"}))]),_:2},1032,["onClick","disabled"]),n(r(_),{variant:"ghost",size:"sm",onClick:c=>fe(e.id,"assignment"),disabled:u.value.currentAction===`downloading_assignment_${e.id}`,title:"Download Signed Assignment Document"},{default:d(()=>[u.value.currentAction===`downloading_assignment_${e.id}`?(o(),h(p,{key:0,name:"Loader2",class:"h-4 w-4 animate-spin"})):(o(),h(p,{key:1,name:"Download",class:"h-4 w-4"}))]),_:2},1032,["onClick","disabled"]),e.status==="returned"?(o(),h(r(_),{key:0,variant:"ghost",size:"sm",onClick:c=>ee(e.id,"return"),disabled:u.value.currentAction===`printing_return_${e.id}`,title:"Print Return Document"},{default:d(()=>[u.value.currentAction===`printing_return_${e.id}`?(o(),h(p,{key:0,name:"Loader2",class:"h-4 w-4 animate-spin"})):(o(),h(p,{key:1,name:"FileText",class:"h-4 w-4"}))]),_:2},1032,["onClick","disabled"])):b("",!0),e.status==="returned"?(o(),h(r(_),{key:1,variant:"ghost",size:"sm",onClick:c=>te(e.id,"return"),disabled:u.value.currentAction===`uploading_return_${e.id}`,title:"Upload Signed Return Document"},{default:d(()=>[u.value.currentAction===`uploading_return_${e.id}`?(o(),h(p,{key:0,name:"Loader2",class:"h-4 w-4 animate-spin"})):(o(),h(p,{key:1,name:"Upload",class:"h-4 w-4"}))]),_:2},1032,["onClick","disabled"])):b("",!0)])])]))),128))])])])),n(r(Z),null,{default:d(()=>[n(r(_),{variant:"outline",onClick:t[13]||(t[13]=e=>u.value.show=!1)},{default:d(()=>t[33]||(t[33]=[f(" Close ",-1)])),_:1,__:[33]})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["breadcrumbs"])],64))}});export{aa as default};
