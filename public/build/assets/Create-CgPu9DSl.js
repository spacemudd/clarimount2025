import{d as Xt,u as Nt,D as Qt,q as v,k as Re,c as tt,E as Ht,a as c,o as i,b as n,e,h as Wt,w as m,f as t,t as s,F as U,r as L,m as _,n as S,g as u,p as R,G as je,l as be,v as oe,i as re,H as st,z as Jt,s as Gt,y as at}from"./app-BsrQluE7.js";import{_ as Kt}from"./AppLayout.vue_vue_type_script_setup_true_lang-DYxsl2Vm.js";import{_ as T}from"./index-DXwipYmk.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-DjjetpBc.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-gTLwDzNy.js";import{_ as Yt,a as Zt}from"./CardContent.vue_vue_type_script_setup_true_lang-BTP2EwUO.js";import{_ as es}from"./CardDescription.vue_vue_type_script_setup_true_lang-BncbW0bP.js";import{_ as ts,a as ss}from"./CardTitle.vue_vue_type_script_setup_true_lang-BS-88zfX.js";import{_ as qe,a as Ie,b as Fe,c as Pe,d as ot}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Cg2Yovgt.js";import{_ as Ee}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CaNhPuzK.js";import{_ as rt}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DPXlLRZl.js";import{_ as h}from"./Icon.vue_vue_type_script_setup_true_lang-FTwrbxhA.js";import{_ as as}from"./Heading.vue_vue_type_script_setup_true_lang-avGOoF9B.js";import{B as lt}from"./BarcodeScanner-D6yfRwtB.js";import"./useForwardExpose-Dcp-Rwko.js";import"./x-Zo3Xi07k.js";import"./building-CXOTQDkb.js";import"./users-sXr6Kbbq.js";import"./activity-CmoQtLGR.js";import"./arrow-left-BHHo3ORV.js";import"./calendar-CH2HTlsU.js";import"./chevron-down-BfBVM1--.js";import"./search-DtTpQdsd.js";import"./eye-r8IZoAC6.js";import"./user-BV7X7z67.js";import"./loader-circle-CMeek4Fk.js";import"./sun-I3nfIhRI.js";import"./play-23vqQzKv.js";import"./plus-tuzpRu6G.js";import"./square-pen-CbQiRukO.js";import"./trash-2-JWCEsxhm.js";import"./triangle-alert-DzhzJCCV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const os={class:"max-w-4xl mx-auto"},rs={class:"mb-8"},ls={class:"text-gray-600 dark:text-gray-400 mt-2"},ns={class:"flex items-center justify-center mb-8"},is={class:"flex items-center"},ds={key:0,class:"space-y-6"},cs={class:"space-y-3"},us={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},ms={class:"relative"},_s={for:"creation_mode_single",class:"flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 peer-checked:border-primary peer-checked:bg-primary/5 dark:border-gray-700 dark:hover:bg-gray-800 dark:peer-checked:bg-primary/10"},ps={class:"font-medium text-sm"},gs={class:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1"},ys={class:"relative"},fs={for:"creation_mode_bulk",class:"flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 peer-checked:border-primary peer-checked:bg-primary/5 dark:border-gray-700 dark:hover:bg-gray-800 dark:peer-checked:bg-primary/10"},vs={class:"font-medium text-sm"},bs={class:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1"},hs={class:"relative"},ks={for:"creation_mode_workstation",class:"flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 peer-checked:border-primary peer-checked:bg-primary/5 dark:border-gray-700 dark:hover:bg-gray-800 dark:peer-checked:bg-primary/10"},xs={class:"font-medium text-sm"},ws={class:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1"},Ss={key:0,class:"space-y-2"},Cs={class:"flex gap-2"},Vs={class:"flex-1 relative"},Us={class:"relative"},Ts={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},$s={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},Ls=["onClick"],Rs={class:"font-medium text-sm"},js={class:"text-xs text-gray-500 dark:text-gray-400"},qs={key:0},Is={key:1,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg px-3 py-2"},Fs={class:"text-sm text-gray-500 dark:text-gray-400"},Ps={class:"space-y-2"},Es=["disabled"],Ds={value:""},Bs=["value"],zs={key:0,class:"text-sm text-red-600 dark:text-red-400"},Ms={class:"grid grid-cols-2 gap-4"},Os={class:"space-y-2"},As={class:"space-y-2"},Xs={class:"text-sm text-muted-foreground"},Ns={class:"grid grid-cols-2 gap-4"},Qs={class:"space-y-2"},Hs={class:"space-y-2"},Ws={class:"space-y-2"},Js={class:"grid grid-cols-2 gap-4"},Gs={class:"space-y-2"},Ks={class:"space-y-2"},Ys={class:"grid grid-cols-2 gap-4"},Zs={class:"space-y-2"},ea={class:"space-y-2"},ta={key:0,class:"text-sm text-red-600 dark:text-red-400"},sa={key:1,class:"text-sm text-blue-600 dark:text-blue-400 flex items-center gap-1"},aa={key:1,class:"space-y-4"},oa={class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"},ra={class:"flex items-start"},la={class:"font-medium text-blue-900 dark:text-blue-100"},na={class:"text-sm text-blue-700 dark:text-blue-300 mt-1"},ia={class:"space-y-2"},da={class:"relative"},ca={value:""},ua=["value"],ma={class:"text-sm text-muted-foreground"},_a={key:0,class:"text-sm text-red-600 dark:text-red-400"},pa={class:"space-y-2"},ga={class:"text-sm text-muted-foreground"},ya={key:0,class:"text-sm text-red-600 dark:text-red-400"},fa={class:"grid grid-cols-2 gap-4"},va={class:"space-y-2"},ba={key:0,class:"text-sm text-red-600 dark:text-red-400"},ha={class:"space-y-2"},ka={key:0,class:"text-sm text-red-600 dark:text-red-400"},xa={key:0,class:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},wa={class:"font-medium text-sm mb-2"},Sa={class:"text-sm text-gray-600 dark:text-gray-400"},Ca={key:1,class:"space-y-6"},Va={class:"space-y-2"},Ua={class:"flex gap-2"},Ta={class:"flex-1 relative"},$a={class:"relative"},La={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},Ra={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},ja=["onClick"],qa={class:"font-medium text-sm"},Ia={class:"text-xs text-gray-500 dark:text-gray-400"},Fa={key:0},Pa={key:1},Ea={key:2},Da={key:3},Ba={key:1,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg px-3 py-2"},za={class:"text-sm text-gray-500 dark:text-gray-400"},Ma={class:"space-y-2"},Oa={class:"grid grid-cols-2 gap-4"},Aa={class:"space-y-2"},Xa={class:"space-y-2"},Na={class:"space-y-2"},Qa={class:"space-y-2"},Ha={value:""},Wa=["value"],Ja={key:0,class:"text-sm text-red-600 dark:text-red-400"},Ga={class:"space-y-2"},Ka={value:""},Ya=["value"],Za={key:0,class:"text-sm text-red-600 dark:text-red-400"},eo={class:"flex items-center space-x-2"},to={class:"text-sm text-muted-foreground"},so={class:"space-y-4"},ao={class:"flex items-center justify-center w-full"},oo={key:0,class:"flex flex-col items-center justify-center pt-5 pb-6"},ro={class:"text-sm text-gray-500 dark:text-gray-400"},lo={class:"font-semibold"},no={key:1,class:"relative w-full h-full"},io=["src"],co={class:"flex gap-2"},uo={key:0,class:"text-sm text-red-600 dark:text-red-400"},mo={class:"text-sm text-muted-foreground"},_o={key:0,class:"text-sm text-red-600 dark:text-red-400"},po={class:"space-y-2"},go={class:"flex gap-2"},yo={class:"text-sm text-muted-foreground"},fo={key:0,class:"text-sm text-red-600 dark:text-red-400"},vo={class:"space-y-2"},bo={value:"good"},ho={value:"damaged"},ko={key:0,class:"text-sm text-red-600 dark:text-red-400"},xo={key:0,class:"space-y-2"},wo={class:"text-sm text-muted-foreground"},So={key:0,class:"text-sm text-red-600 dark:text-red-400"},Co={class:"space-y-6 border-t pt-6"},Vo={class:"font-medium text-gray-900 dark:text-gray-100"},Uo={class:"space-y-2"},To={class:"relative"},$o={class:"relative"},Lo={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},Ro={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},jo=["onClick"],qo={class:"font-medium text-sm"},Io={class:"text-xs text-gray-500 dark:text-gray-400"},Fo={class:"text-sm text-muted-foreground"},Po={key:0,class:"text-sm text-red-600 dark:text-red-400"},Eo={class:"space-y-2"},Do={class:"relative"},Bo={class:"relative"},zo={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},Mo={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},Oo=["onClick"],Ao={class:"font-medium text-sm"},Xo={class:"text-xs text-gray-500 dark:text-gray-400"},No={key:0},Qo={class:"text-sm text-muted-foreground"},Ho={key:0,class:"text-sm text-red-600 dark:text-red-400"},Wo={class:"space-y-2"},Jo={class:"relative"},Go={class:"relative"},Ko={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},Yo={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},Zo=["onClick"],er={class:"font-medium text-sm"},tr={class:"text-xs text-gray-500 dark:text-gray-400"},sr={key:0},ar={key:1},or={class:"text-sm text-muted-foreground"},rr={key:0,class:"text-sm text-red-600 dark:text-red-400"},lr={key:1,class:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},nr={class:"font-medium text-gray-900 dark:text-gray-100 mb-2"},ir={class:"space-y-1 text-sm"},dr={key:0},cr={key:1},ur={key:2},mr={key:2,class:"space-y-6"},_r={class:"space-y-4"},pr={class:"space-y-2"},gr={class:"flex items-center justify-center w-full"},yr={key:0,class:"flex flex-col items-center justify-center pt-5 pb-6"},fr={class:"mb-2 text-sm text-gray-500 dark:text-gray-400"},vr={class:"font-semibold"},br={class:"text-xs text-gray-500 dark:text-gray-400"},hr={key:1,class:"relative w-full h-full"},kr=["src"],xr={key:0,class:"text-sm text-red-600 dark:text-red-400"},wr={class:"text-sm text-muted-foreground"},Sr={class:"mt-8 p-6 bg-gray-50 dark:bg-gray-800 rounded-lg"},Cr={class:"font-medium text-gray-900 dark:text-gray-100 mb-4"},Vr={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Ur={key:0},Tr={key:1},$r={key:2},Lr={key:0},Rr={key:1},jr={key:2},qr={key:3},Ir={key:0,class:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},Fr={class:"space-y-1 text-sm text-blue-700 dark:text-blue-300"},Pr={key:0},Er={key:1},Dr={key:2},Br={key:3},zr={key:0},Mr={key:1,class:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},Or={class:"flex items-start"},Ar={class:"text-sm text-blue-700 dark:text-blue-300"},Xr={class:"font-medium"},Nr={class:"mt-1"},Qr={key:2,class:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg"},Hr={class:"flex items-start"},Wr={class:"text-sm text-green-700 dark:text-green-300"},Jr={class:"font-medium"},Gr={class:"mt-1"},Kr={class:"mt-8 p-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},Yr={class:"flex items-center space-x-3 mb-4"},Zr={key:0,class:"space-y-4 ml-7"},el={class:"space-y-2"},tl={class:"space-y-2"},sl={class:"text-xs text-blue-600 dark:text-blue-400"},al={class:"flex justify-between mt-8"},ol={class:"flex gap-2"},rl={class:"flex gap-2"},ll={class:"flex flex-col h-[60vh]"},nl={key:0,class:"flex items-center justify-center h-full"},il={class:"text-center"},dl={class:"text-sm text-gray-500 dark:text-gray-400"},cl={key:1,class:"flex h-full"},ul={class:"w-64 border-r border-gray-200 dark:border-gray-700 overflow-y-auto"},ml={class:"p-4"},_l={class:"font-medium text-sm text-gray-900 dark:text-gray-100 mb-3"},pl={class:"space-y-1"},gl=["onClick"],yl={class:"flex items-center justify-between"},fl={class:"text-xs bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded-full"},vl={class:"flex-1 overflow-y-auto"},bl={class:"p-4"},hl={class:"font-medium text-sm text-gray-900 dark:text-gray-100 mb-3"},kl={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},xl=["onClick"],wl={class:"font-medium text-sm mb-1"},Sl={class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},Cl={key:0},Vl={key:1},Ul={key:2},Tl={key:0,class:"text-blue-600 dark:text-blue-400"},$l={key:1,class:"text-green-600 dark:text-green-400"},Ll={key:0,class:"text-center py-8"},Rl={class:"text-sm text-gray-500 dark:text-gray-400"},jl={key:2,class:"flex items-center justify-center h-full"},ql={class:"text-center"},Il={class:"text-sm text-gray-500 dark:text-gray-400"},he=3,yn=Xt({__name:"Create",props:{companies:{},currentCompany:{},categories:{},locations:{}},setup(nt){var Ge,Ke,Ye,Ze;const{t:r,locale:ke}=Nt(),F=nt;Qt();const De=new URLSearchParams(window.location.search).get("location_id"),Be=()=>{var a;return((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},V=v(1),ue=v(!1),le=v(!1),P=v(""),B=v([]),me=v(!1),E=v(!1),j=v(null),q=v(""),z=v([]),_e=v(!1),I=v(!1),C=v(null),pe=v(!1),G=v({}),xe=v(!1),M=v(""),O=v(""),K=v([]),we=v(!1),A=v(!1),X=v(null),N=v(""),Y=v([]),Se=v(!1),Q=v(!1),Z=v(null),H=v(""),ee=v([]),Ce=v(!1),W=v(!1),te=v(null),ne=v(null),ie=v(null),J=v(null),ge=v(!1),de=v(!1),ye=v(null),se=v(null),D=v(null),l=Re({location_id:"",asset_template_id:"",company_id:((Ge=F.currentCompany)==null?void 0:Ge.id)||"",department_id:"",assigned_to:"",serial_number:"",condition:"good",image:null,quantity:1,creation_mode:"single",workstation_prefix:"",workstation_start:1,workstation_end:1,workstation_company_id:((Ke=F.currentCompany)==null?void 0:Ke.id)||"",send_to_print_station:!1,print_priority:"normal",print_comment:""}),y=Re({company_id:((Ye=F.currentCompany)==null?void 0:Ye.id)||(F.companies.length===1?F.companies[0].id:""),name:"",building:"",office_number:"",address:"",city:"",state:"",postal_code:"",country:""}),f=Re({name:"",manufacturer:"",model_name:"",model_number:"",asset_category_id:"",company_id:((Ze=F.currentCompany)==null?void 0:Ze.id)||"",is_global:!1,image:null}),it=tt(()=>[{title:r("nav.dashboard"),href:"/dashboard"},{title:r("nav.assets"),href:"/assets"},{title:r("assets.create_asset"),href:"/assets/create"}]),Ve=tt(()=>{switch(V.value){case 1:return l.creation_mode==="workstation_range"?l.workstation_prefix.length>0&&l.workstation_start>0&&l.workstation_end>0&&l.workstation_start<=l.workstation_end:j.value!==null;case 2:return C.value!==null;case 3:return!0;default:return!1}});let ze;const dt=async()=>{if(P.value.length<2){B.value=[],E.value=!1;return}me.value=!0;try{const a=await(await fetch(`/api/locations/search?q=${encodeURIComponent(P.value)}`)).json();B.value=a,E.value=!0}catch(d){console.error("Location search failed:",d),B.value=[]}finally{me.value=!1}},ct=()=>{clearTimeout(ze),ze=window.setTimeout(dt,300)},fe=d=>{j.value=d,l.location_id=d.id.toString(),P.value=d.display_name,E.value=!1,Ot(d)},ut=()=>{j.value=null,l.location_id="",P.value="",B.value=[],E.value=!1;try{sessionStorage.removeItem("lastSelectedLocation")}catch(d){console.error("Failed to clear saved location:",d)}},mt=()=>{setTimeout(()=>{E.value=!1},200)};let Me;const _t=async()=>{if(q.value.length<2){z.value=[],I.value=!1;return}_e.value=!0;try{const a=await(await fetch(`/api/asset-templates/search?q=${encodeURIComponent(q.value)}`)).json();z.value=a,I.value=!0}catch(d){console.error("Template search failed:",d),z.value=[]}finally{_e.value=!1}},pt=()=>{clearTimeout(Me),Me=window.setTimeout(_t,300)},Oe=d=>{C.value=d,l.asset_template_id=d.id.toString(),q.value=d.display_name,I.value=!1},gt=()=>{C.value=null,l.asset_template_id="",q.value="",z.value=[],I.value=!1},yt=()=>{setTimeout(()=>{I.value=!1},200)},ft=async()=>{pe.value=!0,xe.value=!0;try{const a=await(await fetch("/api/asset-templates/by-category")).json();G.value=a;const p=Object.keys(a);p.length>0&&(M.value=p[0])}catch(d){console.error("Failed to load templates by category:",d)}finally{xe.value=!1}},vt=d=>{C.value=d,l.asset_template_id=d.id.toString(),q.value=d.display_name,I.value=!1,pe.value=!1},Ae=(d,a=1800)=>new Promise(p=>{const g=document.createElement("canvas"),o=g.getContext("2d"),k=new Image;k.onload=()=>{let{width:w,height:$}=k;const ae=1920;w>$&&w>ae?($=$*ae/w,w=ae):$>ae&&(w=w*ae/$,$=ae),g.width=w,g.height=$,o.drawImage(k,0,0,w,$);const et=$e=>{g.toBlob(ve=>{if(ve&&ve.size<=a*1024){const Le=new File([ve],d.name,{type:"image/jpeg",lastModified:Date.now()});p(Le)}else if($e>.1)et($e-.1);else{const Le=new File([ve],d.name,{type:"image/jpeg",lastModified:Date.now()});p(Le)}},"image/jpeg",$e)};et(.8)},k.src=URL.createObjectURL(d)}),bt=async d=>{var g;const p=(g=d.target.files)==null?void 0:g[0];if(!p){ye.value=null,se.value=null,f.image=null;return}if(!p.type.startsWith("image/")){D.value=r("assets.invalid_file_type");return}D.value=null;try{const o=await Ae(p,1800);ye.value=o,f.image=o;const k=new FileReader;k.onload=w=>{var $;se.value=($=w.target)==null?void 0:$.result},k.readAsDataURL(o)}catch(o){console.error("Error processing image:",o),D.value=r("assets.image_processing_error")}},ht=async d=>{try{const p=await(await fetch(d)).blob(),g=new File([p],`template-${Date.now()}.jpg`,{type:"image/jpeg"}),o=await Ae(g,1800);ye.value=o,f.image=o,se.value=d,de.value=!1}catch(a){console.error("Error processing camera image:",a),D.value=r("assets.image_processing_error")}},Xe=()=>{ye.value=null,se.value=null,D.value=null,f.image=null;const d=document.getElementById("template_image");d&&(d.value="")},Ne=async()=>{var d;f.processing=!0,f.clearErrors();try{const a=new FormData;a.append("name",f.name),a.append("manufacturer",f.manufacturer),a.append("model_name",f.model_name),a.append("model_number",f.model_number),a.append("asset_category_id",f.asset_category_id.toString()),a.append("company_id",f.company_id.toString()),a.append("is_global",f.is_global?"1":"0"),a.append("_from_modal","1"),f.image&&a.append("image",f.image);const p=await fetch("/asset-templates",{method:"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":Be()},body:a}),g=await p.json();if(p.ok&&g.success){ge.value=!1,f.reset(),Xe();const o={id:g.template.id,name:g.template.name,manufacturer:g.template.manufacturer,model_name:g.template.model_name,model_number:g.template.model_number,asset_category:g.template.asset_category,company:g.template.company,is_global:g.template.is_global,display_name:g.template.display_name,category_name:(d=g.template.asset_category)==null?void 0:d.name};Oe(o)}else if(g.errors){const o=["name","manufacturer","model_name","model_number","asset_category_id","company_id","image"];Object.keys(g.errors).forEach(k=>{o.includes(k)&&f.setError(k,g.errors[k][0])})}else console.error("Failed to create template:",g)}catch(a){console.error("Error creating template:",a),f.setError("name","An error occurred while creating the template.")}finally{f.processing=!1}};let Qe;const kt=async()=>{if(O.value.length<2){K.value=[],A.value=!1;return}we.value=!0;try{const a=await(await fetch(`/api/companies/search?q=${encodeURIComponent(O.value)}`)).json();K.value=a,A.value=!0}catch(d){console.error("Company search failed:",d),K.value=[]}finally{we.value=!1}},xt=()=>{clearTimeout(Qe),Qe=window.setTimeout(kt,300)},wt=d=>{X.value=d,l.company_id=d.id.toString(),O.value=d.display_name,A.value=!1,Ue(),ce()},St=()=>{var d;X.value=null,l.company_id=((d=F.currentCompany)==null?void 0:d.id)||"",O.value="",K.value=[],A.value=!1,Ue(),ce()},Ct=()=>{setTimeout(()=>{A.value=!1},200)};let He;const Vt=async()=>{var d,a;if(N.value.length<2){Y.value=[],Q.value=!1;return}Se.value=!0;try{const p=((d=X.value)==null?void 0:d.id)||((a=F.currentCompany)==null?void 0:a.id),o=await(await fetch(`/api/departments/search?q=${encodeURIComponent(N.value)}&company_id=${p}`)).json();Y.value=o,Q.value=!0}catch(p){console.error("Department search failed:",p),Y.value=[]}finally{Se.value=!1}},Ut=()=>{clearTimeout(He),He=window.setTimeout(Vt,300)},Tt=d=>{Z.value=d,l.department_id=d.id,N.value=d.display_name,Q.value=!1,ce()},Ue=()=>{Z.value=null,l.department_id="",N.value="",Y.value=[],Q.value=!1,ce()},$t=()=>{setTimeout(()=>{Q.value=!1},200)};let We;const Lt=async()=>{if(H.value.length<2){ee.value=[],W.value=!1;return}Ce.value=!0;try{const d=`/api/employees/search?q=${encodeURIComponent(H.value)}`,p=await(await fetch(d)).json();ee.value=p,W.value=!0}catch(d){console.error("Employee search failed:",d),ee.value=[]}finally{Ce.value=!1}},Rt=()=>{clearTimeout(We),We=window.setTimeout(Lt,300)},jt=d=>{te.value=d,l.assigned_to=d.id.toString(),H.value=d.display_name,W.value=!1},ce=()=>{te.value=null,l.assigned_to="",H.value="",ee.value=[],W.value=!1},qt=()=>{setTimeout(()=>{W.value=!1},200)},It=d=>{var o;const p=(o=d.target.files)==null?void 0:o[0];if(!p){ne.value=null,ie.value=null,l.image=null;return}if(!p.type.startsWith("image/")){J.value=r("assets.invalid_file_type");return}if(p.size>5*1024*1024){J.value=r("assets.file_too_large");return}J.value=null,ne.value=p,l.image=p;const g=new FileReader;g.onload=k=>{var w;ie.value=(w=k.target)==null?void 0:w.result},g.readAsDataURL(p)},Ft=()=>{ne.value=null,ie.value=null,J.value=null,l.image=null;const d=document.getElementById("asset_image");d&&(d.value="")},Pt=()=>{Ve.value&&V.value<he&&V.value++},Et=()=>{V.value>1&&V.value--},Je=async()=>{y.processing=!0,y.clearErrors();try{const d=await fetch("/locations",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":Be()},body:JSON.stringify({company_id:y.company_id,name:y.name,building:y.building,office_number:y.office_number,address:y.address,city:y.city,state:y.state,postal_code:y.postal_code,country:y.country,_from_modal:!0})}),a=await d.json();if(d.ok&&a.success){ue.value=!1,y.reset();const p={id:a.location.id,name:a.location.name,code:a.location.code,building:a.location.building,office_number:a.location.office_number,address:a.location.address,city:a.location.city,company_name:a.location.company.name_en,display_name:`${a.location.code}: ${a.location.name}`+(a.location.building?` - Building ${a.location.building}`:"")+(a.location.office_number?` - Office ${a.location.office_number}`:""),full_address:[a.location.address,a.location.city].filter(Boolean).join(", ")};fe(p)}else if(a.errors){const p=["company_id","name","building","office_number","address","city","state","postal_code","country"];Object.keys(a.errors).forEach(g=>{p.includes(g)&&y.setError(g,a.errors[g][0])})}else console.error("Failed to create location:",a)}catch(d){console.error("Error creating location:",d),y.setError("name","An error occurred while creating the location.")}finally{y.processing=!1}},Dt=()=>{l.post("/assets",{onSuccess:d=>{var p,g;((g=(p=d.props)==null?void 0:p.flash)==null?void 0:g.show_bulk_print)&&l.quantity>1?at.visit("/assets?show_bulk_print=true"):at.visit("/assets")},onError:()=>{}})},Bt=d=>d<V.value?"bg-primary text-primary-foreground":d===V.value?"bg-primary text-primary-foreground ring-2 ring-primary ring-offset-2":"bg-muted text-muted-foreground",zt=d=>d<V.value?"bg-primary":"bg-muted",Mt=d=>{l.serial_number=d,le.value=!1},Ot=d=>{try{const a={id:d.id,name:d.name,code:d.code,building:d.building,office_number:d.office_number,address:d.address,city:d.city,company_name:d.company_name,display_name:d.display_name,full_address:d.full_address,timestamp:Date.now()};sessionStorage.setItem("lastSelectedLocation",JSON.stringify(a))}catch(a){console.error("Failed to save last selected location:",a)}},At=async()=>{try{const d=sessionStorage.getItem("lastSelectedLocation");if(!d)return null;const a=JSON.parse(d),p=1440*60*1e3;if(Date.now()-a.timestamp>p)return sessionStorage.removeItem("lastSelectedLocation"),null;const k=(await(await fetch(`/api/locations/search?q=${encodeURIComponent(a.name)}`)).json()).find(w=>w.id===a.id);return k||(sessionStorage.removeItem("lastSelectedLocation"),null)}catch(d){return console.error("Failed to load last selected location:",d),null}},Te=v(!1);return Ht(async()=>{if(De)try{const p=(await(await fetch("/api/locations/search?q=")).json()).find(g=>g.id.toString()===De);if(p){fe(p);const g=new URL(window.location.href);g.searchParams.delete("location_id"),window.history.replaceState({},"",g.toString());return}}catch(d){console.error("Failed to load pre-selected location:",d)}if(l.creation_mode!=="workstation_range")try{const d=await At();d&&(fe(d),Te.value=!0,setTimeout(()=>{Te.value=!1},3e3))}catch(d){console.error("Failed to load last selected location from session:",d)}}),(d,a)=>(i(),c(U,null,[n(e(Wt),{title:e(r)("assets.create_asset")},null,8,["title"]),n(Kt,{breadcrumbs:it.value},{default:m(()=>[t("div",os,[t("div",rs,[n(as,{title:e(r)("assets.create_asset")},null,8,["title"]),t("p",ls,s(e(r)("assets.create_asset_description")),1)]),t("div",ns,[t("div",is,[(i(),c(U,null,L(he,p=>t("div",{key:p,class:"flex items-center"},[t("div",{class:S([Bt(p),"w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium transition-colors"])},s(p),3),p<he?(i(),c("div",{key:0,class:S([zt(p),"w-16 h-1 mx-4 transition-colors"])},null,2)):_("",!0)])),64))])]),n(e(Yt),null,{default:m(()=>[n(e(ts),null,{default:m(()=>[n(e(ss),null,{default:m(()=>[u(s(e(r)(`assets.step_${V.value}_title`)),1)]),_:1}),n(e(es),null,{default:m(()=>[u(s(e(r)(`assets.step_${V.value}_description`)),1)]),_:1})]),_:1}),n(e(Zt),{class:"space-y-6"},{default:m(()=>{var p,g;return[V.value===1?(i(),c("div",ds,[t("div",cs,[n(e(b),null,{default:m(()=>[u(s(e(r)("assets.creation_mode"))+" *",1)]),_:1}),t("div",us,[t("div",ms,[R(t("input",{type:"radio",id:"creation_mode_single","onUpdate:modelValue":a[0]||(a[0]=o=>e(l).creation_mode=o),value:"single",class:"peer sr-only"},null,512),[[je,e(l).creation_mode]]),t("label",_s,[n(h,{name:"MapPin",class:"h-6 w-6 mb-2 text-gray-600 dark:text-gray-400"}),t("span",ps,s(e(r)("assets.single_location")),1),t("span",gs,s(e(r)("assets.single_location_desc")),1)])]),t("div",ys,[R(t("input",{type:"radio",id:"creation_mode_bulk","onUpdate:modelValue":a[1]||(a[1]=o=>e(l).creation_mode=o),value:"bulk",class:"peer sr-only"},null,512),[[je,e(l).creation_mode]]),t("label",fs,[n(h,{name:"Package",class:"h-6 w-6 mb-2 text-gray-600 dark:text-gray-400"}),t("span",vs,s(e(r)("assets.bulk_creation")),1),t("span",bs,s(e(r)("assets.bulk_creation_desc")),1)])]),t("div",hs,[R(t("input",{type:"radio",id:"creation_mode_workstation","onUpdate:modelValue":a[2]||(a[2]=o=>e(l).creation_mode=o),value:"workstation_range",class:"peer sr-only"},null,512),[[je,e(l).creation_mode]]),t("label",ks,[n(h,{name:"Monitor",class:"h-6 w-6 mb-2 text-gray-600 dark:text-gray-400"}),t("span",xs,s(e(r)("assets.workstation_range")),1),t("span",ws,s(e(r)("assets.workstation_range_desc")),1)])])])]),e(l).creation_mode!=="workstation_range"?(i(),c("div",Ss,[n(e(b),{for:"location_search"},{default:m(()=>[u(s(e(r)("assets.location"))+" *",1)]),_:1}),t("div",Cs,[t("div",Vs,[t("div",Us,[n(e(x),{id:"location_search",modelValue:P.value,"onUpdate:modelValue":a[3]||(a[3]=o=>P.value=o),type:"text",placeholder:j.value?j.value.display_name:e(r)("assets.search_location_placeholder"),onInput:ct,onFocus:a[4]||(a[4]=o=>P.value.length>=2&&(E.value=!0)),onBlur:mt,class:S({"border-red-500":e(l).errors.location_id}),disabled:j.value!==null},null,8,["modelValue","placeholder","class","disabled"]),j.value?(i(),c("button",{key:0,type:"button",onClick:ut,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[n(h,{name:"X",class:"h-4 w-4"})])):_("",!0),me.value?(i(),c("div",Ts,[n(h,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),E.value&&B.value.length>0?(i(),c("div",$s,[(i(!0),c(U,null,L(B.value,o=>(i(),c("div",{key:o.id,onClick:k=>fe(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",Rs,s(o.display_name),1),t("div",js,[u(s(o.company_name)+" ",1),o.full_address?(i(),c("span",qs," • "+s(o.full_address),1)):_("",!0)])],8,Ls))),128))])):_("",!0),E.value&&B.value.length===0&&!me.value&&P.value.length>=2?(i(),c("div",Is,[t("div",Fs,s(e(r)("assets.no_locations_found")),1)])):_("",!0)]),n(e(qe),{open:ue.value,"onUpdate:open":a[15]||(a[15]=o=>ue.value=o)},{default:m(()=>[n(e(rt),{asChild:""},{default:m(()=>[n(e(T),{variant:"outline",type:"button"},{default:m(()=>[n(h,{name:"Plus",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),u(" "+s(e(r)("locations.create_location")),1)]),_:1})]),_:1}),n(e(Ie),{class:"sm:max-w-lg"},{default:m(()=>[n(e(Fe),null,{default:m(()=>[n(e(Pe),null,{default:m(()=>[u(s(e(r)("locations.create_location")),1)]),_:1}),n(e(Ee),null,{default:m(()=>[u(s(e(r)("locations.create_location_description")),1)]),_:1})]),_:1}),t("form",{onSubmit:be(Je,["prevent"]),class:"space-y-4"},[t("div",Ps,[n(e(b),{for:"location_company_id"},{default:m(()=>[u(s(e(r)("locations.company"))+" *",1)]),_:1}),R(t("select",{id:"location_company_id","onUpdate:modelValue":a[5]||(a[5]=o=>e(y).company_id=o),class:S(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(y).errors.company_id}]),disabled:e(y).processing,required:""},[t("option",Ds,s(e(r)("locations.select_company")),1),(i(!0),c(U,null,L(d.companies,o=>(i(),c("option",{key:o.id,value:o.id},s(o.name_en)+" "+s(o.name_ar?`(${o.name_ar})`:""),9,Bs))),128))],10,Es),[[oe,e(y).company_id]]),e(y).errors.company_id?(i(),c("div",zs,s(e(y).errors.company_id),1)):_("",!0)]),t("div",Ms,[t("div",Os,[n(e(b),{for:"location_name"},{default:m(()=>[u(s(e(r)("locations.name"))+" *",1)]),_:1}),n(e(x),{id:"location_name",modelValue:e(y).name,"onUpdate:modelValue":a[6]||(a[6]=o=>e(y).name=o),error:e(y).errors.name,required:""},null,8,["modelValue","error"])]),t("div",As,[n(e(b),{for:"location_code"},{default:m(()=>[u(s(e(r)("locations.code")),1)]),_:1}),n(e(x),{id:"location_code",type:"text",placeholder:e(r)("locations.code_auto_generated"),disabled:"",class:"bg-muted"},null,8,["placeholder"]),t("p",Xs,s(e(r)("locations.code_auto_generated")),1)])]),t("div",Ns,[t("div",Qs,[n(e(b),{for:"location_building"},{default:m(()=>[u(s(e(r)("locations.building")),1)]),_:1}),n(e(x),{id:"location_building",modelValue:e(y).building,"onUpdate:modelValue":a[7]||(a[7]=o=>e(y).building=o),error:e(y).errors.building},null,8,["modelValue","error"])]),t("div",Hs,[n(e(b),{for:"location_office_number"},{default:m(()=>[u(s(e(r)("locations.office_number")),1)]),_:1}),n(e(x),{id:"location_office_number",modelValue:e(y).office_number,"onUpdate:modelValue":a[8]||(a[8]=o=>e(y).office_number=o),error:e(y).errors.office_number},null,8,["modelValue","error"])])]),t("div",Ws,[n(e(b),{for:"location_address"},{default:m(()=>[u(s(e(r)("locations.address")),1)]),_:1}),n(e(x),{id:"location_address",modelValue:e(y).address,"onUpdate:modelValue":a[9]||(a[9]=o=>e(y).address=o),error:e(y).errors.address},null,8,["modelValue","error"])]),t("div",Js,[t("div",Gs,[n(e(b),{for:"location_city"},{default:m(()=>[u(s(e(r)("locations.city")),1)]),_:1}),n(e(x),{id:"location_city",modelValue:e(y).city,"onUpdate:modelValue":a[10]||(a[10]=o=>e(y).city=o),error:e(y).errors.city},null,8,["modelValue","error"])]),t("div",Ks,[n(e(b),{for:"location_state"},{default:m(()=>[u(s(e(r)("locations.state")),1)]),_:1}),n(e(x),{id:"location_state",modelValue:e(y).state,"onUpdate:modelValue":a[11]||(a[11]=o=>e(y).state=o),error:e(y).errors.state},null,8,["modelValue","error"])])]),t("div",Ys,[t("div",Zs,[n(e(b),{for:"location_postal_code"},{default:m(()=>[u(s(e(r)("locations.postal_code")),1)]),_:1}),n(e(x),{id:"location_postal_code",modelValue:e(y).postal_code,"onUpdate:modelValue":a[12]||(a[12]=o=>e(y).postal_code=o),error:e(y).errors.postal_code},null,8,["modelValue","error"])]),t("div",ea,[n(e(b),{for:"location_country"},{default:m(()=>[u(s(e(r)("locations.country")),1)]),_:1}),n(e(x),{id:"location_country",modelValue:e(y).country,"onUpdate:modelValue":a[13]||(a[13]=o=>e(y).country=o),error:e(y).errors.country},null,8,["modelValue","error"])])])],32),n(e(ot),null,{default:m(()=>[n(e(T),{variant:"outline",onClick:a[14]||(a[14]=o=>ue.value=!1),type:"button"},{default:m(()=>[u(s(e(r)("common.cancel")),1)]),_:1}),n(e(T),{onClick:Je,disabled:e(y).processing},{default:m(()=>[e(y).processing?(i(),re(h,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"})):_("",!0),u(" "+s(e(r)("common.create")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),e(l).errors.location_id?(i(),c("div",ta,s(e(l).errors.location_id),1)):_("",!0),Te.value&&j.value?(i(),c("div",sa,[n(h,{name:"Clock",class:"h-3 w-3"}),u(" "+s(e(r)("assets.location_pre_selected")),1)])):_("",!0)])):_("",!0),e(l).creation_mode==="workstation_range"?(i(),c("div",aa,[t("div",oa,[t("div",ra,[n(h,{name:"Info",class:"h-5 w-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0"}),t("div",null,[t("h4",la,s(e(r)("assets.workstation_range_info")),1),t("p",na,s(e(r)("assets.workstation_range_info_desc")),1)])])]),t("div",ia,[n(e(b),{for:"workstation_company_search"},{default:m(()=>[u(s(e(r)("assets.workstation_company"))+" *",1)]),_:1}),t("div",da,[R(t("select",{id:"workstation_company_search","onUpdate:modelValue":a[16]||(a[16]=o=>e(l).workstation_company_id=o),class:S(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(l).errors.workstation_company_id}]),required:""},[t("option",ca,s(e(r)("assets.select_company")),1),(i(!0),c(U,null,L(d.companies,o=>(i(),c("option",{key:o.id,value:o.id},s(o.name_en)+" "+s(o.name_ar?`(${o.name_ar})`:""),9,ua))),128))],2),[[oe,e(l).workstation_company_id]])]),t("p",ma,s(e(r)("assets.workstation_company_desc")),1),e(l).errors.workstation_company_id?(i(),c("div",_a,s(e(l).errors.workstation_company_id),1)):_("",!0)]),t("div",pa,[n(e(b),{for:"workstation_prefix"},{default:m(()=>[u(s(e(r)("assets.workstation_prefix"))+" *",1)]),_:1}),n(e(x),{id:"workstation_prefix",modelValue:e(l).workstation_prefix,"onUpdate:modelValue":a[17]||(a[17]=o=>e(l).workstation_prefix=o),type:"text",placeholder:e(r)("assets.workstation_prefix_placeholder"),class:S({"border-red-500":e(l).errors.workstation_prefix}),required:""},null,8,["modelValue","placeholder","class"]),t("p",ga,s(e(r)("assets.workstation_prefix_desc")),1),e(l).errors.workstation_prefix?(i(),c("div",ya,s(e(l).errors.workstation_prefix),1)):_("",!0)]),t("div",fa,[t("div",va,[n(e(b),{for:"workstation_start"},{default:m(()=>[u(s(e(r)("assets.workstation_start"))+" *",1)]),_:1}),n(e(x),{id:"workstation_start",modelValue:e(l).workstation_start,"onUpdate:modelValue":a[18]||(a[18]=o=>e(l).workstation_start=o),modelModifiers:{number:!0},type:"number",min:"1",max:"999",placeholder:e(r)("assets.workstation_start_placeholder"),class:S({"border-red-500":e(l).errors.workstation_start}),required:""},null,8,["modelValue","placeholder","class"]),e(l).errors.workstation_start?(i(),c("div",ba,s(e(l).errors.workstation_start),1)):_("",!0)]),t("div",ha,[n(e(b),{for:"workstation_end"},{default:m(()=>[u(s(e(r)("assets.workstation_end"))+" *",1)]),_:1}),n(e(x),{id:"workstation_end",modelValue:e(l).workstation_end,"onUpdate:modelValue":a[19]||(a[19]=o=>e(l).workstation_end=o),modelModifiers:{number:!0},type:"number",min:"1",max:"999",placeholder:e(r)("assets.workstation_end_placeholder"),class:S({"border-red-500":e(l).errors.workstation_end}),required:""},null,8,["modelValue","placeholder","class"]),e(l).errors.workstation_end?(i(),c("div",ka,s(e(l).errors.workstation_end),1)):_("",!0)])]),e(l).workstation_prefix&&e(l).workstation_start&&e(l).workstation_end&&e(l).workstation_start<=e(l).workstation_end?(i(),c("div",xa,[t("h4",wa,s(e(r)("assets.workstation_preview")),1),t("div",Sa,[t("strong",null,s(e(r)("assets.locations_to_create"))+":",1),u(" "+s(e(l).workstation_prefix)+s(e(l).workstation_start)+" "+s(e(l).workstation_end>e(l).workstation_start?`to ${e(l).workstation_prefix}${e(l).workstation_end}`:"")+" ("+s(e(l).workstation_end-e(l).workstation_start+1)+" "+s(e(r)("assets.workstations"))+") ",1)])])):_("",!0)])):_("",!0)])):V.value===2?(i(),c("div",Ca,[t("div",Va,[n(e(b),{for:"template_search"},{default:m(()=>[u(s(e(r)("assets.template"))+" *",1)]),_:1}),t("div",Ua,[t("div",Ta,[t("div",$a,[n(e(x),{id:"template_search",modelValue:q.value,"onUpdate:modelValue":a[20]||(a[20]=o=>q.value=o),type:"text",placeholder:C.value?C.value.display_name:e(r)("assets.search_template_placeholder"),onInput:pt,onFocus:a[21]||(a[21]=o=>q.value.length>=2&&(I.value=!0)),onBlur:yt,class:S({"border-red-500":e(l).errors.asset_template_id}),disabled:C.value!==null},null,8,["modelValue","placeholder","class","disabled"]),C.value?(i(),c("button",{key:0,type:"button",onClick:gt,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[n(h,{name:"X",class:"h-4 w-4"})])):_("",!0),_e.value?(i(),c("div",La,[n(h,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),I.value&&z.value.length>0?(i(),c("div",Ra,[(i(!0),c(U,null,L(z.value,o=>{var k,w;return i(),c("div",{key:o.id,onClick:$=>Oe(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",qa,s(o.display_name),1),t("div",Ia,[o.category_name?(i(),c("span",Fa,s(o.category_name),1)):_("",!0),o.category_name&&((k=o.company)!=null&&k.name_en||o.is_global)?(i(),c("span",Pa," • ")):_("",!0),o.is_global?(i(),c("span",Ea,s(e(r)("asset_templates.global")),1)):(w=o.company)!=null&&w.name_en?(i(),c("span",Da,s(o.company.name_en),1)):_("",!0)])],8,ja)}),128))])):_("",!0),I.value&&z.value.length===0&&!_e.value&&q.value.length>=2?(i(),c("div",Ba,[t("div",za,s(e(r)("assets.no_templates_found")),1)])):_("",!0)]),n(e(T),{variant:"outline",type:"button",onClick:ft},{default:m(()=>[n(h,{name:"List",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),u(" "+s(e(r)("assets.choose_template")),1)]),_:1}),n(e(qe),{open:ge.value,"onUpdate:open":a[31]||(a[31]=o=>ge.value=o)},{default:m(()=>[n(e(rt),{asChild:""},{default:m(()=>[n(e(T),{variant:"outline",type:"button"},{default:m(()=>[n(h,{name:"Plus",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),u(" "+s(e(r)("asset_templates.create_template")),1)]),_:1})]),_:1}),n(e(Ie),{class:"sm:max-w-2xl max-h-[90vh] overflow-y-auto"},{default:m(()=>[n(e(Fe),null,{default:m(()=>[n(e(Pe),null,{default:m(()=>[u(s(e(r)("asset_templates.create_template")),1)]),_:1}),n(e(Ee),null,{default:m(()=>[u(s(e(r)("asset_templates.create_template_description")),1)]),_:1})]),_:1}),t("form",{onSubmit:be(Ne,["prevent"]),class:"space-y-4"},[t("div",Ma,[n(e(b),{for:"template_name"},{default:m(()=>[u(s(e(r)("asset_templates.name"))+" *",1)]),_:1}),n(e(x),{id:"template_name",modelValue:e(f).name,"onUpdate:modelValue":a[22]||(a[22]=o=>e(f).name=o),error:e(f).errors.name,required:""},null,8,["modelValue","error"])]),t("div",Oa,[t("div",Aa,[n(e(b),{for:"template_manufacturer"},{default:m(()=>[u(s(e(r)("asset_templates.manufacturer")),1)]),_:1}),n(e(x),{id:"template_manufacturer",modelValue:e(f).manufacturer,"onUpdate:modelValue":a[23]||(a[23]=o=>e(f).manufacturer=o),error:e(f).errors.manufacturer},null,8,["modelValue","error"])]),t("div",Xa,[n(e(b),{for:"template_model_name"},{default:m(()=>[u(s(e(r)("asset_templates.model_name")),1)]),_:1}),n(e(x),{id:"template_model_name",modelValue:e(f).model_name,"onUpdate:modelValue":a[24]||(a[24]=o=>e(f).model_name=o),error:e(f).errors.model_name},null,8,["modelValue","error"])])]),t("div",Na,[n(e(b),{for:"template_model_number"},{default:m(()=>[u(s(e(r)("asset_templates.model_number")),1)]),_:1}),n(e(x),{id:"template_model_number",modelValue:e(f).model_number,"onUpdate:modelValue":a[25]||(a[25]=o=>e(f).model_number=o),error:e(f).errors.model_number},null,8,["modelValue","error"])]),t("div",Qa,[n(e(b),{for:"template_category"},{default:m(()=>[u(s(e(r)("asset_templates.category"))+" *",1)]),_:1}),R(t("select",{id:"template_category","onUpdate:modelValue":a[26]||(a[26]=o=>e(f).asset_category_id=o),class:S(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(f).errors.asset_category_id}]),required:""},[t("option",Ha,s(e(r)("asset_templates.select_category")),1),(i(!0),c(U,null,L(d.categories,o=>(i(),c("option",{key:o.id,value:o.id},s(o.name),9,Wa))),128))],2),[[oe,e(f).asset_category_id]]),e(f).errors.asset_category_id?(i(),c("div",Ja,s(e(f).errors.asset_category_id),1)):_("",!0)]),t("div",Ga,[n(e(b),{for:"template_company"},{default:m(()=>[u(s(e(r)("asset_templates.company"))+" *",1)]),_:1}),R(t("select",{id:"template_company","onUpdate:modelValue":a[27]||(a[27]=o=>e(f).company_id=o),class:S(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(f).errors.company_id}]),required:""},[t("option",Ka,s(e(r)("asset_templates.select_company")),1),(i(!0),c(U,null,L(d.companies,o=>(i(),c("option",{key:o.id,value:o.id},s(o.name_en)+" "+s(o.name_ar?`(${o.name_ar})`:""),9,Ya))),128))],2),[[oe,e(f).company_id]]),e(f).errors.company_id?(i(),c("div",Za,s(e(f).errors.company_id),1)):_("",!0)]),t("div",eo,[R(t("input",{id:"template_is_global",type:"checkbox","onUpdate:modelValue":a[28]||(a[28]=o=>e(f).is_global=o),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[st,e(f).is_global]]),n(e(b),{for:"template_is_global"},{default:m(()=>[u(s(e(r)("asset_templates.is_global")),1)]),_:1})]),t("p",to,s(e(r)("asset_templates.is_global_description")),1),t("div",so,[n(e(b),{for:"template_image"},{default:m(()=>[u(s(e(r)("asset_templates.image")),1)]),_:1}),t("div",ao,[t("label",{for:"template_image",class:S(["flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-gray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500",{"border-red-500":D.value}])},[se.value?(i(),c("div",no,[t("img",{src:se.value,alt:"Template preview",class:"w-full h-full object-contain rounded-lg"},null,8,io),t("button",{type:"button",onClick:be(Xe,["prevent"]),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors"},[n(h,{name:"X",class:"h-3 w-3"})])])):(i(),c("div",oo,[n(h,{name:"Upload",class:"w-8 h-8 mb-2 text-gray-400"}),t("p",ro,[t("span",lo,s(e(r)("assets.click_to_upload")),1)])])),t("input",{id:"template_image",type:"file",accept:"image/*",onChange:bt,class:"hidden"},null,32)],2)]),t("div",co,[n(e(T),{type:"button",variant:"outline",onClick:a[29]||(a[29]=o=>de.value=!0),class:"flex-1"},{default:m(()=>[n(h,{name:"Camera",class:"h-4 w-4 mr-2"}),u(" "+s(e(r)("assets.take_photo")),1)]),_:1})]),D.value?(i(),c("div",uo,s(D.value),1)):_("",!0),t("p",mo,s(e(r)("assets.image_will_be_resized")),1)])],32),n(e(ot),null,{default:m(()=>[n(e(T),{variant:"outline",onClick:a[30]||(a[30]=o=>ge.value=!1),type:"button"},{default:m(()=>[u(s(e(r)("common.cancel")),1)]),_:1}),n(e(T),{onClick:Ne,disabled:e(f).processing},{default:m(()=>[e(f).processing?(i(),re(h,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"})):_("",!0),u(" "+s(e(r)("common.create")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),e(l).errors.asset_template_id?(i(),c("div",_o,s(e(l).errors.asset_template_id),1)):_("",!0)]),t("div",po,[n(e(b),{for:"serial_number"},{default:m(()=>[u(s(e(r)("assets.serial_number")),1)]),_:1}),t("div",go,[n(e(x),{id:"serial_number",modelValue:e(l).serial_number,"onUpdate:modelValue":a[32]||(a[32]=o=>e(l).serial_number=o),type:"text",placeholder:e(r)("assets.serial_number_placeholder"),class:S([{"border-red-500":e(l).errors.serial_number},"flex-1"])},null,8,["modelValue","placeholder","class"]),n(e(T),{type:"button",variant:"outline",onClick:a[33]||(a[33]=o=>le.value=!0),class:"shrink-0"},{default:m(()=>[n(h,{name:"ScanSearch",class:"h-4 w-4 mr-2"}),a[50]||(a[50]=u(" Scan ",-1))]),_:1,__:[50]})]),t("p",yo,s(e(r)("assets.serial_number_optional")),1),e(l).errors.serial_number?(i(),c("div",fo,s(e(l).errors.serial_number),1)):_("",!0)]),t("div",vo,[n(e(b),{for:"condition"},{default:m(()=>[u(s(e(r)("assets.condition"))+" *",1)]),_:1}),R(t("select",{id:"condition","onUpdate:modelValue":a[34]||(a[34]=o=>e(l).condition=o),class:S(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(l).errors.condition}]),required:""},[t("option",bo,s(e(r)("assets.condition_good")),1),t("option",ho,s(e(r)("assets.condition_damaged")),1)],2),[[oe,e(l).condition]]),e(l).errors.condition?(i(),c("div",ko,s(e(l).errors.condition),1)):_("",!0)]),e(l).creation_mode==="bulk"?(i(),c("div",xo,[n(e(b),{for:"quantity"},{default:m(()=>[u(s(e(r)("assets.quantity"))+" *",1)]),_:1}),n(e(x),{id:"quantity",modelValue:e(l).quantity,"onUpdate:modelValue":a[35]||(a[35]=o=>e(l).quantity=o),modelModifiers:{number:!0},type:"number",min:"1",max:"100",placeholder:e(r)("assets.quantity_placeholder"),class:S({"border-red-500":e(l).errors.quantity}),required:""},null,8,["modelValue","placeholder","class"]),t("p",wo,s(e(r)("assets.quantity_description")),1),e(l).errors.quantity?(i(),c("div",So,s(e(l).errors.quantity),1)):_("",!0)])):_("",!0),t("div",Co,[t("h4",Vo,s(e(r)("assets.assignment_details")),1),t("div",Uo,[n(e(b),{for:"company_search"},{default:m(()=>[u(s(e(r)("assets.company")),1)]),_:1}),t("div",To,[t("div",$o,[n(e(x),{id:"company_search",modelValue:O.value,"onUpdate:modelValue":a[36]||(a[36]=o=>O.value=o),type:"text",placeholder:X.value?X.value.display_name:e(r)("assets.search_company_placeholder"),onInput:xt,onFocus:a[37]||(a[37]=o=>O.value.length>=2&&(A.value=!0)),onBlur:Ct,class:S({"border-red-500":e(l).errors.company_id}),disabled:X.value!==null},null,8,["modelValue","placeholder","class","disabled"]),X.value?(i(),c("button",{key:0,type:"button",onClick:St,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[n(h,{name:"X",class:"h-4 w-4"})])):_("",!0),we.value?(i(),c("div",Lo,[n(h,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),A.value&&K.value.length>0?(i(),c("div",Ro,[(i(!0),c(U,null,L(K.value,o=>(i(),c("div",{key:o.id,onClick:k=>wt(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",qo,s(o.display_name),1),t("div",Io,s(o.company_email),1)],8,jo))),128))])):_("",!0)]),t("p",Fo,s(e(r)("assets.company_optional")),1),e(l).errors.company_id?(i(),c("div",Po,s(e(l).errors.company_id),1)):_("",!0)]),t("div",Eo,[n(e(b),{for:"department_search"},{default:m(()=>[u(s(e(r)("assets.department")),1)]),_:1}),t("div",Do,[t("div",Bo,[n(e(x),{id:"department_search",modelValue:N.value,"onUpdate:modelValue":a[38]||(a[38]=o=>N.value=o),type:"text",placeholder:Z.value?Z.value.display_name:e(r)("assets.search_department_placeholder"),onInput:Ut,onFocus:a[39]||(a[39]=o=>N.value.length>=2&&(Q.value=!0)),onBlur:$t,class:S({"border-red-500":e(l).errors.department_id}),disabled:Z.value!==null},null,8,["modelValue","placeholder","class","disabled"]),Z.value?(i(),c("button",{key:0,type:"button",onClick:Ue,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[n(h,{name:"X",class:"h-4 w-4"})])):_("",!0),Se.value?(i(),c("div",zo,[n(h,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),Q.value&&Y.value.length>0?(i(),c("div",Mo,[(i(!0),c(U,null,L(Y.value,o=>(i(),c("div",{key:o.id,onClick:k=>Tt(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",Ao,s(o.display_name),1),t("div",Xo,[u(s(o.company_name)+" ",1),o.description?(i(),c("span",No," • "+s(o.description),1)):_("",!0)])],8,Oo))),128))])):_("",!0)]),t("p",Qo,s(e(r)("assets.department_optional")),1),e(l).errors.department_id?(i(),c("div",Ho,s(e(l).errors.department_id),1)):_("",!0)]),t("div",Wo,[n(e(b),{for:"employee_search"},{default:m(()=>[u(s(e(r)("assets.assign_to_employee")),1)]),_:1}),t("div",Jo,[t("div",Go,[n(e(x),{id:"employee_search",modelValue:H.value,"onUpdate:modelValue":a[40]||(a[40]=o=>H.value=o),type:"text",placeholder:te.value?te.value.display_name:e(r)("assets.search_employee_placeholder"),onInput:Rt,onFocus:a[41]||(a[41]=o=>H.value.length>=2&&(W.value=!0)),onBlur:qt,class:S({"border-red-500":e(l).errors.assigned_to}),disabled:te.value!==null},null,8,["modelValue","placeholder","class","disabled"]),te.value?(i(),c("button",{key:0,type:"button",onClick:ce,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[n(h,{name:"X",class:"h-4 w-4"})])):_("",!0),Ce.value?(i(),c("div",Ko,[n(h,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),W.value&&ee.value.length>0?(i(),c("div",Yo,[(i(!0),c(U,null,L(ee.value,o=>(i(),c("div",{key:o.id,onClick:k=>jt(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",er,s(o.display_name),1),t("div",tr,[u(s(o.email)+" ",1),o.department?(i(),c("span",sr," • "+s(o.department),1)):_("",!0),o.company_name?(i(),c("span",ar," • "+s(o.company_name),1)):_("",!0)])],8,Zo))),128))])):_("",!0)]),t("p",or,s(e(r)("assets.assign_to_employee_optional")),1),e(l).errors.assigned_to?(i(),c("div",rr,s(e(l).errors.assigned_to),1)):_("",!0)])]),C.value?(i(),c("div",lr,[t("h4",nr,s(e(r)("assets.selected_template")),1),t("div",ir,[t("div",null,[t("strong",null,s(e(r)("assets.name"))+":",1),u(" "+s(C.value.name),1)]),C.value.manufacturer?(i(),c("div",dr,[t("strong",null,s(e(r)("assets.manufacturer"))+":",1),u(" "+s(C.value.manufacturer),1)])):_("",!0),C.value.model_name?(i(),c("div",cr,[t("strong",null,s(e(r)("assets.model"))+":",1),u(" "+s(C.value.model_name),1)])):_("",!0),C.value.asset_category?(i(),c("div",ur,[t("strong",null,s(e(r)("assets.category"))+":",1),u(" "+s(C.value.asset_category.name),1)])):_("",!0)])])):_("",!0)])):V.value===3?(i(),c("div",mr,[t("div",_r,[t("div",pr,[n(e(b),{for:"asset_image"},{default:m(()=>[u(s(e(r)("assets.image")),1)]),_:1}),t("div",gr,[t("label",{for:"asset_image",class:S(["flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-gray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500",{"border-red-500":J.value}])},[ie.value?(i(),c("div",hr,[t("img",{src:ie.value,alt:"Asset preview",class:"w-full h-full object-contain rounded-lg"},null,8,kr),t("button",{type:"button",onClick:be(Ft,["prevent"]),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors"},[n(h,{name:"X",class:"h-4 w-4"})])])):(i(),c("div",yr,[n(h,{name:"Upload",class:"w-10 h-10 mb-3 text-gray-400"}),t("p",fr,[t("span",vr,s(e(r)("assets.click_to_upload")),1),u(" "+s(e(r)("assets.or_drag_and_drop")),1)]),t("p",br,s(e(r)("assets.supported_formats")),1)])),t("input",{id:"asset_image",type:"file",accept:"image/*",onChange:It,class:"hidden"},null,32)],2)]),J.value?(i(),c("div",xr,s(J.value),1)):_("",!0),t("p",wr,s(e(r)("assets.image_optional")),1)])]),t("div",Sr,[t("h4",Cr,s(e(r)("assets.review_asset")),1),t("div",Vr,[t("div",null,[t("strong",null,s(e(r)("assets.creation_mode"))+":",1),e(l).creation_mode==="single"?(i(),c("span",Ur,s(e(r)("assets.single_location")),1)):e(l).creation_mode==="bulk"?(i(),c("span",Tr,s(e(r)("assets.bulk_creation")),1)):(i(),c("span",$r,s(e(r)("assets.workstation_range")),1))]),e(l).creation_mode!=="workstation_range"?(i(),c("div",Lr,[t("strong",null,s(e(r)("assets.location"))+":",1),u(" "+s(((p=j.value)==null?void 0:p.display_name)||"—"),1)])):_("",!0),e(l).creation_mode==="workstation_range"?(i(),c("div",Rr,[t("strong",null,s(e(r)("assets.workstation_range"))+":",1),u(" "+s(e(l).workstation_prefix)+s(e(l).workstation_start)+" to "+s(e(l).workstation_prefix)+s(e(l).workstation_end),1)])):_("",!0),t("div",null,[t("strong",null,s(e(r)("assets.template"))+":",1),u(" "+s(((g=C.value)==null?void 0:g.display_name)||"—"),1)]),t("div",null,[t("strong",null,s(e(r)("assets.serial_number"))+":",1),u(" "+s(e(l).serial_number||e(r)("assets.not_provided")),1)]),t("div",null,[t("strong",null,s(e(r)("assets.condition"))+":",1),u(" "+s(e(l).condition==="good"?e(r)("assets.condition_good"):e(r)("assets.condition_damaged")),1)]),e(l).creation_mode==="bulk"?(i(),c("div",jr,[t("strong",null,s(e(r)("assets.quantity"))+":",1),u(" "+s(e(l).quantity)+" "+s(e(l).quantity===1?e(r)("assets.asset"):e(r)("assets.assets")),1)])):_("",!0),e(l).creation_mode==="workstation_range"?(i(),c("div",qr,[t("strong",null,s(e(r)("assets.workstations"))+":",1),u(" "+s(e(l).workstation_end-e(l).workstation_start+1)+" "+s(e(r)("assets.workstations")),1)])):_("",!0),t("div",null,[t("strong",null,s(e(r)("assets.image"))+":",1),u(" "+s(ne.value?ne.value.name:e(r)("assets.not_provided")),1)])]),e(l).send_to_print_station?(i(),c("div",Ir,[a[54]||(a[54]=t("h5",{class:"font-medium text-blue-900 dark:text-blue-100 mb-2"},"🖨️ Print Station",-1)),t("div",Fr,[a[53]||(a[53]=t("div",null,[t("strong",null,"Status:"),u(" Will be sent to print station")],-1)),t("div",null,[a[51]||(a[51]=t("strong",null,"Priority:",-1)),e(l).print_priority==="low"?(i(),c("span",Pr,"🔵 Low Priority")):e(l).print_priority==="normal"?(i(),c("span",Er,"⚪ Normal Priority")):e(l).print_priority==="high"?(i(),c("span",Dr,"🟡 High Priority")):e(l).print_priority==="urgent"?(i(),c("span",Br,"🔴 Urgent")):_("",!0)]),e(l).print_comment?(i(),c("div",zr,[a[52]||(a[52]=t("strong",null,"Comment:",-1)),u(" "+s(e(l).print_comment),1)])):_("",!0)])])):_("",!0),e(l).creation_mode==="bulk"&&e(l).quantity>1?(i(),c("div",Mr,[t("div",Or,[n(h,{name:"Info",class:"h-4 w-4 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),t("div",Ar,[t("p",Xr,s(e(r)("assets.bulk_creation_notice")),1),t("p",Nr,s(e(r)("assets.bulk_creation_description",{quantity:e(l).quantity})),1)])])])):_("",!0),e(l).creation_mode==="workstation_range"?(i(),c("div",Qr,[t("div",Hr,[n(h,{name:"Monitor",class:"h-4 w-4 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),t("div",Wr,[t("p",Jr,s(e(r)("assets.workstation_creation_notice")),1),t("p",Gr,s(e(r)("assets.workstation_creation_description",{count:e(l).workstation_end-e(l).workstation_start+1,prefix:e(l).workstation_prefix,start:e(l).workstation_start,end:e(l).workstation_end})),1)])])])):_("",!0)]),t("div",Kr,[t("div",Yr,[R(t("input",{id:"send_to_print_station",type:"checkbox","onUpdate:modelValue":a[42]||(a[42]=o=>e(l).send_to_print_station=o),class:"h-4 w-4 rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[st,e(l).send_to_print_station]]),n(e(b),{for:"send_to_print_station",class:"font-medium text-blue-900 dark:text-blue-100"},{default:m(()=>a[55]||(a[55]=[u(" 🖨️ Send to Print Station ",-1)])),_:1,__:[55]})]),a[59]||(a[59]=t("p",{class:"text-sm text-blue-700 dark:text-blue-300 mb-4"}," Automatically send this asset to the print station for label printing after creation. ",-1)),e(l).send_to_print_station?(i(),c("div",Zr,[t("div",el,[n(e(b),{for:"print_priority",class:"text-sm font-medium text-blue-900 dark:text-blue-100"},{default:m(()=>a[56]||(a[56]=[u(" Priority ",-1)])),_:1,__:[56]}),R(t("select",{id:"print_priority","onUpdate:modelValue":a[43]||(a[43]=o=>e(l).print_priority=o),class:"flex h-9 w-full max-w-xs rounded-md border border-blue-300 bg-white dark:bg-blue-900/50 px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},a[57]||(a[57]=[t("option",{value:"low"},"🔵 Low Priority",-1),t("option",{value:"normal"},"⚪ Normal Priority",-1),t("option",{value:"high"},"🟡 High Priority",-1),t("option",{value:"urgent"},"🔴 Urgent",-1)]),512),[[oe,e(l).print_priority]])]),t("div",tl,[n(e(b),{for:"print_comment",class:"text-sm font-medium text-blue-900 dark:text-blue-100"},{default:m(()=>a[58]||(a[58]=[u(" Comment (Optional) ",-1)])),_:1,__:[58]}),R(t("textarea",{id:"print_comment","onUpdate:modelValue":a[44]||(a[44]=o=>e(l).print_comment=o),rows:"2",maxlength:"500",placeholder:"Add a note for the print station operator...",class:"flex w-full rounded-md border border-blue-300 bg-white dark:bg-blue-900/50 px-3 py-2 text-sm ring-offset-background placeholder:text-blue-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 resize-none"},null,512),[[Jt,e(l).print_comment]]),t("div",sl,s(e(l).print_comment.length)+"/500 characters ",1)])])):_("",!0)])])):_("",!0)]}),_:1})]),_:1}),t("div",al,[t("div",ol,[n(e(T),{variant:"outline",asChild:""},{default:m(()=>[n(e(Gt),{href:d.route("assets.index")},{default:m(()=>[n(h,{name:e(ke)==="ar"?"ArrowRight":"ArrowLeft",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"},null,8,["name"]),u(" "+s(e(r)("common.cancel")),1)]),_:1},8,["href"])]),_:1}),V.value>1?(i(),re(e(T),{key:0,variant:"outline",onClick:Et},{default:m(()=>[n(h,{name:e(ke)==="ar"?"ChevronRight":"ChevronLeft",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"},null,8,["name"]),u(" "+s(e(r)("common.previous")),1)]),_:1})):_("",!0)]),t("div",rl,[V.value<he?(i(),re(e(T),{key:0,onClick:Pt,disabled:!Ve.value},{default:m(()=>[u(s(e(r)("common.next"))+" ",1),n(h,{name:e(ke)==="ar"?"ChevronLeft":"ChevronRight",class:"h-4 w-4 ml-2 rtl:ml-0 rtl:mr-2"},null,8,["name"])]),_:1},8,["disabled"])):(i(),re(e(T),{key:1,onClick:Dt,disabled:!Ve.value||e(l).processing},{default:m(()=>[e(l).processing?(i(),re(h,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"})):_("",!0),u(" "+s(e(r)("assets.create_asset")),1)]),_:1},8,["disabled"]))])])]),n(lt,{modelValue:le.value,"onUpdate:modelValue":a[45]||(a[45]=p=>le.value=p),title:"Scan Serial Number",description:"Position the barcode or QR code on the asset within the camera view to scan the serial number automatically. Supports all common barcode formats and QR codes.",onScanned:Mt,onCancel:a[46]||(a[46]=p=>le.value=!1)},null,8,["modelValue"]),n(lt,{modelValue:de.value,"onUpdate:modelValue":a[47]||(a[47]=p=>de.value=p),title:"Take Template Photo",description:"Position the asset within the camera view to take a photo for the template. The image will be automatically resized to under 1.8MB.",onScanned:ht,onCancel:a[48]||(a[48]=p=>de.value=!1),"enable-camera-capture":!0},null,8,["modelValue"]),n(e(qe),{open:pe.value,"onUpdate:open":a[49]||(a[49]=p=>pe.value=p)},{default:m(()=>[n(e(Ie),{class:"sm:max-w-4xl max-h-[90vh] overflow-hidden"},{default:m(()=>{var p,g;return[n(e(Fe),null,{default:m(()=>[n(e(Pe),null,{default:m(()=>[u(s(e(r)("assets.choose_template")),1)]),_:1}),n(e(Ee),null,{default:m(()=>[u(s(e(r)("assets.browse_templates_by_category")),1)]),_:1})]),_:1}),t("div",ll,[xe.value?(i(),c("div",nl,[t("div",il,[n(h,{name:"Loader2",class:"h-8 w-8 animate-spin text-gray-400 mx-auto mb-2"}),t("p",dl,s(e(r)("assets.loading_templates")),1)])])):Object.keys(G.value).length>0?(i(),c("div",cl,[t("div",ul,[t("div",ml,[t("h4",_l,s(e(r)("assets.categories")),1),t("div",pl,[(i(!0),c(U,null,L(G.value,(o,k)=>(i(),c("button",{key:k,onClick:w=>M.value=k,class:S(["w-full text-left px-3 py-2 rounded-md text-sm transition-colors",M.value===k?"bg-primary text-primary-foreground":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"])},[t("div",yl,[t("span",null,s(k),1),t("span",fl,s(o.length),1)])],10,gl))),128))])])]),t("div",vl,[t("div",bl,[t("h4",hl,s(M.value)+" ("+s(((p=G.value[M.value])==null?void 0:p.length)||0)+") ",1),t("div",kl,[(i(!0),c(U,null,L(G.value[M.value],o=>{var k;return i(),c("div",{key:o.id,onClick:w=>vt(o),class:"p-3 border border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer hover:border-primary hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[t("div",wl,s(o.name),1),t("div",Sl,[o.manufacturer?(i(),c("div",Cl,[t("strong",null,s(e(r)("assets.manufacturer"))+":",1),u(" "+s(o.manufacturer),1)])):_("",!0),o.model_name?(i(),c("div",Vl,[t("strong",null,s(e(r)("assets.model"))+":",1),u(" "+s(o.model_name),1)])):_("",!0),o.model_number?(i(),c("div",Ul,[t("strong",null,s(e(r)("assets.model_number"))+":",1),u(" "+s(o.model_number),1)])):_("",!0),t("div",null,[t("strong",null,s(e(r)("assets.scope"))+":",1),o.is_global?(i(),c("span",Tl,s(e(r)("asset_templates.global")),1)):(k=o.company)!=null&&k.name_en?(i(),c("span",$l,s(o.company.name_en),1)):_("",!0)])])],8,xl)}),128))]),((g=G.value[M.value])==null?void 0:g.length)===0?(i(),c("div",Ll,[n(h,{name:"Package",class:"h-12 w-12 text-gray-400 mx-auto mb-3"}),t("p",Rl,s(e(r)("assets.no_templates_in_category")),1)])):_("",!0)])])])):(i(),c("div",jl,[t("div",ql,[n(h,{name:"Package",class:"h-12 w-12 text-gray-400 mx-auto mb-3"}),t("p",Il,s(e(r)("assets.no_templates_available")),1)])]))])]}),_:1})]),_:1},8,["open"])]),_:1},8,["breadcrumbs"])],64))}});export{yn as default};
