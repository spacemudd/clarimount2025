import{d as R,u as Y,p as x,c as Q,C as ee,W as te,a as c,o as u,b as i,e as a,g as se,w as l,f as s,S as b,h as m,t as n,m as F,i as J,l as y,F as w,r as k,v as M,z as ae,D as re}from"./app-S9ih_1iZ.js";import{_ as ie}from"./AppLayout.vue_vue_type_script_setup_true_lang-BjPm6ouM.js";import{_ as v}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BkwCGk-M.js";import{_ as oe}from"./Input.vue_vue_type_script_setup_true_lang--XN-SrOC.js";import{_ as O}from"./Badge.vue_vue_type_script_setup_true_lang-BGRIx6WS.js";import{_ as ne,a as le,b as de,c as ue,d as ce,e as me}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DQTkGLgZ.js";import{_ as T}from"./Label.vue_vue_type_script_setup_true_lang-DXXoz_09.js";import{_ as f}from"./Icon.vue_vue_type_script_setup_true_lang-C2b15LPt.js";import{_ as fe}from"./Heading.vue_vue_type_script_setup_true_lang-BoLWT7gp.js";import"./useForwardExpose-aMQkqgKI.js";import"./RovingFocusGroup-BI2vLEe9.js";import"./building-BtHZKPWV.js";import"./users-B3a-qFrQ.js";import"./activity-Ci7CGTR7.js";import"./arrow-left-WSOQPBnU.js";import"./calendar-CnrZj6zI.js";import"./check-CWBlwEo7.js";import"./chevron-down-BFBiUIHe.js";import"./search-DLcd3yCk.js";import"./eye-Doj1bvph.js";import"./user-eCF9czz5.js";import"./loader-circle-C3gjKniB.js";import"./sun-BLML2IhX.js";import"./play-Dpp1h5hT.js";import"./plus-Bdd_PcC6.js";import"./square-pen-BdKLRZrh.js";import"./trash-2-B2CGvQBI.js";import"./triangle-alert-Bx_wiL7w.js";const pe={class:"space-y-6"},_e={class:"flex items-center justify-between my-2"},ge={class:"flex flex-col sm:flex-row gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},ve={class:"flex-1 relative"},he={class:"absolute inset-y-0 left-0 rtl:left-auto rtl:right-0 pl-3 rtl:pl-0 rtl:pr-3 flex items-center pointer-events-none"},ye={value:""},we=["value"],xe={value:""},be=["value"],Fe={key:0,class:"text-center py-12"},ke={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},Pe={class:"text-gray-600 dark:text-gray-400 mb-6"},Se={key:1,class:"bg-white dark:bg-gray-800 rounded-lg border overflow-hidden"},Ce={class:"overflow-x-auto"},Je={class:"w-full"},Me={class:"bg-gray-50 dark:bg-gray-700"},Ee={class:"text-left rtl:text-right"},De={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},$e={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ie={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ae={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},je={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ne={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Be={class:"px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ve={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Le={class:"px-6 py-4 whitespace-nowrap"},Oe={class:"flex items-center"},Te={class:"flex-shrink-0 h-10 w-10"},We={key:0,class:"h-10 w-10 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600"},Ke=["src","alt"],Ue={key:1,class:"h-10 w-10 rounded-lg bg-gray-300 dark:bg-gray-600 flex items-center justify-center"},ze={class:"ml-4 rtl:ml-0 rtl:mr-4"},He={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},qe={class:"text-sm text-gray-500 dark:text-gray-400"},Xe={class:"px-6 py-4 whitespace-nowrap"},Ze={class:"text-sm text-gray-900 dark:text-gray-100"},Ge={class:"text-sm text-gray-500 dark:text-gray-400"},Re={class:"px-6 py-4 whitespace-nowrap"},Ye={class:"text-sm text-gray-900 dark:text-gray-100"},Qe={class:"text-sm text-gray-500 dark:text-gray-400"},et={class:"px-6 py-4 whitespace-nowrap"},tt={class:"text-sm text-gray-900 dark:text-gray-100"},st={class:"text-sm text-gray-500 dark:text-gray-400"},at={class:"px-6 py-4 whitespace-nowrap"},rt={class:"px-6 py-4 whitespace-nowrap"},it={class:"px-6 py-4 whitespace-nowrap text-right rtl:text-left text-sm font-medium"},ot={class:"flex justify-end rtl:justify-start gap-1"},nt={key:0,class:"block mt-2 font-medium"},lt={class:"space-y-4"},dt={class:"flex items-center space-x-2"},ut={key:0,class:"space-y-2"},ct=["value"],mt={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},Wt=R({__name:"Index",props:{assets:{},categories:{},locations:{},filters:{}},setup(W){var I,A,j;const{t:d}=Y(),P=W,p=x(((I=P.filters)==null?void 0:I.search)||""),_=x(((A=P.filters)==null?void 0:A.category_id)||""),g=x(((j=P.filters)==null?void 0:j.location_id)||""),r=x({show:!1,printing:!1,useDefaultPrinter:!1,selectedPrinter:"",availablePrinters:[],status:"",currentAsset:null}),K=Q(()=>[{title:d("nav.dashboard"),href:"/dashboard"},{title:d("nav.assets"),href:"/assets"}]),U=o=>{switch(o){case"available":return"default";case"assigned":return"secondary";case"maintenance":return"destructive";case"retired":return"outline";default:return"secondary"}};let E;ee([p,_,g],()=>{clearTimeout(E),E=window.setTimeout(()=>{te.get("/assets",{search:p.value||void 0,category_id:_.value||void 0,location_id:g.value||void 0},{preserveState:!0,replace:!0})},300)});const z=()=>{p.value="",_.value="",g.value=""},D=o=>{var t;const e=o.image_path||((t=o.assetTemplate)==null?void 0:t.image_path);return e?`/storage/${e}`:null},H=o=>{const e=o.target;e.style.display="none"},S=o=>new Promise((e,t)=>{if(document.querySelector(`script[src="${o}"]`)){e();return}const h=document.createElement("script");h.src=o,h.onload=()=>e(),h.onerror=()=>t(new Error(`Failed to load script: ${o}`)),document.head.appendChild(h)}),q=async()=>{try{r.value.status="Loading print libraries...",await S("/js/bluebird.min.js"),await S("/js/jquery-3.2.1.slim.min.js"),await S("/js/jsmanager/JSPrintManager.js"),r.value.status="Print libraries loaded successfully"}catch(o){console.error("Failed to load scripts:",o),r.value.status="Failed to load print libraries"}},X=async o=>{r.value.currentAsset=o,r.value.show=!0,typeof window.JSPM>"u"&&await q(),Z()},Z=()=>{re(()=>{typeof window.JSPM<"u"?(window.JSPM.JSPrintManager.auto_reconnect=!0,window.JSPM.JSPrintManager.start(),window.JSPM.JSPrintManager.WS.onStatusChanged=function(){$()&&(r.value.status="Connected to JSPrintManager",window.JSPM.JSPrintManager.getPrinters().then(function(o){r.value.availablePrinters=o}))}):r.value.status="JSPrintManager not loaded"})},$=()=>window.JSPM.JSPrintManager.websocket_status==window.JSPM.WSStatus.Open?!0:window.JSPM.JSPrintManager.websocket_status==window.JSPM.WSStatus.Closed?(r.value.status="JSPrintManager is not installed or not running! Download JSPM Client App from https://neodynamic.com/downloads/jspm",!1):(window.JSPM.JSPrintManager.websocket_status==window.JSPM.WSStatus.Blocked&&(r.value.status="JSPM has blocked this website!"),!1),G=()=>{if(r.value.currentAsset)if($()){r.value.printing=!0;try{const o=new window.JSPM.ClientPrintJob;r.value.useDefaultPrinter?o.clientPrinter=new window.JSPM.DefaultPrinter:o.clientPrinter=new window.JSPM.InstalledPrinter(r.value.selectedPrinter);let e="^XA";e+="^PW406",e+="^LL203",e+="^MD30",e+="^SD15",e+="^FO10,50^GFA,329,329,7,,,,,,K0F1C,J01E3E,I039F1C4,I079E10F,I07BF03E,I073E17E,00213E7FC,00607CFF8,00F87CFF,00F8F9F800C,00FCF8J08,007EF,003E6,03BEK03F,039FK07F,039FK07F,07CFK03F8,008F,I0F8I018,I07J03C,03DK03E68,07FCJ01C7,03FFJ01E7,03FF8I01F3,017FEI09F,I0FE0018F8,0043E003CF8,00F1I03C7C,00F80807C3C,0070700F838,0020F00F008,I03E00F3,I07E01F38,I07C01E78,I03801E3,L01E,L01C,L01,,,,,^FS",e+="^FO70,30^A0N,18,18^FDFAHAD NAWAF ALZEER HOLDING CO.^FS",e+=`^FO70,65^A0N,24,24^FD${r.value.currentAsset.asset_tag}^FS`,e+="^FO70,100^BY2,2,35",e+="^BCN,35,Y,N,N",e+=`^FD${r.value.currentAsset.serial_number||r.value.currentAsset.asset_tag}^FS`,e+="^FO320,50^BQN,2,4",e+=`^FDMM,${r.value.currentAsset.asset_tag}^FS`,e+=`^FO70,175^A0N,18,18^FD${new Date().toISOString().split("T")[0]}^FS`,e+="^XZ",o.printerCommands=e,o.sendToClient(),r.value.status="Print job sent successfully!",setTimeout(()=>{r.value.show=!1,r.value.printing=!1},2e3)}catch(o){console.error("Print error:",o),r.value.status="Error occurred while printing",r.value.printing=!1}}else r.value.printing=!1};return(o,e)=>(u(),c(w,null,[i(a(se),{title:a(d)("assets.title")},null,8,["title"]),i(ie,{breadcrumbs:K.value},{default:l(()=>[s("div",pe,[s("div",_e,[i(fe,{title:a(d)("assets.title")},null,8,["title"]),i(a(v),{asChild:""},{default:l(()=>[i(a(b),{href:o.route("assets.create")},{default:l(()=>[i(f,{name:"Plus",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),m(" "+n(a(d)("assets.create_asset")),1)]),_:1},8,["href"])]),_:1})]),s("div",ge,[s("div",ve,[s("div",he,[i(f,{name:"Search",class:"h-4 w-4 text-gray-400"})]),i(a(oe),{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),placeholder:a(d)("assets.search_placeholder"),class:"w-full pl-10 rtl:pl-3 rtl:pr-10"},null,8,["modelValue","placeholder"])]),F(s("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>_.value=t),class:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s("option",ye,n(a(d)("assets.filter_by_category")),1),(u(!0),c(w,null,k(o.categories,t=>(u(),c("option",{key:t.id,value:t.id},n(t.name),9,we))),128))],512),[[M,_.value]]),F(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>g.value=t),class:"flex h-10 w-full sm:w-48 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s("option",xe,n(a(d)("assets.filter_by_location")),1),(u(!0),c(w,null,k(o.locations,t=>(u(),c("option",{key:t.id,value:t.id},n(`${t.code}: ${t.name}`),9,be))),128))],512),[[M,g.value]]),p.value||_.value||g.value?(u(),J(a(v),{key:0,variant:"ghost",onClick:z},{default:l(()=>[i(f,{name:"X",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),m(" "+n(a(d)("common.clear")),1)]),_:1})):y("",!0)]),o.assets.data.length===0?(u(),c("div",Fe,[i(f,{name:"HardDrive",class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s("h3",ke,n(a(d)("assets.no_assets")),1),s("p",Pe,n(p.value||_.value||g.value?a(d)("assets.no_assets_found"):a(d)("assets.create_first_asset")),1),!p.value&&!_.value&&!g.value?(u(),J(a(v),{key:0,asChild:""},{default:l(()=>[i(a(b),{href:o.route("assets.create")},{default:l(()=>[i(f,{name:"Plus",class:"mr-2 rtl:mr-0 rtl:ml-2 h-4 w-4"}),m(" "+n(a(d)("assets.create_asset")),1)]),_:1},8,["href"])]),_:1})):y("",!0)])):(u(),c("div",Se,[s("div",Ce,[s("table",Je,[s("thead",Me,[s("tr",Ee,[s("th",De,n(a(d)("assets.asset")),1),s("th",$e,n(a(d)("assets.company")),1),s("th",Ie,n(a(d)("assets.category")),1),s("th",Ae,n(a(d)("assets.location")),1),s("th",je,n(a(d)("assets.condition")),1),s("th",Ne,n(a(d)("assets.status")),1),s("th",Be,n(a(d)("common.actions")),1)])]),s("tbody",Ve,[(u(!0),c(w,null,k(o.assets.data,t=>{var C,h,N,B,V,L;return u(),c("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[s("td",Le,[s("div",Oe,[s("div",Te,[D(t)?(u(),c("div",We,[s("img",{src:D(t),alt:t.asset_tag,class:"h-full w-full object-cover",onError:H},null,40,Ke)])):(u(),c("div",Ue,[i(f,{name:"HardDrive",class:"h-5 w-5 text-gray-700 dark:text-gray-300"})]))]),s("div",ze,[s("div",He,n(t.asset_tag),1),s("div",qe,n(t.model_name||t.serial_number||"-"),1)])])]),s("td",Xe,[s("div",Ze,n(((C=t.company)==null?void 0:C.name_en)||"-"),1),s("div",Ge,n(((h=t.company)==null?void 0:h.slug)||"-"),1)]),s("td",Re,[s("div",Ye,n(((N=t.category)==null?void 0:N.name)||"-"),1),s("div",Qe,n(((B=t.category)==null?void 0:B.code)||"-"),1)]),s("td",et,[s("div",tt,n(((V=t.location)==null?void 0:V.name)||"-"),1),s("div",st,n(((L=t.location)==null?void 0:L.code)||"-"),1)]),s("td",at,[i(a(O),{variant:t.condition==="good"?"default":"destructive"},{default:l(()=>[m(n(a(d)(`assets.condition_${t.condition}`)),1)]),_:2},1032,["variant"])]),s("td",rt,[i(a(O),{variant:U(t.status)},{default:l(()=>[m(n(a(d)(`assets.status_${t.status}`)),1)]),_:2},1032,["variant"])]),s("td",it,[s("div",ot,[i(a(v),{variant:"ghost",size:"sm",onClick:ft=>X(t),title:"Print Label"},{default:l(()=>[i(f,{name:"Printer",class:"h-4 w-4"})]),_:2},1032,["onClick"]),i(a(v),{variant:"ghost",size:"sm",asChild:"",title:"View"},{default:l(()=>[i(a(b),{href:o.route("assets.show",t.id)},{default:l(()=>[i(f,{name:"Eye",class:"h-4 w-4"})]),_:2},1032,["href"])]),_:2},1024),i(a(v),{variant:"ghost",size:"sm",asChild:"",title:"Edit"},{default:l(()=>[i(a(b),{href:o.route("assets.edit",t.id)},{default:l(()=>[i(f,{name:"Pencil",class:"h-4 w-4"})]),_:2},1032,["href"])]),_:2},1024)])])])}),128))])])])]))]),i(a(ne),{open:r.value.show,"onUpdate:open":e[6]||(e[6]=t=>r.value.show=t)},{default:l(()=>[i(a(le),{class:"sm:max-w-md"},{default:l(()=>[i(a(de),null,{default:l(()=>[i(a(ue),null,{default:l(()=>e[7]||(e[7]=[m("Print Barcode Label")])),_:1,__:[7]}),i(a(ce),null,{default:l(()=>[e[8]||(e[8]=m(" Configure printer settings for the Zebra label printer. ")),r.value.currentAsset?(u(),c("span",nt," Asset: "+n(r.value.currentAsset.asset_tag),1)):y("",!0)]),_:1,__:[8]})]),_:1}),s("div",lt,[s("div",dt,[F(s("input",{type:"checkbox",id:"useDefaultPrinter","onUpdate:modelValue":e[3]||(e[3]=t=>r.value.useDefaultPrinter=t),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[ae,r.value.useDefaultPrinter]]),i(a(T),{for:"useDefaultPrinter",class:"font-medium"},{default:l(()=>e[9]||(e[9]=[m(" Print to Default printer ")])),_:1,__:[9]})]),r.value.useDefaultPrinter?y("",!0):(u(),c("div",ut,[i(a(T),{for:"installedPrinterName"},{default:l(()=>e[10]||(e[10]=[m("Select an installed Printer:")])),_:1,__:[10]}),F(s("select",{id:"installedPrinterName","onUpdate:modelValue":e[4]||(e[4]=t=>r.value.selectedPrinter=t),class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"},[e[11]||(e[11]=s("option",{value:""},"Select a printer...",-1)),(u(!0),c(w,null,k(r.value.availablePrinters,t=>(u(),c("option",{key:t,value:t},n(t),9,ct))),128))],512),[[M,r.value.selectedPrinter]])])),r.value.status?(u(),c("div",mt," Status: "+n(r.value.status),1)):y("",!0)]),i(a(me),null,{default:l(()=>[i(a(v),{variant:"outline",onClick:e[5]||(e[5]=t=>r.value.show=!1)},{default:l(()=>e[12]||(e[12]=[m(" Cancel ")])),_:1,__:[12]}),i(a(v),{onClick:G,disabled:r.value.printing||!r.value.useDefaultPrinter&&!r.value.selectedPrinter},{default:l(()=>[r.value.printing?(u(),J(f,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 animate-spin"})):y("",!0),e[13]||(e[13]=m(" Print Now "))]),_:1,__:[13]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["breadcrumbs"])],64))}});export{Wt as default};
