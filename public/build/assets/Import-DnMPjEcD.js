import{u as M,q as f,i as z,o as u,w as l,f as t,b as o,e as n,g as d,t as s,l as h,a as p,m as b,n as I,F as y,y as S}from"./app-CxR3Rgxi.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-BJdKCi8B.js";import{_ as m}from"./index-BVKlX1El.js";import{_ as j,a as N}from"./CardContent.vue_vue_type_script_setup_true_lang-CIRecHqL.js";import{_ as T,a as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-BPQ0Tuht.js";import{U as k,I as E,D as U}from"./upload-papkBZbf.js";import{F as G,X as K}from"./x-DHtexKo2.js";import"./useForwardExpose-3NUKWST4.js";import"./building-rc9xLOpA.js";import"./users-C6UN0_C7.js";const O={class:"flex justify-between items-center"},W={class:"text-xl font-semibold text-gray-900 dark:text-white"},X={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},A={class:"py-12"},H={class:"max-w-3xl mx-auto sm:px-6 lg:px-8"},J={class:"text-sm text-gray-600 dark:text-gray-400"},L={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},P={class:"space-y-1 text-center"},Q={class:"flex text-sm text-gray-600 dark:text-gray-400"},R={for:"file-upload",class:"relative cursor-pointer bg-white dark:bg-gray-900 rounded-md font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500"},Y={class:"pl-1"},Z={class:"text-xs text-gray-500 dark:text-gray-400"},ee={key:0,class:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-md"},te={class:"flex items-center justify-between"},ae={class:"flex items-center"},se={class:"text-sm font-medium text-gray-900 dark:text-white"},oe={class:"text-xs text-gray-500 dark:text-gray-400"},ne={key:1,class:"mt-2 text-sm text-red-600 dark:text-red-400"},le={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md"},re={class:"flex items-start"},ie={class:"flex-1"},de={class:"text-sm font-medium text-blue-800 dark:text-blue-200"},ce={class:"mt-1 text-sm text-blue-700 dark:text-blue-300"},ue={class:"mt-3"},me={class:"flex justify-end space-x-3"},$e={__name:"Import",setup(fe){const{t:_}=M(),r=f(null),c=f(!1),g=f(!1),v=f(null),w=e=>{const a=e.target.files[0];a&&a.type==="text/csv"?r.value=a:alert(_("attendance.invalid_file_type"))},$=e=>{e.preventDefault(),g.value=!1;const a=e.dataTransfer.files;if(a.length>0){const i=a[0];i.type==="text/csv"||i.name.endsWith(".csv")?r.value=i:alert(_("attendance.invalid_file_type"))}},F=()=>{r.value=null,v.value&&(v.value.value="")},D=e=>{if(e===0)return"0 Bytes";const a=1024,i=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,x)).toFixed(2))+" "+i[x]},B=()=>{window.location.href=route("attendance.template")},C=()=>{if(!r.value){alert(_("attendance.select_file_first"));return}c.value=!0;const e=new FormData;e.append("file",r.value),S.post(route("attendance.store"),e,{preserveScroll:!0,onFinish:()=>{c.value=!1},onError:()=>{c.value=!1}})};return(e,a)=>(u(),z(V,null,{header:l(()=>[t("div",O,[t("div",null,[t("h2",W,s(e.$t("attendance.import_attendance")),1),t("p",X,s(e.$t("attendance.import_description")),1)]),o(n(m),{onClick:a[0]||(a[0]=i=>e.$inertia.visit(e.route("attendance.index"))),variant:"outline"},{default:l(()=>[d(s(e.$t("common.back")),1)]),_:1})])]),default:l(()=>[t("div",A,[t("div",H,[o(n(j),null,{default:l(()=>[o(n(T),null,{default:l(()=>[o(n(q),null,{default:l(()=>[d(s(e.$t("attendance.upload_csv")),1)]),_:1}),t("p",J,s(e.$t("attendance.file_requirements")),1)]),_:1}),o(n(N),null,{default:l(()=>[t("form",{onSubmit:h(C,["prevent"]),class:"space-y-6"},[t("div",null,[t("label",L,s(e.$t("attendance.upload_csv")),1),t("div",{onDrop:$,onDragover:a[1]||(a[1]=h(()=>{},["prevent"])),onDragenter:a[2]||(a[2]=h(()=>{},["prevent"])),class:I(["mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 dark:border-gray-600 border-dashed rounded-md hover:border-gray-400 dark:hover:border-gray-500 transition-colors",{"border-blue-400 bg-blue-50 dark:bg-blue-900/10":g.value}])},[t("div",P,[o(n(k),{class:"mx-auto h-12 w-12 text-gray-400"}),t("div",Q,[t("label",R,[t("span",null,s(e.$t("attendance.upload_csv")),1),t("input",{id:"file-upload",ref_key:"fileInput",ref:v,name:"file-upload",type:"file",accept:".csv",class:"sr-only",onChange:w},null,544)]),t("p",Y,s(e.$t("common.or_drag_and_drop")),1)]),t("p",Z," CSV "+s(e.$t("common.up_to"))+" 10MB ",1)])],34),r.value?(u(),p("div",ee,[t("div",te,[t("div",ae,[o(n(G),{class:"w-5 h-5 text-gray-400 mr-2"}),t("div",null,[t("p",se,s(r.value.name),1),t("p",oe,s(D(r.value.size)),1)])]),o(n(m),{onClick:F,variant:"ghost",size:"sm"},{default:l(()=>[o(n(K),{class:"w-4 h-4"})]),_:1})])])):b("",!0),e.$page.props.errors.file?(u(),p("div",ne,s(e.$page.props.errors.file),1)):b("",!0)]),t("div",le,[t("div",re,[o(n(E),{class:"w-5 h-5 text-blue-400 mt-0.5 mr-3"}),t("div",ie,[t("h3",de,s(e.$t("attendance.download_template")),1),t("p",ce,s(e.$t("attendance.template_help_text")),1),t("div",ue,[o(n(m),{onClick:B,variant:"outline",size:"sm"},{default:l(()=>[o(n(U),{class:"w-4 h-4 mr-2"}),d(" "+s(e.$t("attendance.download_template")),1)]),_:1})])])])]),t("div",me,[o(n(m),{onClick:a[3]||(a[3]=i=>e.$inertia.visit(e.route("attendance.index"))),type:"button",variant:"outline"},{default:l(()=>[d(s(e.$t("common.cancel")),1)]),_:1}),o(n(m),{type:"submit",disabled:!r.value||c.value},{default:l(()=>[c.value?(u(),p(y,{key:0},[a[4]||(a[4]=t("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},null,-1)),d(" "+s(e.$t("attendance.processing_import")),1)],64)):(u(),p(y,{key:1},[o(n(k),{class:"w-4 h-4 mr-2"}),d(" "+s(e.$t("attendance.import_attendance")),1)],64))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])])]),_:1}))}};export{$e as default};
