import{d as tt,u as st,B as at,p as v,x as ge,c as he,a as i,o as n,b as r,e,g as ot,w as p,f as t,t as s,F as I,r as A,l as m,n as w,h as _,k as be,m as xe,v as ke,i as Z,S as lt,W as rt}from"./app-S9ih_1iZ.js";import{_ as nt}from"./AppLayout.vue_vue_type_script_setup_true_lang-BjPm6ouM.js";import{_ as O}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BkwCGk-M.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang--XN-SrOC.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-DXXoz_09.js";import{_ as it,a as dt}from"./CardContent.vue_vue_type_script_setup_true_lang-WwoK_4uG.js";import{_ as ct}from"./CardDescription.vue_vue_type_script_setup_true_lang-BHZiGkmk.js";import{_ as ut,a as mt}from"./CardTitle.vue_vue_type_script_setup_true_lang-BKHXwA6W.js";import{_ as _t,a as pt,b as vt,c as yt,d as ft,e as gt}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DQTkGLgZ.js";import{_ as ht}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DWGq89jq.js";import{_ as g}from"./Icon.vue_vue_type_script_setup_true_lang-C2b15LPt.js";import{_ as bt}from"./Heading.vue_vue_type_script_setup_true_lang-BoLWT7gp.js";import"./useForwardExpose-aMQkqgKI.js";import"./RovingFocusGroup-BI2vLEe9.js";import"./building-BtHZKPWV.js";import"./users-B3a-qFrQ.js";import"./activity-Ci7CGTR7.js";import"./arrow-left-WSOQPBnU.js";import"./calendar-CnrZj6zI.js";import"./check-CWBlwEo7.js";import"./chevron-down-BFBiUIHe.js";import"./search-DLcd3yCk.js";import"./eye-Doj1bvph.js";import"./user-eCF9czz5.js";import"./loader-circle-C3gjKniB.js";import"./sun-BLML2IhX.js";import"./play-Dpp1h5hT.js";import"./plus-Bdd_PcC6.js";import"./square-pen-BdKLRZrh.js";import"./trash-2-B2CGvQBI.js";import"./triangle-alert-Bx_wiL7w.js";const xt={class:"max-w-4xl mx-auto"},kt={class:"mb-8"},wt={class:"text-gray-600 dark:text-gray-400 mt-2"},St={class:"flex items-center justify-center mb-8"},Ct={class:"flex items-center"},Vt={key:0,class:"space-y-4"},$t={class:"space-y-2"},Tt={class:"flex gap-2"},Rt={class:"flex-1 relative"},Ut={class:"relative"},It={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},Lt={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},Et=["onClick"],jt={class:"font-medium text-sm"},Ft={class:"text-xs text-gray-500 dark:text-gray-400"},Bt={key:0},Dt={key:1,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg px-3 py-2"},qt={class:"text-sm text-gray-500 dark:text-gray-400"},zt={class:"space-y-2"},Xt=["disabled"],Nt={value:""},At=["value"],Ot={key:0,class:"text-sm text-red-600 dark:text-red-400"},Qt={class:"grid grid-cols-2 gap-4"},Wt={class:"space-y-2"},Mt={class:"space-y-2"},Pt={class:"text-sm text-muted-foreground"},Gt={class:"grid grid-cols-2 gap-4"},Ht={class:"space-y-2"},Jt={class:"space-y-2"},Kt={class:"space-y-2"},Yt={class:"grid grid-cols-2 gap-4"},Zt={class:"space-y-2"},es={class:"space-y-2"},ts={class:"grid grid-cols-2 gap-4"},ss={class:"space-y-2"},as={class:"space-y-2"},os={key:0,class:"text-sm text-red-600 dark:text-red-400"},ls={key:1,class:"space-y-6"},rs={class:"space-y-2"},ns={class:"relative"},is={class:"relative"},ds={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},cs={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},us=["onClick"],ms={class:"font-medium text-sm"},_s={class:"text-xs text-gray-500 dark:text-gray-400"},ps={key:0},vs={key:1},ys={key:2},fs={key:3},gs={key:1,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg px-3 py-2"},hs={class:"text-sm text-gray-500 dark:text-gray-400"},bs={key:0,class:"text-sm text-red-600 dark:text-red-400"},xs={class:"space-y-2"},ks={class:"text-sm text-muted-foreground"},ws={key:0,class:"text-sm text-red-600 dark:text-red-400"},Ss={class:"space-y-2"},Cs={value:"good"},Vs={value:"damaged"},$s={key:0,class:"text-sm text-red-600 dark:text-red-400"},Ts={class:"space-y-6 border-t pt-6"},Rs={class:"font-medium text-gray-900 dark:text-gray-100"},Us={class:"space-y-2"},Is={class:"relative"},Ls={class:"relative"},Es={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},js={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},Fs=["onClick"],Bs={class:"font-medium text-sm"},Ds={class:"text-xs text-gray-500 dark:text-gray-400"},qs={class:"text-sm text-muted-foreground"},zs={key:0,class:"text-sm text-red-600 dark:text-red-400"},Xs={class:"space-y-2"},Ns={class:"relative"},As={class:"relative"},Os={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},Qs={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},Ws=["onClick"],Ms={class:"font-medium text-sm"},Ps={class:"text-xs text-gray-500 dark:text-gray-400"},Gs={key:0},Hs={class:"text-sm text-muted-foreground"},Js={key:0,class:"text-sm text-red-600 dark:text-red-400"},Ks={class:"space-y-2"},Ys={class:"relative"},Zs={class:"relative"},ea={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},ta={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},sa=["onClick"],aa={class:"font-medium text-sm"},oa={class:"text-xs text-gray-500 dark:text-gray-400"},la={key:0},ra={key:1},na={class:"text-sm text-muted-foreground"},ia={key:0,class:"text-sm text-red-600 dark:text-red-400"},da={key:0,class:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},ca={class:"font-medium text-gray-900 dark:text-gray-100 mb-2"},ua={class:"space-y-1 text-sm"},ma={key:0},_a={key:1},pa={key:2},va={key:2,class:"space-y-6"},ya={class:"space-y-4"},fa={class:"space-y-2"},ga={class:"flex items-center justify-center w-full"},ha={key:0,class:"flex flex-col items-center justify-center pt-5 pb-6"},ba={class:"mb-2 text-sm text-gray-500 dark:text-gray-400"},xa={class:"font-semibold"},ka={class:"text-xs text-gray-500 dark:text-gray-400"},wa={key:1,class:"relative w-full h-full"},Sa=["src"],Ca={key:0,class:"text-sm text-red-600 dark:text-red-400"},Va={class:"text-sm text-muted-foreground"},$a={class:"mt-8 p-6 bg-gray-50 dark:bg-gray-800 rounded-lg"},Ta={class:"font-medium text-gray-900 dark:text-gray-100 mb-4"},Ra={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Ua={class:"flex justify-between mt-8"},Ia={class:"flex gap-2"},La={class:"flex gap-2"},ae=3,mo=tt({__name:"Create",props:{companies:{},currentCompany:{},categories:{},locations:{}},setup(we){var ye,fe;const{t:l}=st(),L=we;at();const Se=()=>{var o;return((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||""},b=v(1),ee=v(!1),C=v(""),E=v([]),te=v(!1),V=v(!1),$=v(null),T=v(""),j=v([]),se=v(!1),R=v(!1),h=v(null),F=v(""),Q=v([]),oe=v(!1),B=v(!1),U=v(null),D=v(""),W=v([]),le=v(!1),q=v(!1),M=v(null),z=v(""),P=v([]),re=v(!1),X=v(!1),G=v(null),H=v(null),J=v(null),N=v(null),u=ge({location_id:"",asset_template_id:"",company_id:((ye=L.currentCompany)==null?void 0:ye.id)||"",department_id:"",assigned_to:"",serial_number:"",condition:"good",image:null}),c=ge({company_id:((fe=L.currentCompany)==null?void 0:fe.id)||(L.companies.length===1?L.companies[0].id:""),name:"",building:"",office_number:"",address:"",city:"",state:"",postal_code:"",country:""}),Ce=he(()=>[{title:l("nav.dashboard"),href:"/dashboard"},{title:l("nav.assets"),href:"/assets"},{title:l("assets.create_asset"),href:"/assets/create"}]),ne=he(()=>{switch(b.value){case 1:return $.value!==null;case 2:return h.value!==null;case 3:return!0;default:return!1}});let de;const Ve=async()=>{if(C.value.length<2){E.value=[],V.value=!1;return}te.value=!0;try{const o=await(await fetch(`/api/locations/search?q=${encodeURIComponent(C.value)}`)).json();E.value=o,V.value=!0}catch(d){console.error("Location search failed:",d),E.value=[]}finally{te.value=!1}},$e=()=>{clearTimeout(de),de=window.setTimeout(Ve,300)},ce=d=>{$.value=d,u.location_id=d.id.toString(),C.value=d.display_name,V.value=!1},Te=()=>{$.value=null,u.location_id="",C.value="",E.value=[],V.value=!1},Re=()=>{setTimeout(()=>{V.value=!1},200)};let ue;const Ue=async()=>{if(T.value.length<2){j.value=[],R.value=!1;return}se.value=!0;try{const o=await(await fetch(`/api/asset-templates/search?q=${encodeURIComponent(T.value)}`)).json();j.value=o,R.value=!0}catch(d){console.error("Template search failed:",d),j.value=[]}finally{se.value=!1}},Ie=()=>{clearTimeout(ue),ue=window.setTimeout(Ue,300)},Le=d=>{h.value=d,u.asset_template_id=d.id.toString(),T.value=d.display_name,R.value=!1},Ee=()=>{h.value=null,u.asset_template_id="",T.value="",j.value=[],R.value=!1},je=()=>{setTimeout(()=>{R.value=!1},200)};let me;const Fe=async()=>{if(F.value.length<2){Q.value=[],B.value=!1;return}oe.value=!0;try{const o=await(await fetch(`/api/companies/search?q=${encodeURIComponent(F.value)}`)).json();Q.value=o,B.value=!0}catch(d){console.error("Company search failed:",d),Q.value=[]}finally{oe.value=!1}},Be=()=>{clearTimeout(me),me=window.setTimeout(Fe,300)},De=d=>{U.value=d,u.company_id=d.id.toString(),F.value=d.display_name,B.value=!1,ie(),K()},qe=()=>{var d;U.value=null,u.company_id=((d=L.currentCompany)==null?void 0:d.id)||"",F.value="",Q.value=[],B.value=!1,ie(),K()},ze=()=>{setTimeout(()=>{B.value=!1},200)};let _e;const Xe=async()=>{var d,o;if(D.value.length<2){W.value=[],q.value=!1;return}le.value=!0;try{const y=((d=U.value)==null?void 0:d.id)||((o=L.currentCompany)==null?void 0:o.id),a=await(await fetch(`/api/departments/search?q=${encodeURIComponent(D.value)}&company_id=${y}`)).json();W.value=a,q.value=!0}catch(y){console.error("Department search failed:",y),W.value=[]}finally{le.value=!1}},Ne=()=>{clearTimeout(_e),_e=window.setTimeout(Xe,300)},Ae=d=>{M.value=d,u.department_id=d.id,D.value=d.display_name,q.value=!1,K()},ie=()=>{M.value=null,u.department_id="",D.value="",W.value=[],q.value=!1,K()},Oe=()=>{setTimeout(()=>{q.value=!1},200)};let pe;const Qe=async()=>{var d,o;if(z.value.length<2){P.value=[],X.value=!1;return}re.value=!0;try{const y=((d=U.value)==null?void 0:d.id)||((o=L.currentCompany)==null?void 0:o.id),k=`/api/employees/search?q=${encodeURIComponent(z.value)}&company_id=${y}`,S=await(await fetch(k)).json();P.value=S,X.value=!0}catch(y){console.error("Employee search failed:",y),P.value=[]}finally{re.value=!1}},We=()=>{clearTimeout(pe),pe=window.setTimeout(Qe,300)},Me=d=>{G.value=d,u.assigned_to=d.id.toString(),z.value=d.display_name,X.value=!1},K=()=>{G.value=null,u.assigned_to="",z.value="",P.value=[],X.value=!1},Pe=()=>{setTimeout(()=>{X.value=!1},200)},Ge=d=>{var a;const y=(a=d.target.files)==null?void 0:a[0];if(!y){H.value=null,J.value=null,u.image=null;return}if(!y.type.startsWith("image/")){N.value=l("assets.invalid_file_type");return}if(y.size>5*1024*1024){N.value=l("assets.file_too_large");return}N.value=null,H.value=y,u.image=y;const k=new FileReader;k.onload=S=>{var Y;J.value=(Y=S.target)==null?void 0:Y.result},k.readAsDataURL(y)},He=()=>{H.value=null,J.value=null,N.value=null,u.image=null;const d=document.getElementById("asset_image");d&&(d.value="")},Je=()=>{ne.value&&b.value<ae&&b.value++},Ke=()=>{b.value>1&&b.value--},ve=async()=>{c.processing=!0,c.clearErrors();try{const d=await fetch("/locations",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":Se()},body:JSON.stringify({company_id:c.company_id,name:c.name,building:c.building,office_number:c.office_number,address:c.address,city:c.city,state:c.state,postal_code:c.postal_code,country:c.country,_from_modal:!0})}),o=await d.json();if(d.ok&&o.success){ee.value=!1,c.reset();const y={id:o.location.id,name:o.location.name,code:o.location.code,building:o.location.building,office_number:o.location.office_number,address:o.location.address,city:o.location.city,company_name:o.location.company.name_en,display_name:`${o.location.code}: ${o.location.name}`+(o.location.building?` - Building ${o.location.building}`:"")+(o.location.office_number?` - Office ${o.location.office_number}`:""),full_address:[o.location.address,o.location.city].filter(Boolean).join(", ")};ce(y)}else if(o.errors){const y=["company_id","name","building","office_number","address","city","state","postal_code","country"];Object.keys(o.errors).forEach(k=>{y.includes(k)&&c.setError(k,o.errors[k][0])})}else console.error("Failed to create location:",o)}catch(d){console.error("Error creating location:",d),c.setError("name","An error occurred while creating the location.")}finally{c.processing=!1}},Ye=()=>{u.post("/assets",{onSuccess:()=>{rt.visit("/assets")},onError:()=>{}})},Ze=d=>d<b.value?"bg-primary text-primary-foreground":d===b.value?"bg-primary text-primary-foreground ring-2 ring-primary ring-offset-2":"bg-muted text-muted-foreground",et=d=>d<b.value?"bg-primary":"bg-muted";return(d,o)=>(n(),i(I,null,[r(e(ot),{title:e(l)("assets.create_asset")},null,8,["title"]),r(nt,{breadcrumbs:Ce.value},{default:p(()=>[t("div",xt,[t("div",kt,[r(bt,{title:e(l)("assets.create_asset")},null,8,["title"]),t("p",wt,s(e(l)("assets.create_asset_description")),1)]),t("div",St,[t("div",Ct,[(n(),i(I,null,A(ae,y=>t("div",{key:y,class:"flex items-center"},[t("div",{class:w([Ze(y),"w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium transition-colors"])},s(y),3),y<ae?(n(),i("div",{key:0,class:w([et(y),"w-16 h-1 mx-4 transition-colors"])},null,2)):m("",!0)])),64))])]),r(e(it),null,{default:p(()=>[r(e(ut),null,{default:p(()=>[r(e(mt),null,{default:p(()=>[_(s(e(l)(`assets.step_${b.value}_title`)),1)]),_:1}),r(e(ct),null,{default:p(()=>[_(s(e(l)(`assets.step_${b.value}_description`)),1)]),_:1})]),_:1}),r(e(dt),{class:"space-y-6"},{default:p(()=>{var y,k;return[b.value===1?(n(),i("div",Vt,[t("div",$t,[r(e(f),{for:"location_search"},{default:p(()=>[_(s(e(l)("assets.location"))+" *",1)]),_:1}),t("div",Tt,[t("div",Rt,[t("div",Ut,[r(e(x),{id:"location_search",modelValue:C.value,"onUpdate:modelValue":o[0]||(o[0]=a=>C.value=a),type:"text",placeholder:$.value?$.value.display_name:e(l)("assets.search_location_placeholder"),onInput:$e,onFocus:o[1]||(o[1]=a=>C.value.length>=2&&(V.value=!0)),onBlur:Re,class:w({"border-red-500":e(u).errors.location_id}),disabled:$.value!==null},null,8,["modelValue","placeholder","class","disabled"]),$.value?(n(),i("button",{key:0,type:"button",onClick:Te,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r(g,{name:"X",class:"h-4 w-4"})])):m("",!0),te.value?(n(),i("div",It,[r(g,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):m("",!0)]),V.value&&E.value.length>0?(n(),i("div",Lt,[(n(!0),i(I,null,A(E.value,a=>(n(),i("div",{key:a.id,onClick:S=>ce(a),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",jt,s(a.display_name),1),t("div",Ft,[_(s(a.company_name)+" ",1),a.full_address?(n(),i("span",Bt," • "+s(a.full_address),1)):m("",!0)])],8,Et))),128))])):m("",!0),V.value&&E.value.length===0&&!te.value&&C.value.length>=2?(n(),i("div",Dt,[t("div",qt,s(e(l)("assets.no_locations_found")),1)])):m("",!0)]),r(e(_t),{open:ee.value,"onUpdate:open":o[12]||(o[12]=a=>ee.value=a)},{default:p(()=>[r(e(ht),{asChild:""},{default:p(()=>[r(e(O),{variant:"outline",type:"button"},{default:p(()=>[r(g,{name:"Plus",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),_(" "+s(e(l)("locations.create_location")),1)]),_:1})]),_:1}),r(e(pt),{class:"sm:max-w-lg"},{default:p(()=>[r(e(vt),null,{default:p(()=>[r(e(yt),null,{default:p(()=>[_(s(e(l)("locations.create_location")),1)]),_:1}),r(e(ft),null,{default:p(()=>[_(s(e(l)("locations.create_location_description")),1)]),_:1})]),_:1}),t("form",{onSubmit:be(ve,["prevent"]),class:"space-y-4"},[t("div",zt,[r(e(f),{for:"location_company_id"},{default:p(()=>[_(s(e(l)("locations.company"))+" *",1)]),_:1}),xe(t("select",{id:"location_company_id","onUpdate:modelValue":o[2]||(o[2]=a=>e(c).company_id=a),class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(c).errors.company_id}]),disabled:e(c).processing,required:""},[t("option",Nt,s(e(l)("locations.select_company")),1),(n(!0),i(I,null,A(d.companies,a=>(n(),i("option",{key:a.id,value:a.id},s(a.name_en)+" "+s(a.name_ar?`(${a.name_ar})`:""),9,At))),128))],10,Xt),[[ke,e(c).company_id]]),e(c).errors.company_id?(n(),i("div",Ot,s(e(c).errors.company_id),1)):m("",!0)]),t("div",Qt,[t("div",Wt,[r(e(f),{for:"location_name"},{default:p(()=>[_(s(e(l)("locations.name"))+" *",1)]),_:1}),r(e(x),{id:"location_name",modelValue:e(c).name,"onUpdate:modelValue":o[3]||(o[3]=a=>e(c).name=a),error:e(c).errors.name,required:""},null,8,["modelValue","error"])]),t("div",Mt,[r(e(f),{for:"location_code"},{default:p(()=>[_(s(e(l)("locations.code")),1)]),_:1}),r(e(x),{id:"location_code",type:"text",placeholder:e(l)("locations.code_auto_generated"),disabled:"",class:"bg-muted"},null,8,["placeholder"]),t("p",Pt,s(e(l)("locations.code_auto_generated")),1)])]),t("div",Gt,[t("div",Ht,[r(e(f),{for:"location_building"},{default:p(()=>[_(s(e(l)("locations.building")),1)]),_:1}),r(e(x),{id:"location_building",modelValue:e(c).building,"onUpdate:modelValue":o[4]||(o[4]=a=>e(c).building=a),error:e(c).errors.building},null,8,["modelValue","error"])]),t("div",Jt,[r(e(f),{for:"location_office_number"},{default:p(()=>[_(s(e(l)("locations.office_number")),1)]),_:1}),r(e(x),{id:"location_office_number",modelValue:e(c).office_number,"onUpdate:modelValue":o[5]||(o[5]=a=>e(c).office_number=a),error:e(c).errors.office_number},null,8,["modelValue","error"])])]),t("div",Kt,[r(e(f),{for:"location_address"},{default:p(()=>[_(s(e(l)("locations.address")),1)]),_:1}),r(e(x),{id:"location_address",modelValue:e(c).address,"onUpdate:modelValue":o[6]||(o[6]=a=>e(c).address=a),error:e(c).errors.address},null,8,["modelValue","error"])]),t("div",Yt,[t("div",Zt,[r(e(f),{for:"location_city"},{default:p(()=>[_(s(e(l)("locations.city")),1)]),_:1}),r(e(x),{id:"location_city",modelValue:e(c).city,"onUpdate:modelValue":o[7]||(o[7]=a=>e(c).city=a),error:e(c).errors.city},null,8,["modelValue","error"])]),t("div",es,[r(e(f),{for:"location_state"},{default:p(()=>[_(s(e(l)("locations.state")),1)]),_:1}),r(e(x),{id:"location_state",modelValue:e(c).state,"onUpdate:modelValue":o[8]||(o[8]=a=>e(c).state=a),error:e(c).errors.state},null,8,["modelValue","error"])])]),t("div",ts,[t("div",ss,[r(e(f),{for:"location_postal_code"},{default:p(()=>[_(s(e(l)("locations.postal_code")),1)]),_:1}),r(e(x),{id:"location_postal_code",modelValue:e(c).postal_code,"onUpdate:modelValue":o[9]||(o[9]=a=>e(c).postal_code=a),error:e(c).errors.postal_code},null,8,["modelValue","error"])]),t("div",as,[r(e(f),{for:"location_country"},{default:p(()=>[_(s(e(l)("locations.country")),1)]),_:1}),r(e(x),{id:"location_country",modelValue:e(c).country,"onUpdate:modelValue":o[10]||(o[10]=a=>e(c).country=a),error:e(c).errors.country},null,8,["modelValue","error"])])])],32),r(e(gt),null,{default:p(()=>[r(e(O),{variant:"outline",onClick:o[11]||(o[11]=a=>ee.value=!1),type:"button"},{default:p(()=>[_(s(e(l)("common.cancel")),1)]),_:1}),r(e(O),{onClick:ve,disabled:e(c).processing},{default:p(()=>[e(c).processing?(n(),Z(g,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"})):m("",!0),_(" "+s(e(l)("common.create")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),e(u).errors.location_id?(n(),i("div",os,s(e(u).errors.location_id),1)):m("",!0)])])):b.value===2?(n(),i("div",ls,[t("div",rs,[r(e(f),{for:"template_search"},{default:p(()=>[_(s(e(l)("assets.template"))+" *",1)]),_:1}),t("div",ns,[t("div",is,[r(e(x),{id:"template_search",modelValue:T.value,"onUpdate:modelValue":o[13]||(o[13]=a=>T.value=a),type:"text",placeholder:h.value?h.value.display_name:e(l)("assets.search_template_placeholder"),onInput:Ie,onFocus:o[14]||(o[14]=a=>T.value.length>=2&&(R.value=!0)),onBlur:je,class:w({"border-red-500":e(u).errors.asset_template_id}),disabled:h.value!==null},null,8,["modelValue","placeholder","class","disabled"]),h.value?(n(),i("button",{key:0,type:"button",onClick:Ee,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r(g,{name:"X",class:"h-4 w-4"})])):m("",!0),se.value?(n(),i("div",ds,[r(g,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):m("",!0)]),R.value&&j.value.length>0?(n(),i("div",cs,[(n(!0),i(I,null,A(j.value,a=>{var S,Y;return n(),i("div",{key:a.id,onClick:Ea=>Le(a),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",ms,s(a.display_name),1),t("div",_s,[a.category_name?(n(),i("span",ps,s(a.category_name),1)):m("",!0),a.category_name&&((S=a.company)!=null&&S.name_en||a.is_global)?(n(),i("span",vs," • ")):m("",!0),a.is_global?(n(),i("span",ys,s(e(l)("asset_templates.global")),1)):(Y=a.company)!=null&&Y.name_en?(n(),i("span",fs,s(a.company.name_en),1)):m("",!0)])],8,us)}),128))])):m("",!0),R.value&&j.value.length===0&&!se.value&&T.value.length>=2?(n(),i("div",gs,[t("div",hs,s(e(l)("assets.no_templates_found")),1)])):m("",!0)]),e(u).errors.asset_template_id?(n(),i("div",bs,s(e(u).errors.asset_template_id),1)):m("",!0)]),t("div",xs,[r(e(f),{for:"serial_number"},{default:p(()=>[_(s(e(l)("assets.serial_number")),1)]),_:1}),r(e(x),{id:"serial_number",modelValue:e(u).serial_number,"onUpdate:modelValue":o[15]||(o[15]=a=>e(u).serial_number=a),type:"text",placeholder:e(l)("assets.serial_number_placeholder"),class:w({"border-red-500":e(u).errors.serial_number})},null,8,["modelValue","placeholder","class"]),t("p",ks,s(e(l)("assets.serial_number_optional")),1),e(u).errors.serial_number?(n(),i("div",ws,s(e(u).errors.serial_number),1)):m("",!0)]),t("div",Ss,[r(e(f),{for:"condition"},{default:p(()=>[_(s(e(l)("assets.condition"))+" *",1)]),_:1}),xe(t("select",{id:"condition","onUpdate:modelValue":o[16]||(o[16]=a=>e(u).condition=a),class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(u).errors.condition}]),required:""},[t("option",Cs,s(e(l)("assets.condition_good")),1),t("option",Vs,s(e(l)("assets.condition_damaged")),1)],2),[[ke,e(u).condition]]),e(u).errors.condition?(n(),i("div",$s,s(e(u).errors.condition),1)):m("",!0)]),t("div",Ts,[t("h4",Rs,s(e(l)("assets.assignment_details")),1),t("div",Us,[r(e(f),{for:"company_search"},{default:p(()=>[_(s(e(l)("assets.company")),1)]),_:1}),t("div",Is,[t("div",Ls,[r(e(x),{id:"company_search",modelValue:F.value,"onUpdate:modelValue":o[17]||(o[17]=a=>F.value=a),type:"text",placeholder:U.value?U.value.display_name:e(l)("assets.search_company_placeholder"),onInput:Be,onFocus:o[18]||(o[18]=a=>F.value.length>=2&&(B.value=!0)),onBlur:ze,class:w({"border-red-500":e(u).errors.company_id}),disabled:U.value!==null},null,8,["modelValue","placeholder","class","disabled"]),U.value?(n(),i("button",{key:0,type:"button",onClick:qe,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r(g,{name:"X",class:"h-4 w-4"})])):m("",!0),oe.value?(n(),i("div",Es,[r(g,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):m("",!0)]),B.value&&Q.value.length>0?(n(),i("div",js,[(n(!0),i(I,null,A(Q.value,a=>(n(),i("div",{key:a.id,onClick:S=>De(a),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",Bs,s(a.display_name),1),t("div",Ds,s(a.company_email),1)],8,Fs))),128))])):m("",!0)]),t("p",qs,s(e(l)("assets.company_optional")),1),e(u).errors.company_id?(n(),i("div",zs,s(e(u).errors.company_id),1)):m("",!0)]),t("div",Xs,[r(e(f),{for:"department_search"},{default:p(()=>[_(s(e(l)("assets.department")),1)]),_:1}),t("div",Ns,[t("div",As,[r(e(x),{id:"department_search",modelValue:D.value,"onUpdate:modelValue":o[19]||(o[19]=a=>D.value=a),type:"text",placeholder:M.value?M.value.display_name:e(l)("assets.search_department_placeholder"),onInput:Ne,onFocus:o[20]||(o[20]=a=>D.value.length>=2&&(q.value=!0)),onBlur:Oe,class:w({"border-red-500":e(u).errors.department_id}),disabled:M.value!==null},null,8,["modelValue","placeholder","class","disabled"]),M.value?(n(),i("button",{key:0,type:"button",onClick:ie,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r(g,{name:"X",class:"h-4 w-4"})])):m("",!0),le.value?(n(),i("div",Os,[r(g,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):m("",!0)]),q.value&&W.value.length>0?(n(),i("div",Qs,[(n(!0),i(I,null,A(W.value,a=>(n(),i("div",{key:a.id,onClick:S=>Ae(a),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",Ms,s(a.display_name),1),t("div",Ps,[_(s(a.company_name)+" ",1),a.description?(n(),i("span",Gs," • "+s(a.description),1)):m("",!0)])],8,Ws))),128))])):m("",!0)]),t("p",Hs,s(e(l)("assets.department_optional")),1),e(u).errors.department_id?(n(),i("div",Js,s(e(u).errors.department_id),1)):m("",!0)]),t("div",Ks,[r(e(f),{for:"employee_search"},{default:p(()=>[_(s(e(l)("assets.assign_to_employee")),1)]),_:1}),t("div",Ys,[t("div",Zs,[r(e(x),{id:"employee_search",modelValue:z.value,"onUpdate:modelValue":o[21]||(o[21]=a=>z.value=a),type:"text",placeholder:G.value?G.value.display_name:e(l)("assets.search_employee_placeholder"),onInput:We,onFocus:o[22]||(o[22]=a=>z.value.length>=2&&(X.value=!0)),onBlur:Pe,class:w({"border-red-500":e(u).errors.assigned_to}),disabled:G.value!==null},null,8,["modelValue","placeholder","class","disabled"]),G.value?(n(),i("button",{key:0,type:"button",onClick:K,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r(g,{name:"X",class:"h-4 w-4"})])):m("",!0),re.value?(n(),i("div",ea,[r(g,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):m("",!0)]),X.value&&P.value.length>0?(n(),i("div",ta,[(n(!0),i(I,null,A(P.value,a=>(n(),i("div",{key:a.id,onClick:S=>Me(a),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",aa,s(a.display_name),1),t("div",oa,[_(s(a.email)+" ",1),a.department?(n(),i("span",la," • "+s(a.department),1)):m("",!0),a.company_name?(n(),i("span",ra," • "+s(a.company_name),1)):m("",!0)])],8,sa))),128))])):m("",!0)]),t("p",na,s(e(l)("assets.assign_to_employee_optional")),1),e(u).errors.assigned_to?(n(),i("div",ia,s(e(u).errors.assigned_to),1)):m("",!0)])]),h.value?(n(),i("div",da,[t("h4",ca,s(e(l)("assets.selected_template")),1),t("div",ua,[t("div",null,[t("strong",null,s(e(l)("assets.name"))+":",1),_(" "+s(h.value.name),1)]),h.value.manufacturer?(n(),i("div",ma,[t("strong",null,s(e(l)("assets.manufacturer"))+":",1),_(" "+s(h.value.manufacturer),1)])):m("",!0),h.value.model_name?(n(),i("div",_a,[t("strong",null,s(e(l)("assets.model"))+":",1),_(" "+s(h.value.model_name),1)])):m("",!0),h.value.asset_category?(n(),i("div",pa,[t("strong",null,s(e(l)("assets.category"))+":",1),_(" "+s(h.value.asset_category.name),1)])):m("",!0)])])):m("",!0)])):b.value===3?(n(),i("div",va,[t("div",ya,[t("div",fa,[r(e(f),{for:"asset_image"},{default:p(()=>[_(s(e(l)("assets.image")),1)]),_:1}),t("div",ga,[t("label",{for:"asset_image",class:w(["flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-gray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500",{"border-red-500":N.value}])},[J.value?(n(),i("div",wa,[t("img",{src:J.value,alt:"Asset preview",class:"w-full h-full object-contain rounded-lg"},null,8,Sa),t("button",{type:"button",onClick:be(He,["prevent"]),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors"},[r(g,{name:"X",class:"h-4 w-4"})])])):(n(),i("div",ha,[r(g,{name:"Upload",class:"w-10 h-10 mb-3 text-gray-400"}),t("p",ba,[t("span",xa,s(e(l)("assets.click_to_upload")),1),_(" "+s(e(l)("assets.or_drag_and_drop")),1)]),t("p",ka,s(e(l)("assets.supported_formats")),1)])),t("input",{id:"asset_image",type:"file",accept:"image/*",onChange:Ge,class:"hidden"},null,32)],2)]),N.value?(n(),i("div",Ca,s(N.value),1)):m("",!0),t("p",Va,s(e(l)("assets.image_optional")),1)])]),t("div",$a,[t("h4",Ta,s(e(l)("assets.review_asset")),1),t("div",Ra,[t("div",null,[t("strong",null,s(e(l)("assets.location"))+":",1),_(" "+s(((y=$.value)==null?void 0:y.display_name)||"—"),1)]),t("div",null,[t("strong",null,s(e(l)("assets.template"))+":",1),_(" "+s(((k=h.value)==null?void 0:k.display_name)||"—"),1)]),t("div",null,[t("strong",null,s(e(l)("assets.serial_number"))+":",1),_(" "+s(e(u).serial_number||e(l)("assets.not_provided")),1)]),t("div",null,[t("strong",null,s(e(l)("assets.condition"))+":",1),_(" "+s(e(u).condition==="good"?e(l)("assets.condition_good"):e(l)("assets.condition_damaged")),1)]),t("div",null,[t("strong",null,s(e(l)("assets.image"))+":",1),_(" "+s(H.value?H.value.name:e(l)("assets.not_provided")),1)])])])])):m("",!0)]}),_:1})]),_:1}),t("div",Ua,[t("div",Ia,[r(e(O),{variant:"outline",asChild:""},{default:p(()=>[r(e(lt),{href:d.route("assets.index")},{default:p(()=>[r(g,{name:"ArrowLeft",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),_(" "+s(e(l)("common.cancel")),1)]),_:1},8,["href"])]),_:1}),b.value>1?(n(),Z(e(O),{key:0,variant:"outline",onClick:Ke},{default:p(()=>[r(g,{name:"ChevronLeft",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),_(" "+s(e(l)("common.previous")),1)]),_:1})):m("",!0)]),t("div",La,[b.value<ae?(n(),Z(e(O),{key:0,onClick:Je,disabled:!ne.value},{default:p(()=>[_(s(e(l)("common.next"))+" ",1),r(g,{name:"ChevronRight",class:"h-4 w-4 ml-2 rtl:ml-0 rtl:mr-2"})]),_:1},8,["disabled"])):(n(),Z(e(O),{key:1,onClick:Ye,disabled:!ne.value||e(u).processing},{default:p(()=>[e(u).processing?(n(),Z(g,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"})):m("",!0),_(" "+s(e(l)("assets.create_asset")),1)]),_:1},8,["disabled"]))])])])]),_:1},8,["breadcrumbs"])],64))}});export{mo as default};
