import{u as L,q as h,M as A,i as _,o as i,w as n,f as e,b as o,m as f,e as s,g as d,t as a,l as H,a as m,j as I,p as K,H as G,F as v,y as k}from"./app-CxR3Rgxi.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-BJdKCi8B.js";import{_ as x}from"./index-BVKlX1El.js";import{_ as N}from"./Input.vue_vue_type_script_setup_true_lang-DXd3euAp.js";import{_ as P}from"./Select.vue_vue_type_script_setup_true_lang-cGpPB3id.js";import{_ as z,a as $}from"./CardContent.vue_vue_type_script_setup_true_lang-CIRecHqL.js";import{_ as B}from"./CardDescription.vue_vue_type_script_setup_true_lang-_FHY3Eph.js";import{_ as w,a as S}from"./CardTitle.vue_vue_type_script_setup_true_lang-BPQ0Tuht.js";import{E as Q,S as R}from"./save-BdMXzmsw.js";import{E as W}from"./eye-BMzTKKjF.js";import{C as X}from"./clock-vNtPzlSW.js";import{T as Y}from"./trash-2-mxqlWjR9.js";import{S as Z}from"./x-DHtexKo2.js";import"./useForwardExpose-3NUKWST4.js";import"./building-rc9xLOpA.js";import"./users-C6UN0_C7.js";import"./chevron-down-D8K61LsM.js";const tt={class:"flex justify-between items-center"},et={class:"text-xl font-semibold text-gray-900 dark:text-white"},at={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},st={class:"flex space-x-3"},ot={class:"py-12"},nt={class:"max-w-4xl mx-auto sm:px-6 lg:px-8 space-y-8"},lt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},rt={class:"relative"},it={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},dt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ct={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},yt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ut={value:"manual"},mt={value:"hourly"},_t={value:"daily"},ft={class:"flex items-center space-x-3"},pt={for:"is_enabled",class:"text-sm font-medium text-gray-700 dark:text-gray-300"},bt={key:0,class:"text-sm text-red-600 dark:text-red-400"},gt={class:"flex justify-end space-x-3"},vt={class:"grid grid-cols-2 md:grid-cols-4 gap-6"},xt={class:"text-center"},ht={class:"text-2xl font-bold text-gray-900 dark:text-white"},kt={class:"text-sm text-gray-600 dark:text-gray-400"},zt={class:"text-center"},$t={class:"text-2xl font-bold text-green-600 dark:text-green-400"},wt={class:"text-sm text-gray-600 dark:text-gray-400"},St={class:"text-center"},Ct={class:"text-2xl font-bold text-red-600 dark:text-red-400"},Vt={class:"text-sm text-gray-600 dark:text-gray-400"},qt={class:"text-center"},jt={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},Et={class:"text-sm text-gray-600 dark:text-gray-400"},Nt={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Bt={class:"flex items-center space-x-2"},Dt={class:"text-sm text-gray-600 dark:text-gray-400"},Yt={__name:"Show",props:{company:Object,syncStats:Object},setup(r){var V,q,j,E;const{t:C,locale:D}=L(),c=r,p=h(!1),b=h(!1),g=h(!1),y=A({api_key:((V=c.company.bayzat_config)==null?void 0:V.api_key)||"",api_url:((q=c.company.bayzat_config)==null?void 0:q.api_url)||"https://integration.bayzat.com/attendance",sync_frequency:((j=c.company.bayzat_config)==null?void 0:j.sync_frequency)||"manual",is_enabled:((E=c.company.bayzat_config)==null?void 0:E.is_enabled)||!1}),F=t=>D.value==="ar"?t.name_ar:t.name_en,U=t=>t?new Date(t).toLocaleString():C("bayzat.never_synced"),M=()=>{p.value=!0;const t=c.company.bayzat_config?"put":"post",l=c.company.bayzat_config?route("bayzat-configs.update",c.company.id):route("bayzat-configs.store",c.company.id);k[t](l,y,{preserveScroll:!0,onFinish:()=>{p.value=!1}})},O=()=>{b.value=!0,k.post(route("bayzat-configs.test",c.company.id),{},{preserveScroll:!0,onFinish:()=>{b.value=!1}})},T=()=>{confirm(C("bayzat.confirm_delete_configuration"))&&k.delete(route("bayzat-configs.destroy",c.company.id),{preserveScroll:!0})};return(t,l)=>(i(),_(J,null,{header:n(()=>[e("div",tt,[e("div",null,[e("h2",et,a(t.$t("bayzat.title"))+" - "+a(F(r.company)),1),e("p",at,a(t.$t("bayzat.attendance_sync_settings")),1)]),e("div",st,[r.company.bayzat_config?(i(),_(s(x),{key:0,onClick:O,variant:"outline",disabled:b.value},{default:n(()=>[b.value?(i(),m(v,{key:0},[l[6]||(l[6]=e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"},null,-1)),d(" "+a(t.$t("bayzat.testing")),1)],64)):(i(),m(v,{key:1},[o(s(Z),{class:"w-4 h-4 mr-2"}),d(" "+a(t.$t("bayzat.test_connection")),1)],64))]),_:1},8,["disabled"])):f("",!0),o(s(x),{onClick:l[0]||(l[0]=u=>t.$inertia.visit(t.route("bayzat-configs.index"))),variant:"outline"},{default:n(()=>[d(a(t.$t("common.back")),1)]),_:1})])])]),default:n(()=>[e("div",ot,[e("div",nt,[o(s(z),null,{default:n(()=>[o(s(w),null,{default:n(()=>[o(s(S),null,{default:n(()=>[d(a(t.$t("bayzat.api_settings")),1)]),_:1}),o(s(B),null,{default:n(()=>[d(a(t.$t("bayzat.configure_api_credentials")),1)]),_:1})]),_:1}),o(s($),null,{default:n(()=>[e("form",{onSubmit:H(M,["prevent"]),class:"space-y-6"},[e("div",null,[e("label",lt,a(t.$t("bayzat.api_key"))+" * ",1),e("div",rt,[o(s(N),{modelValue:y.api_key,"onUpdate:modelValue":l[1]||(l[1]=u=>y.api_key=u),type:g.value?"text":"password",placeholder:t.$t("bayzat.api_key_placeholder"),required:"",class:"pr-10"},null,8,["modelValue","type","placeholder"]),e("button",{type:"button",onClick:l[2]||(l[2]=u=>g.value=!g.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[(i(),_(I(g.value?s(Q):s(W)),{class:"h-4 w-4 text-gray-400"}))])]),e("p",it,a(t.$t("bayzat.api_key_help")),1)]),e("div",null,[e("label",dt,a(t.$t("bayzat.api_url")),1),o(s(N),{modelValue:y.api_url,"onUpdate:modelValue":l[3]||(l[3]=u=>y.api_url=u),type:"url",placeholder:t.$t("bayzat.api_url_placeholder")},null,8,["modelValue","placeholder"]),e("p",ct,a(t.$t("bayzat.api_url_help")),1)]),e("div",null,[e("label",yt,a(t.$t("bayzat.sync_frequency")),1),o(s(P),{modelValue:y.sync_frequency,"onUpdate:modelValue":l[4]||(l[4]=u=>y.sync_frequency=u)},{default:n(()=>[e("option",ut,a(t.$t("bayzat.manual")),1),e("option",mt,a(t.$t("bayzat.hourly")),1),e("option",_t,a(t.$t("bayzat.daily")),1)]),_:1},8,["modelValue"])]),e("div",ft,[K(e("input",{id:"is_enabled","onUpdate:modelValue":l[5]||(l[5]=u=>y.is_enabled=u),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[G,y.is_enabled]]),e("label",pt,a(t.$t("bayzat.enable_sync")),1)]),t.$page.props.errors.config?(i(),m("div",bt,a(t.$page.props.errors.config),1)):f("",!0),e("div",gt,[o(s(x),{type:"submit",disabled:p.value},{default:n(()=>[p.value?(i(),m(v,{key:0},[l[7]||(l[7]=e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},null,-1)),d(" "+a(t.$t("common.saving")),1)],64)):(i(),m(v,{key:1},[o(s(R),{class:"w-4 h-4 mr-2"}),d(" "+a(r.company.bayzat_config?t.$t("bayzat.update_configuration"):t.$t("bayzat.save_configuration")),1)],64))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}),r.company.bayzat_config?(i(),_(s(z),{key:0},{default:n(()=>[o(s(w),null,{default:n(()=>[o(s(S),null,{default:n(()=>[d(a(t.$t("bayzat.sync_statistics")),1)]),_:1})]),_:1}),o(s($),null,{default:n(()=>[e("div",vt,[e("div",xt,[e("p",ht,a(r.syncStats.total_syncs),1),e("p",kt,a(t.$t("bayzat.total_syncs")),1)]),e("div",zt,[e("p",$t,a(r.syncStats.successful_syncs),1),e("p",wt,a(t.$t("bayzat.successful_syncs")),1)]),e("div",St,[e("p",Ct,a(r.syncStats.failed_syncs),1),e("p",Vt,a(t.$t("bayzat.failed_syncs")),1)]),e("div",qt,[e("p",jt,a(r.syncStats.pending_syncs),1),e("p",Et,a(t.$t("bayzat.pending_syncs")),1)])]),r.syncStats.last_sync_at?(i(),m("div",Nt,[e("div",Bt,[o(s(X),{class:"h-4 w-4 text-gray-500"}),e("span",Dt,a(t.$t("bayzat.last_sync"))+": "+a(U(r.syncStats.last_sync_at)),1)])])):f("",!0)]),_:1})]),_:1})):f("",!0),r.company.bayzat_config?(i(),_(s(z),{key:1,class:"border-red-200 dark:border-red-800"},{default:n(()=>[o(s(w),null,{default:n(()=>[o(s(S),{class:"text-red-600 dark:text-red-400"},{default:n(()=>[d(a(t.$t("bayzat.danger_zone")),1)]),_:1}),o(s(B),null,{default:n(()=>[d(a(t.$t("bayzat.delete_configuration_warning")),1)]),_:1})]),_:1}),o(s($),null,{default:n(()=>[o(s(x),{onClick:T,variant:"destructive"},{default:n(()=>[o(s(Y),{class:"w-4 h-4 mr-2"}),d(" "+a(t.$t("bayzat.delete_configuration")),1)]),_:1})]),_:1})]),_:1})):f("",!0)])])]),_:1}))}};export{Yt as default};
