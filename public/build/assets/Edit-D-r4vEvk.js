import{d as R,u as z,x as A,p as x,E as G,C as H,c as J,i as j,o as _,w as r,f as s,b as o,e,h as p,t as d,k as K,m as V,a as f,F as C,r as D,v as S,l as w,s as q,S as O}from"./app-COEuzrRD.js";import{g as P,_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-Ct5cns0Q.js";import{_ as W,a as X}from"./CardContent.vue_vue_type_script_setup_true_lang-CgnwjQM9.js";import{_ as Y}from"./CardDescription.vue_vue_type_script_setup_true_lang-CAH84oXx.js";import{_ as Z,a as ee}from"./CardTitle.vue_vue_type_script_setup_true_lang-DoKWherE.js";import{_ as B}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-4jJb_-WM.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-GzmxfP29.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-BG2ZWsdr.js";import{_ as c}from"./InputError.vue_vue_type_script_setup_true_lang-BhOaeBu0.js";import{_ as le}from"./Heading.vue_vue_type_script_setup_true_lang-CJOi7Obp.js";import{_ as oe}from"./Icon.vue_vue_type_script_setup_true_lang-T0ZPZK-r.js";import"./useForwardExpose-BheO8JaA.js";import"./RovingFocusGroup-Ci7d5tw1.js";import"./building-CKtq9jPr.js";import"./users-DWwMG2GQ.js";import"./activity-Cz0CdVk9.js";import"./arrow-left-CWVnQBvX.js";import"./calendar-U0w8TVRV.js";import"./check-Dpjf-7Rw.js";import"./chevron-down-C1xmO-Fr.js";import"./search-CNCRqgBa.js";import"./eye-B_6rmHDY.js";import"./user-B9vkwLXY.js";import"./loader-circle-g7z_WiLT.js";import"./sun-Dbhhukoh.js";import"./play-CP1TsOsV.js";import"./plus-kXMflnhn.js";import"./square-pen-DNXir1Re.js";import"./trash-2-D8oscHI7.js";import"./triangle-alert-ShptOfGv.js";const se={class:"container max-w-4xl mx-auto py-8"},te={class:"space-y-6"},ae={class:"space-y-2"},ie={class:"space-y-4"},de={class:"text-lg font-medium"},re={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},me=["disabled"],pe={value:""},ue=["value"],ce={class:"space-y-4"},_e={class:"text-lg font-medium"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ge={class:"space-y-4"},ye={class:"text-lg font-medium"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ve={class:"relative"},he={class:"flex"},xe=["placeholder","disabled"],Ve=["disabled"],we={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto"},ke={key:0,class:"px-3 py-2 text-gray-500"},$e={key:1,class:"px-3 py-2 text-gray-500"},Ue={key:2},je=["onClick"],Ce={class:"font-medium"},De={class:"text-sm text-gray-500"},Se={key:1,class:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded-md"},qe={class:"text-sm font-medium text-blue-800"},Be={class:"text-xs text-blue-600"},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ee=["disabled"],Me={value:"active"},Ne={value:"inactive"},Fe={value:"terminated"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ie={class:"space-y-4"},Re={class:"text-lg font-medium"},ze=["placeholder","disabled"],Ae={class:"flex items-center justify-between pt-6 border-t"},vl=R({__name:"Edit",props:{employee:{},locations:{}},setup(T){const n=T,{t}=z(),l=A({employee_id:n.employee.employee_id,first_name:n.employee.first_name,last_name:n.employee.last_name,email:n.employee.email,phone:n.employee.phone||"",mobile:n.employee.mobile||"",department:n.employee.department||"",department_id:n.employee.department_id||null,job_title:n.employee.job_title||"",manager:n.employee.manager||"",hire_date:n.employee.hire_date||"",termination_date:n.employee.termination_date||"",employment_status:n.employee.employment_status||"active",location_id:n.employee.location_id,notes:n.employee.notes||""}),y=x(""),h=x([]),k=x(!1),b=x(!1),v=x(null);let $=null;const E=m=>{$&&clearTimeout($),$=setTimeout(async()=>{if(m.length<2){h.value=[];return}k.value=!0;try{const i=await fetch(`/api/departments/search?q=${encodeURIComponent(m)}`);i.ok&&(h.value=await i.json())}catch(i){console.error("Error searching departments:",i)}finally{k.value=!1}},300)};G(y,m=>{m.length>=2?(b.value=!0,E(m)):(b.value=!1,h.value=[])});const M=m=>{v.value=m,l.department_id=m.id,y.value=m.name||"",b.value=!1},N=()=>{v.value=null,l.department_id=null,y.value="",h.value=[],b.value=!1},F=()=>{setTimeout(()=>{b.value=!1},200)};H(async()=>{if(l.department_id)try{const m=await fetch("/api/departments/search?q=");if(m.ok){const a=(await m.json()).find(U=>U.id===l.department_id);a&&(v.value=a,y.value=a.name)}}catch(m){console.error("Error loading current department:",m)}});const L=J(()=>[{title:t("nav.dashboard"),href:"/dashboard"},{title:t("employees.title"),href:"/employees"},{title:n.employee.full_name,href:`/employees/${n.employee.id}`},{title:t("employees.edit_employee"),href:`/employees/${n.employee.id}/edit`}]),I=()=>{l.put(route("employees.update",n.employee.id))};return(m,i)=>(_(),j(Q,null,{default:r(()=>[s("div",se,[s("div",te,[s("div",ae,[o(P,{breadcrumbs:L.value},null,8,["breadcrumbs"]),o(le,{title:e(t)("employees.edit_employee")},null,8,["title"])]),o(e(W),null,{default:r(()=>[o(e(Z),null,{default:r(()=>[o(e(ee),null,{default:r(()=>[p(d(e(t)("employees.employee_details")),1)]),_:1}),o(e(Y),null,{default:r(()=>[p(d(e(t)("employees.employee_details_description")),1)]),_:1})]),_:1}),o(e(X),null,{default:r(()=>[s("form",{onSubmit:K(I,["prevent"]),class:"space-y-6"},[s("div",ie,[s("h3",de,d(e(t)("employees.basic_information")),1),s("div",re,[s("div",null,[o(e(u),{for:"employee_id"},{default:r(()=>[p(d(e(t)("employees.employee_id")),1)]),_:1}),o(e(g),{id:"employee_id",modelValue:e(l).employee_id,"onUpdate:modelValue":i[0]||(i[0]=a=>e(l).employee_id=a),type:"text",placeholder:e(t)("employees.employee_id_placeholder"),disabled:e(l).processing},null,8,["modelValue","placeholder","disabled"]),o(c,{message:e(l).errors.employee_id},null,8,["message"])]),s("div",null,[o(e(u),{for:"first_name"},{default:r(()=>[p(d(e(t)("employees.first_name")),1)]),_:1}),o(e(g),{id:"first_name",modelValue:e(l).first_name,"onUpdate:modelValue":i[1]||(i[1]=a=>e(l).first_name=a),type:"text",placeholder:e(t)("employees.first_name_placeholder"),required:"",disabled:e(l).processing},null,8,["modelValue","placeholder","disabled"]),o(c,{message:e(l).errors.first_name},null,8,["message"])]),s("div",null,[o(e(u),{for:"last_name"},{default:r(()=>[p(d(e(t)("employees.last_name")),1)]),_:1}),o(e(g),{id:"last_name",modelValue:e(l).last_name,"onUpdate:modelValue":i[2]||(i[2]=a=>e(l).last_name=a),type:"text",placeholder:e(t)("employees.last_name_placeholder"),required:"",disabled:e(l).processing},null,8,["modelValue","placeholder","disabled"]),o(c,{message:e(l).errors.last_name},null,8,["message"])])]),s("div",ne,[s("div",null,[o(e(u),{for:"email"},{default:r(()=>[p(d(e(t)("employees.email")),1)]),_:1}),o(e(g),{id:"email",modelValue:e(l).email,"onUpdate:modelValue":i[3]||(i[3]=a=>e(l).email=a),type:"email",placeholder:e(t)("employees.email_placeholder"),required:"",disabled:e(l).processing},null,8,["modelValue","placeholder","disabled"]),o(c,{message:e(l).errors.email},null,8,["message"])]),s("div",null,[o(e(u),{for:"location_id"},{default:r(()=>[p(d(e(t)("employees.location")),1)]),_:1}),V(s("select",{id:"location_id","onUpdate:modelValue":i[4]||(i[4]=a=>e(l).location_id=a),disabled:e(l).processing,required:"",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s("option",pe,d(e(t)("employees.select_location")),1),(_(!0),f(C,null,D(m.locations,a=>(_(),f("option",{key:a.id,value:a.id},d(a.display_name||`${a.code}: ${a.name}`),9,ue))),128))],8,me),[[S,e(l).location_id]]),o(c,{message:e(l).errors.location_id},null,8,["message"])])])]),s("div",ce,[s("h3",_e,d(e(t)("employees.contact_information")),1),s("div",fe,[s("div",null,[o(e(u),{for:"phone"},{default:r(()=>[p(d(e(t)("employees.phone")),1)]),_:1}),o(e(g),{id:"phone",modelValue:e(l).phone,"onUpdate:modelValue":i[5]||(i[5]=a=>e(l).phone=a),type:"text",placeholder:e(t)("employees.phone_placeholder"),disabled:e(l).processing},null,8,["modelValue","placeholder","disabled"]),o(c,{message:e(l).errors.phone},null,8,["message"])]),s("div",null,[o(e(u),{for:"mobile"},{default:r(()=>[p(d(e(t)("employees.mobile")),1)]),_:1}),o(e(g),{id:"mobile",modelValue:e(l).mobile,"onUpdate:modelValue":i[6]||(i[6]=a=>e(l).mobile=a),type:"text",placeholder:e(t)("employees.mobile_placeholder"),disabled:e(l).processing},null,8,["modelValue","placeholder","disabled"]),o(c,{message:e(l).errors.mobile},null,8,["message"])])])]),s("div",ge,[s("h3",ye,d(e(t)("employees.job_information")),1),s("div",be,[s("div",null,[o(e(u),{for:"department"},{default:r(()=>[p(d(e(t)("employees.department")),1)]),_:1}),s("div",ve,[s("div",he,[V(s("input",{"onUpdate:modelValue":i[7]||(i[7]=a=>y.value=a),type:"text",placeholder:e(t)("employees.department_placeholder"),disabled:e(l).processing,class:"flex h-10 w-full rounded-l-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",onFocus:i[8]||(i[8]=a=>b.value=y.value.length>=2),onBlur:F},null,40,xe),[[q,y.value]]),v.value?(_(),f("button",{key:0,type:"button",onClick:N,disabled:e(l).processing,class:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}," âœ• ",8,Ve)):w("",!0)]),b.value?(_(),f("div",we,[k.value?(_(),f("div",ke,d(e(t)("common.searching"))+"... ",1)):h.value.length===0&&y.value.length>=2?(_(),f("div",$e,d(e(t)("employees.no_departments_found")),1)):(_(),f("div",Ue,[(_(!0),f(C,null,D(h.value,a=>(_(),f("button",{key:a.id,type:"button",onClick:U=>M(a),class:"w-full px-3 py-2 text-left hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"},[s("div",Ce,d(a.name),1),s("div",De,d(a.company_name),1)],8,je))),128))]))])):w("",!0),v.value?(_(),f("div",Se,[s("div",qe,d(e(t)("common.selected"))+": "+d(v.value.name),1),s("div",Be,d(v.value.company_name),1)])):w("",!0)]),o(c,{message:e(l).errors.department_id},null,8,["message"])]),s("div",null,[o(e(u),{for:"job_title"},{default:r(()=>[p(d(e(t)("employees.job_title")),1)]),_:1}),o(e(g),{id:"job_title",modelValue:e(l).job_title,"onUpdate:modelValue":i[9]||(i[9]=a=>e(l).job_title=a),type:"text",placeholder:e(t)("employees.job_title_placeholder"),disabled:e(l).processing},null,8,["modelValue","placeholder","disabled"]),o(c,{message:e(l).errors.job_title},null,8,["message"])])]),s("div",Te,[s("div",null,[o(e(u),{for:"manager"},{default:r(()=>[p(d(e(t)("employees.manager")),1)]),_:1}),o(e(g),{id:"manager",modelValue:e(l).manager,"onUpdate:modelValue":i[10]||(i[10]=a=>e(l).manager=a),type:"text",placeholder:e(t)("employees.manager_placeholder"),disabled:e(l).processing},null,8,["modelValue","placeholder","disabled"]),o(c,{message:e(l).errors.manager},null,8,["message"])]),s("div",null,[o(e(u),{for:"employment_status"},{default:r(()=>[p(d(e(t)("employees.employment_status")),1)]),_:1}),V(s("select",{id:"employment_status","onUpdate:modelValue":i[11]||(i[11]=a=>e(l).employment_status=a),disabled:e(l).processing,required:"",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s("option",Me,d(e(t)("employees.status_active")),1),s("option",Ne,d(e(t)("employees.status_inactive")),1),s("option",Fe,d(e(t)("employees.status_terminated")),1)],8,Ee),[[S,e(l).employment_status]]),o(c,{message:e(l).errors.employment_status},null,8,["message"])])]),s("div",Le,[s("div",null,[o(e(u),{for:"hire_date"},{default:r(()=>[p(d(e(t)("employees.hire_date")),1)]),_:1}),o(e(g),{id:"hire_date",modelValue:e(l).hire_date,"onUpdate:modelValue":i[12]||(i[12]=a=>e(l).hire_date=a),type:"date",disabled:e(l).processing},null,8,["modelValue","disabled"]),o(c,{message:e(l).errors.hire_date},null,8,["message"])]),s("div",null,[o(e(u),{for:"termination_date"},{default:r(()=>[p(d(e(t)("employees.termination_date")),1)]),_:1}),o(e(g),{id:"termination_date",modelValue:e(l).termination_date,"onUpdate:modelValue":i[13]||(i[13]=a=>e(l).termination_date=a),type:"date",disabled:e(l).processing},null,8,["modelValue","disabled"]),o(c,{message:e(l).errors.termination_date},null,8,["message"])])])]),s("div",Ie,[s("h3",Re,d(e(t)("employees.additional_information")),1),s("div",null,[o(e(u),{for:"notes"},{default:r(()=>[p(d(e(t)("employees.notes")),1)]),_:1}),V(s("textarea",{id:"notes","onUpdate:modelValue":i[14]||(i[14]=a=>e(l).notes=a),placeholder:e(t)("employees.notes_placeholder"),disabled:e(l).processing,rows:"4",class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,8,ze),[[q,e(l).notes]]),o(c,{message:e(l).errors.notes},null,8,["message"])])]),s("div",Ae,[o(e(B),{variant:"outline",asChild:""},{default:r(()=>[o(e(O),{href:m.route("employees.show",m.employee.id)},{default:r(()=>[p(d(e(t)("common.cancel")),1)]),_:1},8,["href"])]),_:1}),o(e(B),{type:"submit",disabled:e(l).processing},{default:r(()=>[e(l).processing?(_(),j(oe,{key:0,name:"LoaderCircle",class:"mr-2 h-4 w-4 animate-spin"})):w("",!0),p(" "+d(e(l).processing?e(t)("common.saving"):e(t)("common.save")),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])])]),_:1}))}});export{vl as default};
