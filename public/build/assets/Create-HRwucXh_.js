import{d as Et,u as Dt,B as Bt,p as v,x as Ce,c as Ne,C as Pt,a as c,o as d,b as n,e,g as zt,w as m,f as t,t as s,F as T,r as L,l as _,n as w,h as u,m as I,D as $e,k as fe,v as ie,i as se,z as Mt,S as Ot,W as Qe}from"./app-da29zlVu.js";import{_ as Xt}from"./AppLayout.vue_vue_type_script_setup_true_lang-XaYnSxX8.js";import{_ as U}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cxrqxcqh.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-C1IfMCn8.js";import{_ as h}from"./Label.vue_vue_type_script_setup_true_lang-DPFAYTWy.js";import{_ as At,a as Nt}from"./CardContent.vue_vue_type_script_setup_true_lang-CTMHyHzT.js";import{_ as Qt}from"./CardDescription.vue_vue_type_script_setup_true_lang-CLXcGHqW.js";import{_ as Wt,a as Jt}from"./CardTitle.vue_vue_type_script_setup_true_lang-w6l-M4gb.js";import{_ as We,a as Je,b as He,c as Ke,d as Ge,e as Ye}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DuNNp23F.js";import{_ as Ze}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-3WHkY4ZR.js";import{_ as b}from"./Icon.vue_vue_type_script_setup_true_lang-DH5-DDgx.js";import{_ as Ht}from"./Heading.vue_vue_type_script_setup_true_lang-DpmtG9sg.js";import{B as et}from"./BarcodeScanner-CCdqFifY.js";import"./useForwardExpose-OFpsDUJ4.js";import"./RovingFocusGroup-AViK30Za.js";import"./building-DtjmKMiL.js";import"./users-CsVeAfoR.js";import"./activity-DoxAeuhf.js";import"./arrow-left-Cj_tH3p7.js";import"./calendar-DfU2HxAB.js";import"./check-Dan-S5dK.js";import"./chevron-down-BrkJ-Gq7.js";import"./search-CdeI1_Yc.js";import"./eye-CeTDMxKi.js";import"./user-BdEP1w75.js";import"./loader-circle-CNe2GDl5.js";import"./sun-DlxVVccj.js";import"./play-BI3U31xE.js";import"./plus-BwW_UH3-.js";import"./square-pen-D-Qh5RuP.js";import"./trash-2-CJ3t9zDj.js";import"./triangle-alert-CKj9MmXc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Kt={class:"max-w-4xl mx-auto"},Gt={class:"mb-8"},Yt={class:"text-gray-600 dark:text-gray-400 mt-2"},Zt={class:"flex items-center justify-center mb-8"},es={class:"flex items-center"},ts={key:0,class:"space-y-6"},ss={class:"space-y-3"},as={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},os={class:"relative"},rs={for:"creation_mode_single",class:"flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 peer-checked:border-primary peer-checked:bg-primary/5 dark:border-gray-700 dark:hover:bg-gray-800 dark:peer-checked:bg-primary/10"},ls={class:"font-medium text-sm"},ns={class:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1"},is={class:"relative"},ds={for:"creation_mode_bulk",class:"flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 peer-checked:border-primary peer-checked:bg-primary/5 dark:border-gray-700 dark:hover:bg-gray-800 dark:peer-checked:bg-primary/10"},cs={class:"font-medium text-sm"},us={class:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1"},ms={class:"relative"},_s={for:"creation_mode_workstation",class:"flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 peer-checked:border-primary peer-checked:bg-primary/5 dark:border-gray-700 dark:hover:bg-gray-800 dark:peer-checked:bg-primary/10"},ps={class:"font-medium text-sm"},gs={class:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1"},fs={key:0,class:"space-y-2"},ys={class:"flex gap-2"},vs={class:"flex-1 relative"},hs={class:"relative"},bs={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},ks={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},xs=["onClick"],ws={class:"font-medium text-sm"},Ss={class:"text-xs text-gray-500 dark:text-gray-400"},Vs={key:0},Cs={key:1,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg px-3 py-2"},$s={class:"text-sm text-gray-500 dark:text-gray-400"},Us={class:"space-y-2"},Ts=["disabled"],Ls={value:""},Rs=["value"],qs={key:0,class:"text-sm text-red-600 dark:text-red-400"},Is={class:"grid grid-cols-2 gap-4"},js={class:"space-y-2"},Fs={class:"space-y-2"},Es={class:"text-sm text-muted-foreground"},Ds={class:"grid grid-cols-2 gap-4"},Bs={class:"space-y-2"},Ps={class:"space-y-2"},zs={class:"space-y-2"},Ms={class:"grid grid-cols-2 gap-4"},Os={class:"space-y-2"},Xs={class:"space-y-2"},As={class:"grid grid-cols-2 gap-4"},Ns={class:"space-y-2"},Qs={class:"space-y-2"},Ws={key:0,class:"text-sm text-red-600 dark:text-red-400"},Js={key:1,class:"text-sm text-blue-600 dark:text-blue-400 flex items-center gap-1"},Hs={key:1,class:"space-y-4"},Ks={class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"},Gs={class:"flex items-start"},Ys={class:"font-medium text-blue-900 dark:text-blue-100"},Zs={class:"text-sm text-blue-700 dark:text-blue-300 mt-1"},ea={class:"space-y-2"},ta={class:"relative"},sa={value:""},aa=["value"],oa={class:"text-sm text-muted-foreground"},ra={key:0,class:"text-sm text-red-600 dark:text-red-400"},la={class:"space-y-2"},na={class:"text-sm text-muted-foreground"},ia={key:0,class:"text-sm text-red-600 dark:text-red-400"},da={class:"grid grid-cols-2 gap-4"},ca={class:"space-y-2"},ua={key:0,class:"text-sm text-red-600 dark:text-red-400"},ma={class:"space-y-2"},_a={key:0,class:"text-sm text-red-600 dark:text-red-400"},pa={key:0,class:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},ga={class:"font-medium text-sm mb-2"},fa={class:"text-sm text-gray-600 dark:text-gray-400"},ya={key:1,class:"space-y-6"},va={class:"space-y-2"},ha={class:"flex gap-2"},ba={class:"flex-1 relative"},ka={class:"relative"},xa={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},wa={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},Sa=["onClick"],Va={class:"font-medium text-sm"},Ca={class:"text-xs text-gray-500 dark:text-gray-400"},$a={key:0},Ua={key:1},Ta={key:2},La={key:3},Ra={key:1,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg px-3 py-2"},qa={class:"text-sm text-gray-500 dark:text-gray-400"},Ia={class:"space-y-2"},ja={class:"grid grid-cols-2 gap-4"},Fa={class:"space-y-2"},Ea={class:"space-y-2"},Da={class:"space-y-2"},Ba={class:"space-y-2"},Pa={value:""},za=["value"],Ma={key:0,class:"text-sm text-red-600 dark:text-red-400"},Oa={class:"space-y-2"},Xa={value:""},Aa=["value"],Na={key:0,class:"text-sm text-red-600 dark:text-red-400"},Qa={class:"flex items-center space-x-2"},Wa={class:"text-sm text-muted-foreground"},Ja={class:"space-y-4"},Ha={class:"flex items-center justify-center w-full"},Ka={key:0,class:"flex flex-col items-center justify-center pt-5 pb-6"},Ga={class:"text-sm text-gray-500 dark:text-gray-400"},Ya={class:"font-semibold"},Za={key:1,class:"relative w-full h-full"},eo=["src"],to={class:"flex gap-2"},so={key:0,class:"text-sm text-red-600 dark:text-red-400"},ao={class:"text-sm text-muted-foreground"},oo={key:0,class:"text-sm text-red-600 dark:text-red-400"},ro={class:"space-y-2"},lo={class:"flex gap-2"},no={class:"text-sm text-muted-foreground"},io={key:0,class:"text-sm text-red-600 dark:text-red-400"},co={class:"space-y-2"},uo={value:"good"},mo={value:"damaged"},_o={key:0,class:"text-sm text-red-600 dark:text-red-400"},po={key:0,class:"space-y-2"},go={class:"text-sm text-muted-foreground"},fo={key:0,class:"text-sm text-red-600 dark:text-red-400"},yo={class:"space-y-6 border-t pt-6"},vo={class:"font-medium text-gray-900 dark:text-gray-100"},ho={class:"space-y-2"},bo={class:"relative"},ko={class:"relative"},xo={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},wo={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},So=["onClick"],Vo={class:"font-medium text-sm"},Co={class:"text-xs text-gray-500 dark:text-gray-400"},$o={class:"text-sm text-muted-foreground"},Uo={key:0,class:"text-sm text-red-600 dark:text-red-400"},To={class:"space-y-2"},Lo={class:"relative"},Ro={class:"relative"},qo={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},Io={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},jo=["onClick"],Fo={class:"font-medium text-sm"},Eo={class:"text-xs text-gray-500 dark:text-gray-400"},Do={key:0},Bo={class:"text-sm text-muted-foreground"},Po={key:0,class:"text-sm text-red-600 dark:text-red-400"},zo={class:"space-y-2"},Mo={class:"relative"},Oo={class:"relative"},Xo={key:1,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},Ao={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto"},No=["onClick"],Qo={class:"font-medium text-sm"},Wo={class:"text-xs text-gray-500 dark:text-gray-400"},Jo={key:0},Ho={key:1},Ko={class:"text-sm text-muted-foreground"},Go={key:0,class:"text-sm text-red-600 dark:text-red-400"},Yo={key:1,class:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},Zo={class:"font-medium text-gray-900 dark:text-gray-100 mb-2"},er={class:"space-y-1 text-sm"},tr={key:0},sr={key:1},ar={key:2},or={key:2,class:"space-y-6"},rr={class:"space-y-4"},lr={class:"space-y-2"},nr={class:"flex items-center justify-center w-full"},ir={key:0,class:"flex flex-col items-center justify-center pt-5 pb-6"},dr={class:"mb-2 text-sm text-gray-500 dark:text-gray-400"},cr={class:"font-semibold"},ur={class:"text-xs text-gray-500 dark:text-gray-400"},mr={key:1,class:"relative w-full h-full"},_r=["src"],pr={key:0,class:"text-sm text-red-600 dark:text-red-400"},gr={class:"text-sm text-muted-foreground"},fr={class:"mt-8 p-6 bg-gray-50 dark:bg-gray-800 rounded-lg"},yr={class:"font-medium text-gray-900 dark:text-gray-100 mb-4"},vr={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},hr={key:0},br={key:1},kr={key:2},xr={key:0},wr={key:1},Sr={key:2},Vr={key:3},Cr={key:0,class:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},$r={class:"flex items-start"},Ur={class:"text-sm text-blue-700 dark:text-blue-300"},Tr={class:"font-medium"},Lr={class:"mt-1"},Rr={key:1,class:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg"},qr={class:"flex items-start"},Ir={class:"text-sm text-green-700 dark:text-green-300"},jr={class:"font-medium"},Fr={class:"mt-1"},Er={class:"flex justify-between mt-8"},Dr={class:"flex gap-2"},Br={class:"flex gap-2"},ye=3,hl=Et({__name:"Create",props:{companies:{},currentCompany:{},categories:{},locations:{}},setup(tt){var ze,Me,Oe,Xe;const{t:r}=Dt(),R=tt;Bt();const Ue=new URLSearchParams(window.location.search).get("location_id"),Te=()=>{var a;return((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},C=v(1),de=v(!1),ae=v(!1),j=v(""),z=v([]),ce=v(!1),F=v(!1),q=v(null),E=v(""),M=v([]),ue=v(!1),D=v(!1),V=v(null),O=v(""),H=v([]),ve=v(!1),X=v(!1),B=v(null),A=v(""),K=v([]),he=v(!1),N=v(!1),G=v(null),Q=v(""),Y=v([]),be=v(!1),W=v(!1),Z=v(null),oe=v(null),re=v(null),J=v(null),me=v(!1),le=v(!1),_e=v(null),ee=v(null),P=v(null),l=Ce({location_id:"",asset_template_id:"",company_id:((ze=R.currentCompany)==null?void 0:ze.id)||"",department_id:"",assigned_to:"",serial_number:"",condition:"good",image:null,quantity:1,creation_mode:"single",workstation_prefix:"",workstation_start:1,workstation_end:1,workstation_company_id:((Me=R.currentCompany)==null?void 0:Me.id)||""}),g=Ce({company_id:((Oe=R.currentCompany)==null?void 0:Oe.id)||(R.companies.length===1?R.companies[0].id:""),name:"",building:"",office_number:"",address:"",city:"",state:"",postal_code:"",country:""}),y=Ce({name:"",manufacturer:"",model_name:"",model_number:"",asset_category_id:"",company_id:((Xe=R.currentCompany)==null?void 0:Xe.id)||"",is_global:!1,image:null}),st=Ne(()=>[{title:r("nav.dashboard"),href:"/dashboard"},{title:r("nav.assets"),href:"/assets"},{title:r("assets.create_asset"),href:"/assets/create"}]),ke=Ne(()=>{switch(C.value){case 1:return l.creation_mode==="workstation_range"?l.workstation_prefix.length>0&&l.workstation_start>0&&l.workstation_end>0&&l.workstation_start<=l.workstation_end:q.value!==null;case 2:return V.value!==null;case 3:return!0;default:return!1}});let Le;const at=async()=>{if(j.value.length<2){z.value=[],F.value=!1;return}ce.value=!0;try{const a=await(await fetch(`/api/locations/search?q=${encodeURIComponent(j.value)}`)).json();z.value=a,F.value=!0}catch(i){console.error("Location search failed:",i),z.value=[]}finally{ce.value=!1}},ot=()=>{clearTimeout(Le),Le=window.setTimeout(at,300)},pe=i=>{q.value=i,l.location_id=i.id.toString(),j.value=i.display_name,F.value=!1,jt(i)},rt=()=>{q.value=null,l.location_id="",j.value="",z.value=[],F.value=!1;try{sessionStorage.removeItem("lastSelectedLocation")}catch(i){console.error("Failed to clear saved location:",i)}},lt=()=>{setTimeout(()=>{F.value=!1},200)};let Re;const nt=async()=>{if(E.value.length<2){M.value=[],D.value=!1;return}ue.value=!0;try{const a=await(await fetch(`/api/asset-templates/search?q=${encodeURIComponent(E.value)}`)).json();M.value=a,D.value=!0}catch(i){console.error("Template search failed:",i),M.value=[]}finally{ue.value=!1}},it=()=>{clearTimeout(Re),Re=window.setTimeout(nt,300)},qe=i=>{V.value=i,l.asset_template_id=i.id.toString(),E.value=i.display_name,D.value=!1},dt=()=>{V.value=null,l.asset_template_id="",E.value="",M.value=[],D.value=!1},ct=()=>{setTimeout(()=>{D.value=!1},200)},Ie=(i,a=1800)=>new Promise(p=>{const f=document.createElement("canvas"),o=f.getContext("2d"),k=new Image;k.onload=()=>{let{width:S,height:$}=k;const te=1920;S>$&&S>te?($=$*te/S,S=te):$>te&&(S=S*te/$,$=te),f.width=S,f.height=$,o.drawImage(k,0,0,S,$);const Ae=Se=>{f.toBlob(ge=>{if(ge&&ge.size<=a*1024){const Ve=new File([ge],i.name,{type:"image/jpeg",lastModified:Date.now()});p(Ve)}else if(Se>.1)Ae(Se-.1);else{const Ve=new File([ge],i.name,{type:"image/jpeg",lastModified:Date.now()});p(Ve)}},"image/jpeg",Se)};Ae(.8)},k.src=URL.createObjectURL(i)}),ut=async i=>{var f;const p=(f=i.target.files)==null?void 0:f[0];if(!p){_e.value=null,ee.value=null,y.image=null;return}if(!p.type.startsWith("image/")){P.value=r("assets.invalid_file_type");return}P.value=null;try{const o=await Ie(p,1800);_e.value=o,y.image=o;const k=new FileReader;k.onload=S=>{var $;ee.value=($=S.target)==null?void 0:$.result},k.readAsDataURL(o)}catch(o){console.error("Error processing image:",o),P.value=r("assets.image_processing_error")}},mt=async i=>{try{const p=await(await fetch(i)).blob(),f=new File([p],`template-${Date.now()}.jpg`,{type:"image/jpeg"}),o=await Ie(f,1800);_e.value=o,y.image=o,ee.value=i,le.value=!1}catch(a){console.error("Error processing camera image:",a),P.value=r("assets.image_processing_error")}},je=()=>{_e.value=null,ee.value=null,P.value=null,y.image=null;const i=document.getElementById("template_image");i&&(i.value="")},Fe=async()=>{var i;y.processing=!0,y.clearErrors();try{const a=new FormData;a.append("name",y.name),a.append("manufacturer",y.manufacturer),a.append("model_name",y.model_name),a.append("model_number",y.model_number),a.append("asset_category_id",y.asset_category_id.toString()),a.append("company_id",y.company_id.toString()),a.append("is_global",y.is_global?"1":"0"),a.append("_from_modal","1"),y.image&&a.append("image",y.image);const p=await fetch("/asset-templates",{method:"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":Te()},body:a}),f=await p.json();if(p.ok&&f.success){me.value=!1,y.reset(),je();const o={id:f.template.id,name:f.template.name,manufacturer:f.template.manufacturer,model_name:f.template.model_name,model_number:f.template.model_number,asset_category:f.template.asset_category,company:f.template.company,is_global:f.template.is_global,display_name:f.template.display_name,category_name:(i=f.template.asset_category)==null?void 0:i.name};qe(o)}else if(f.errors){const o=["name","manufacturer","model_name","model_number","asset_category_id","company_id","image"];Object.keys(f.errors).forEach(k=>{o.includes(k)&&y.setError(k,f.errors[k][0])})}else console.error("Failed to create template:",f)}catch(a){console.error("Error creating template:",a),y.setError("name","An error occurred while creating the template.")}finally{y.processing=!1}};let Ee;const _t=async()=>{if(O.value.length<2){H.value=[],X.value=!1;return}ve.value=!0;try{const a=await(await fetch(`/api/companies/search?q=${encodeURIComponent(O.value)}`)).json();H.value=a,X.value=!0}catch(i){console.error("Company search failed:",i),H.value=[]}finally{ve.value=!1}},pt=()=>{clearTimeout(Ee),Ee=window.setTimeout(_t,300)},gt=i=>{B.value=i,l.company_id=i.id.toString(),O.value=i.display_name,X.value=!1,xe(),ne()},ft=()=>{var i;B.value=null,l.company_id=((i=R.currentCompany)==null?void 0:i.id)||"",O.value="",H.value=[],X.value=!1,xe(),ne()},yt=()=>{setTimeout(()=>{X.value=!1},200)};let De;const vt=async()=>{var i,a;if(A.value.length<2){K.value=[],N.value=!1;return}he.value=!0;try{const p=((i=B.value)==null?void 0:i.id)||((a=R.currentCompany)==null?void 0:a.id),o=await(await fetch(`/api/departments/search?q=${encodeURIComponent(A.value)}&company_id=${p}`)).json();K.value=o,N.value=!0}catch(p){console.error("Department search failed:",p),K.value=[]}finally{he.value=!1}},ht=()=>{clearTimeout(De),De=window.setTimeout(vt,300)},bt=i=>{G.value=i,l.department_id=i.id,A.value=i.display_name,N.value=!1,ne()},xe=()=>{G.value=null,l.department_id="",A.value="",K.value=[],N.value=!1,ne()},kt=()=>{setTimeout(()=>{N.value=!1},200)};let Be;const xt=async()=>{var i,a;if(Q.value.length<2){Y.value=[],W.value=!1;return}be.value=!0;try{const p=((i=B.value)==null?void 0:i.id)||((a=R.currentCompany)==null?void 0:a.id),f=`/api/employees/search?q=${encodeURIComponent(Q.value)}&company_id=${p}`,k=await(await fetch(f)).json();Y.value=k,W.value=!0}catch(p){console.error("Employee search failed:",p),Y.value=[]}finally{be.value=!1}},wt=()=>{clearTimeout(Be),Be=window.setTimeout(xt,300)},St=i=>{Z.value=i,l.assigned_to=i.id.toString(),Q.value=i.display_name,W.value=!1},ne=()=>{Z.value=null,l.assigned_to="",Q.value="",Y.value=[],W.value=!1},Vt=()=>{setTimeout(()=>{W.value=!1},200)},Ct=i=>{var o;const p=(o=i.target.files)==null?void 0:o[0];if(!p){oe.value=null,re.value=null,l.image=null;return}if(!p.type.startsWith("image/")){J.value=r("assets.invalid_file_type");return}if(p.size>5*1024*1024){J.value=r("assets.file_too_large");return}J.value=null,oe.value=p,l.image=p;const f=new FileReader;f.onload=k=>{var S;re.value=(S=k.target)==null?void 0:S.result},f.readAsDataURL(p)},$t=()=>{oe.value=null,re.value=null,J.value=null,l.image=null;const i=document.getElementById("asset_image");i&&(i.value="")},Ut=()=>{ke.value&&C.value<ye&&C.value++},Tt=()=>{C.value>1&&C.value--},Pe=async()=>{g.processing=!0,g.clearErrors();try{const i=await fetch("/locations",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":Te()},body:JSON.stringify({company_id:g.company_id,name:g.name,building:g.building,office_number:g.office_number,address:g.address,city:g.city,state:g.state,postal_code:g.postal_code,country:g.country,_from_modal:!0})}),a=await i.json();if(i.ok&&a.success){de.value=!1,g.reset();const p={id:a.location.id,name:a.location.name,code:a.location.code,building:a.location.building,office_number:a.location.office_number,address:a.location.address,city:a.location.city,company_name:a.location.company.name_en,display_name:`${a.location.code}: ${a.location.name}`+(a.location.building?` - Building ${a.location.building}`:"")+(a.location.office_number?` - Office ${a.location.office_number}`:""),full_address:[a.location.address,a.location.city].filter(Boolean).join(", ")};pe(p)}else if(a.errors){const p=["company_id","name","building","office_number","address","city","state","postal_code","country"];Object.keys(a.errors).forEach(f=>{p.includes(f)&&g.setError(f,a.errors[f][0])})}else console.error("Failed to create location:",a)}catch(i){console.error("Error creating location:",i),g.setError("name","An error occurred while creating the location.")}finally{g.processing=!1}},Lt=()=>{l.post("/assets",{onSuccess:i=>{var p,f;((f=(p=i.props)==null?void 0:p.flash)==null?void 0:f.show_bulk_print)&&l.quantity>1?Qe.visit("/assets?show_bulk_print=true"):Qe.visit("/assets")},onError:()=>{}})},Rt=i=>i<C.value?"bg-primary text-primary-foreground":i===C.value?"bg-primary text-primary-foreground ring-2 ring-primary ring-offset-2":"bg-muted text-muted-foreground",qt=i=>i<C.value?"bg-primary":"bg-muted",It=i=>{l.serial_number=i,ae.value=!1},jt=i=>{try{const a={id:i.id,name:i.name,code:i.code,building:i.building,office_number:i.office_number,address:i.address,city:i.city,company_name:i.company_name,display_name:i.display_name,full_address:i.full_address,timestamp:Date.now()};sessionStorage.setItem("lastSelectedLocation",JSON.stringify(a))}catch(a){console.error("Failed to save last selected location:",a)}},Ft=async()=>{try{const i=sessionStorage.getItem("lastSelectedLocation");if(!i)return null;const a=JSON.parse(i),p=24*60*60*1e3;if(Date.now()-a.timestamp>p)return sessionStorage.removeItem("lastSelectedLocation"),null;const k=(await(await fetch(`/api/locations/search?q=${encodeURIComponent(a.name)}`)).json()).find(S=>S.id===a.id);return k||(sessionStorage.removeItem("lastSelectedLocation"),null)}catch(i){return console.error("Failed to load last selected location:",i),null}},we=v(!1);return Pt(async()=>{if(Ue)try{const p=(await(await fetch("/api/locations/search?q=")).json()).find(f=>f.id.toString()===Ue);if(p){pe(p);const f=new URL(window.location.href);f.searchParams.delete("location_id"),window.history.replaceState({},"",f.toString());return}}catch(i){console.error("Failed to load pre-selected location:",i)}if(l.creation_mode!=="workstation_range")try{const i=await Ft();i&&(pe(i),we.value=!0,setTimeout(()=>{we.value=!1},3e3))}catch(i){console.error("Failed to load last selected location from session:",i)}}),(i,a)=>(d(),c(T,null,[n(e(zt),{title:e(r)("assets.create_asset")},null,8,["title"]),n(Xt,{breadcrumbs:st.value},{default:m(()=>[t("div",Kt,[t("div",Gt,[n(Ht,{title:e(r)("assets.create_asset")},null,8,["title"]),t("p",Yt,s(e(r)("assets.create_asset_description")),1)]),t("div",Zt,[t("div",es,[(d(),c(T,null,L(ye,p=>t("div",{key:p,class:"flex items-center"},[t("div",{class:w([Rt(p),"w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium transition-colors"])},s(p),3),p<ye?(d(),c("div",{key:0,class:w([qt(p),"w-16 h-1 mx-4 transition-colors"])},null,2)):_("",!0)])),64))])]),n(e(At),null,{default:m(()=>[n(e(Wt),null,{default:m(()=>[n(e(Jt),null,{default:m(()=>[u(s(e(r)(`assets.step_${C.value}_title`)),1)]),_:1}),n(e(Qt),null,{default:m(()=>[u(s(e(r)(`assets.step_${C.value}_description`)),1)]),_:1})]),_:1}),n(e(Nt),{class:"space-y-6"},{default:m(()=>{var p,f;return[C.value===1?(d(),c("div",ts,[t("div",ss,[n(e(h),null,{default:m(()=>[u(s(e(r)("assets.creation_mode"))+" *",1)]),_:1}),t("div",as,[t("div",os,[I(t("input",{type:"radio",id:"creation_mode_single","onUpdate:modelValue":a[0]||(a[0]=o=>e(l).creation_mode=o),value:"single",class:"peer sr-only"},null,512),[[$e,e(l).creation_mode]]),t("label",rs,[n(b,{name:"MapPin",class:"h-6 w-6 mb-2 text-gray-600 dark:text-gray-400"}),t("span",ls,s(e(r)("assets.single_location")),1),t("span",ns,s(e(r)("assets.single_location_desc")),1)])]),t("div",is,[I(t("input",{type:"radio",id:"creation_mode_bulk","onUpdate:modelValue":a[1]||(a[1]=o=>e(l).creation_mode=o),value:"bulk",class:"peer sr-only"},null,512),[[$e,e(l).creation_mode]]),t("label",ds,[n(b,{name:"Package",class:"h-6 w-6 mb-2 text-gray-600 dark:text-gray-400"}),t("span",cs,s(e(r)("assets.bulk_creation")),1),t("span",us,s(e(r)("assets.bulk_creation_desc")),1)])]),t("div",ms,[I(t("input",{type:"radio",id:"creation_mode_workstation","onUpdate:modelValue":a[2]||(a[2]=o=>e(l).creation_mode=o),value:"workstation_range",class:"peer sr-only"},null,512),[[$e,e(l).creation_mode]]),t("label",_s,[n(b,{name:"Monitor",class:"h-6 w-6 mb-2 text-gray-600 dark:text-gray-400"}),t("span",ps,s(e(r)("assets.workstation_range")),1),t("span",gs,s(e(r)("assets.workstation_range_desc")),1)])])])]),e(l).creation_mode!=="workstation_range"?(d(),c("div",fs,[n(e(h),{for:"location_search"},{default:m(()=>[u(s(e(r)("assets.location"))+" *",1)]),_:1}),t("div",ys,[t("div",vs,[t("div",hs,[n(e(x),{id:"location_search",modelValue:j.value,"onUpdate:modelValue":a[3]||(a[3]=o=>j.value=o),type:"text",placeholder:q.value?q.value.display_name:e(r)("assets.search_location_placeholder"),onInput:ot,onFocus:a[4]||(a[4]=o=>j.value.length>=2&&(F.value=!0)),onBlur:lt,class:w({"border-red-500":e(l).errors.location_id}),disabled:q.value!==null},null,8,["modelValue","placeholder","class","disabled"]),q.value?(d(),c("button",{key:0,type:"button",onClick:rt,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[n(b,{name:"X",class:"h-4 w-4"})])):_("",!0),ce.value?(d(),c("div",bs,[n(b,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),F.value&&z.value.length>0?(d(),c("div",ks,[(d(!0),c(T,null,L(z.value,o=>(d(),c("div",{key:o.id,onClick:k=>pe(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",ws,s(o.display_name),1),t("div",Ss,[u(s(o.company_name)+" ",1),o.full_address?(d(),c("span",Vs," • "+s(o.full_address),1)):_("",!0)])],8,xs))),128))])):_("",!0),F.value&&z.value.length===0&&!ce.value&&j.value.length>=2?(d(),c("div",Cs,[t("div",$s,s(e(r)("assets.no_locations_found")),1)])):_("",!0)]),n(e(We),{open:de.value,"onUpdate:open":a[15]||(a[15]=o=>de.value=o)},{default:m(()=>[n(e(Ze),{asChild:""},{default:m(()=>[n(e(U),{variant:"outline",type:"button"},{default:m(()=>[n(b,{name:"Plus",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),u(" "+s(e(r)("locations.create_location")),1)]),_:1})]),_:1}),n(e(Je),{class:"sm:max-w-lg"},{default:m(()=>[n(e(He),null,{default:m(()=>[n(e(Ke),null,{default:m(()=>[u(s(e(r)("locations.create_location")),1)]),_:1}),n(e(Ge),null,{default:m(()=>[u(s(e(r)("locations.create_location_description")),1)]),_:1})]),_:1}),t("form",{onSubmit:fe(Pe,["prevent"]),class:"space-y-4"},[t("div",Us,[n(e(h),{for:"location_company_id"},{default:m(()=>[u(s(e(r)("locations.company"))+" *",1)]),_:1}),I(t("select",{id:"location_company_id","onUpdate:modelValue":a[5]||(a[5]=o=>e(g).company_id=o),class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(g).errors.company_id}]),disabled:e(g).processing,required:""},[t("option",Ls,s(e(r)("locations.select_company")),1),(d(!0),c(T,null,L(i.companies,o=>(d(),c("option",{key:o.id,value:o.id},s(o.name_en)+" "+s(o.name_ar?`(${o.name_ar})`:""),9,Rs))),128))],10,Ts),[[ie,e(g).company_id]]),e(g).errors.company_id?(d(),c("div",qs,s(e(g).errors.company_id),1)):_("",!0)]),t("div",Is,[t("div",js,[n(e(h),{for:"location_name"},{default:m(()=>[u(s(e(r)("locations.name"))+" *",1)]),_:1}),n(e(x),{id:"location_name",modelValue:e(g).name,"onUpdate:modelValue":a[6]||(a[6]=o=>e(g).name=o),error:e(g).errors.name,required:""},null,8,["modelValue","error"])]),t("div",Fs,[n(e(h),{for:"location_code"},{default:m(()=>[u(s(e(r)("locations.code")),1)]),_:1}),n(e(x),{id:"location_code",type:"text",placeholder:e(r)("locations.code_auto_generated"),disabled:"",class:"bg-muted"},null,8,["placeholder"]),t("p",Es,s(e(r)("locations.code_auto_generated")),1)])]),t("div",Ds,[t("div",Bs,[n(e(h),{for:"location_building"},{default:m(()=>[u(s(e(r)("locations.building")),1)]),_:1}),n(e(x),{id:"location_building",modelValue:e(g).building,"onUpdate:modelValue":a[7]||(a[7]=o=>e(g).building=o),error:e(g).errors.building},null,8,["modelValue","error"])]),t("div",Ps,[n(e(h),{for:"location_office_number"},{default:m(()=>[u(s(e(r)("locations.office_number")),1)]),_:1}),n(e(x),{id:"location_office_number",modelValue:e(g).office_number,"onUpdate:modelValue":a[8]||(a[8]=o=>e(g).office_number=o),error:e(g).errors.office_number},null,8,["modelValue","error"])])]),t("div",zs,[n(e(h),{for:"location_address"},{default:m(()=>[u(s(e(r)("locations.address")),1)]),_:1}),n(e(x),{id:"location_address",modelValue:e(g).address,"onUpdate:modelValue":a[9]||(a[9]=o=>e(g).address=o),error:e(g).errors.address},null,8,["modelValue","error"])]),t("div",Ms,[t("div",Os,[n(e(h),{for:"location_city"},{default:m(()=>[u(s(e(r)("locations.city")),1)]),_:1}),n(e(x),{id:"location_city",modelValue:e(g).city,"onUpdate:modelValue":a[10]||(a[10]=o=>e(g).city=o),error:e(g).errors.city},null,8,["modelValue","error"])]),t("div",Xs,[n(e(h),{for:"location_state"},{default:m(()=>[u(s(e(r)("locations.state")),1)]),_:1}),n(e(x),{id:"location_state",modelValue:e(g).state,"onUpdate:modelValue":a[11]||(a[11]=o=>e(g).state=o),error:e(g).errors.state},null,8,["modelValue","error"])])]),t("div",As,[t("div",Ns,[n(e(h),{for:"location_postal_code"},{default:m(()=>[u(s(e(r)("locations.postal_code")),1)]),_:1}),n(e(x),{id:"location_postal_code",modelValue:e(g).postal_code,"onUpdate:modelValue":a[12]||(a[12]=o=>e(g).postal_code=o),error:e(g).errors.postal_code},null,8,["modelValue","error"])]),t("div",Qs,[n(e(h),{for:"location_country"},{default:m(()=>[u(s(e(r)("locations.country")),1)]),_:1}),n(e(x),{id:"location_country",modelValue:e(g).country,"onUpdate:modelValue":a[13]||(a[13]=o=>e(g).country=o),error:e(g).errors.country},null,8,["modelValue","error"])])])],32),n(e(Ye),null,{default:m(()=>[n(e(U),{variant:"outline",onClick:a[14]||(a[14]=o=>de.value=!1),type:"button"},{default:m(()=>[u(s(e(r)("common.cancel")),1)]),_:1}),n(e(U),{onClick:Pe,disabled:e(g).processing},{default:m(()=>[e(g).processing?(d(),se(b,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"})):_("",!0),u(" "+s(e(r)("common.create")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),e(l).errors.location_id?(d(),c("div",Ws,s(e(l).errors.location_id),1)):_("",!0),we.value&&q.value?(d(),c("div",Js,[n(b,{name:"Clock",class:"h-3 w-3"}),u(" "+s(e(r)("assets.location_pre_selected")),1)])):_("",!0)])):_("",!0),e(l).creation_mode==="workstation_range"?(d(),c("div",Hs,[t("div",Ks,[t("div",Gs,[n(b,{name:"Info",class:"h-5 w-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0"}),t("div",null,[t("h4",Ys,s(e(r)("assets.workstation_range_info")),1),t("p",Zs,s(e(r)("assets.workstation_range_info_desc")),1)])])]),t("div",ea,[n(e(h),{for:"workstation_company_search"},{default:m(()=>[u(s(e(r)("assets.workstation_company"))+" *",1)]),_:1}),t("div",ta,[I(t("select",{id:"workstation_company_search","onUpdate:modelValue":a[16]||(a[16]=o=>e(l).workstation_company_id=o),class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(l).errors.workstation_company_id}]),required:""},[t("option",sa,s(e(r)("assets.select_company")),1),(d(!0),c(T,null,L(i.companies,o=>(d(),c("option",{key:o.id,value:o.id},s(o.name_en)+" "+s(o.name_ar?`(${o.name_ar})`:""),9,aa))),128))],2),[[ie,e(l).workstation_company_id]])]),t("p",oa,s(e(r)("assets.workstation_company_desc")),1),e(l).errors.workstation_company_id?(d(),c("div",ra,s(e(l).errors.workstation_company_id),1)):_("",!0)]),t("div",la,[n(e(h),{for:"workstation_prefix"},{default:m(()=>[u(s(e(r)("assets.workstation_prefix"))+" *",1)]),_:1}),n(e(x),{id:"workstation_prefix",modelValue:e(l).workstation_prefix,"onUpdate:modelValue":a[17]||(a[17]=o=>e(l).workstation_prefix=o),type:"text",placeholder:e(r)("assets.workstation_prefix_placeholder"),class:w({"border-red-500":e(l).errors.workstation_prefix}),required:""},null,8,["modelValue","placeholder","class"]),t("p",na,s(e(r)("assets.workstation_prefix_desc")),1),e(l).errors.workstation_prefix?(d(),c("div",ia,s(e(l).errors.workstation_prefix),1)):_("",!0)]),t("div",da,[t("div",ca,[n(e(h),{for:"workstation_start"},{default:m(()=>[u(s(e(r)("assets.workstation_start"))+" *",1)]),_:1}),n(e(x),{id:"workstation_start",modelValue:e(l).workstation_start,"onUpdate:modelValue":a[18]||(a[18]=o=>e(l).workstation_start=o),modelModifiers:{number:!0},type:"number",min:"1",max:"999",placeholder:e(r)("assets.workstation_start_placeholder"),class:w({"border-red-500":e(l).errors.workstation_start}),required:""},null,8,["modelValue","placeholder","class"]),e(l).errors.workstation_start?(d(),c("div",ua,s(e(l).errors.workstation_start),1)):_("",!0)]),t("div",ma,[n(e(h),{for:"workstation_end"},{default:m(()=>[u(s(e(r)("assets.workstation_end"))+" *",1)]),_:1}),n(e(x),{id:"workstation_end",modelValue:e(l).workstation_end,"onUpdate:modelValue":a[19]||(a[19]=o=>e(l).workstation_end=o),modelModifiers:{number:!0},type:"number",min:"1",max:"999",placeholder:e(r)("assets.workstation_end_placeholder"),class:w({"border-red-500":e(l).errors.workstation_end}),required:""},null,8,["modelValue","placeholder","class"]),e(l).errors.workstation_end?(d(),c("div",_a,s(e(l).errors.workstation_end),1)):_("",!0)])]),e(l).workstation_prefix&&e(l).workstation_start&&e(l).workstation_end&&e(l).workstation_start<=e(l).workstation_end?(d(),c("div",pa,[t("h4",ga,s(e(r)("assets.workstation_preview")),1),t("div",fa,[t("strong",null,s(e(r)("assets.locations_to_create"))+":",1),u(" "+s(e(l).workstation_prefix)+s(e(l).workstation_start)+" "+s(e(l).workstation_end>e(l).workstation_start?`to ${e(l).workstation_prefix}${e(l).workstation_end}`:"")+" ("+s(e(l).workstation_end-e(l).workstation_start+1)+" "+s(e(r)("assets.workstations"))+") ",1)])])):_("",!0)])):_("",!0)])):C.value===2?(d(),c("div",ya,[t("div",va,[n(e(h),{for:"template_search"},{default:m(()=>[u(s(e(r)("assets.template"))+" *",1)]),_:1}),t("div",ha,[t("div",ba,[t("div",ka,[n(e(x),{id:"template_search",modelValue:E.value,"onUpdate:modelValue":a[20]||(a[20]=o=>E.value=o),type:"text",placeholder:V.value?V.value.display_name:e(r)("assets.search_template_placeholder"),onInput:it,onFocus:a[21]||(a[21]=o=>E.value.length>=2&&(D.value=!0)),onBlur:ct,class:w({"border-red-500":e(l).errors.asset_template_id}),disabled:V.value!==null},null,8,["modelValue","placeholder","class","disabled"]),V.value?(d(),c("button",{key:0,type:"button",onClick:dt,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[n(b,{name:"X",class:"h-4 w-4"})])):_("",!0),ue.value?(d(),c("div",xa,[n(b,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),D.value&&M.value.length>0?(d(),c("div",wa,[(d(!0),c(T,null,L(M.value,o=>{var k,S;return d(),c("div",{key:o.id,onClick:$=>qe(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",Va,s(o.display_name),1),t("div",Ca,[o.category_name?(d(),c("span",$a,s(o.category_name),1)):_("",!0),o.category_name&&((k=o.company)!=null&&k.name_en||o.is_global)?(d(),c("span",Ua," • ")):_("",!0),o.is_global?(d(),c("span",Ta,s(e(r)("asset_templates.global")),1)):(S=o.company)!=null&&S.name_en?(d(),c("span",La,s(o.company.name_en),1)):_("",!0)])],8,Sa)}),128))])):_("",!0),D.value&&M.value.length===0&&!ue.value&&E.value.length>=2?(d(),c("div",Ra,[t("div",qa,s(e(r)("assets.no_templates_found")),1)])):_("",!0)]),n(e(We),{open:me.value,"onUpdate:open":a[31]||(a[31]=o=>me.value=o)},{default:m(()=>[n(e(Ze),{asChild:""},{default:m(()=>[n(e(U),{variant:"outline",type:"button"},{default:m(()=>[n(b,{name:"Plus",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),u(" "+s(e(r)("asset_templates.create_template")),1)]),_:1})]),_:1}),n(e(Je),{class:"sm:max-w-2xl max-h-[90vh] overflow-y-auto"},{default:m(()=>[n(e(He),null,{default:m(()=>[n(e(Ke),null,{default:m(()=>[u(s(e(r)("asset_templates.create_template")),1)]),_:1}),n(e(Ge),null,{default:m(()=>[u(s(e(r)("asset_templates.create_template_description")),1)]),_:1})]),_:1}),t("form",{onSubmit:fe(Fe,["prevent"]),class:"space-y-4"},[t("div",Ia,[n(e(h),{for:"template_name"},{default:m(()=>[u(s(e(r)("asset_templates.name"))+" *",1)]),_:1}),n(e(x),{id:"template_name",modelValue:e(y).name,"onUpdate:modelValue":a[22]||(a[22]=o=>e(y).name=o),error:e(y).errors.name,required:""},null,8,["modelValue","error"])]),t("div",ja,[t("div",Fa,[n(e(h),{for:"template_manufacturer"},{default:m(()=>[u(s(e(r)("asset_templates.manufacturer")),1)]),_:1}),n(e(x),{id:"template_manufacturer",modelValue:e(y).manufacturer,"onUpdate:modelValue":a[23]||(a[23]=o=>e(y).manufacturer=o),error:e(y).errors.manufacturer},null,8,["modelValue","error"])]),t("div",Ea,[n(e(h),{for:"template_model_name"},{default:m(()=>[u(s(e(r)("asset_templates.model_name")),1)]),_:1}),n(e(x),{id:"template_model_name",modelValue:e(y).model_name,"onUpdate:modelValue":a[24]||(a[24]=o=>e(y).model_name=o),error:e(y).errors.model_name},null,8,["modelValue","error"])])]),t("div",Da,[n(e(h),{for:"template_model_number"},{default:m(()=>[u(s(e(r)("asset_templates.model_number")),1)]),_:1}),n(e(x),{id:"template_model_number",modelValue:e(y).model_number,"onUpdate:modelValue":a[25]||(a[25]=o=>e(y).model_number=o),error:e(y).errors.model_number},null,8,["modelValue","error"])]),t("div",Ba,[n(e(h),{for:"template_category"},{default:m(()=>[u(s(e(r)("asset_templates.category"))+" *",1)]),_:1}),I(t("select",{id:"template_category","onUpdate:modelValue":a[26]||(a[26]=o=>e(y).asset_category_id=o),class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(y).errors.asset_category_id}]),required:""},[t("option",Pa,s(e(r)("asset_templates.select_category")),1),(d(!0),c(T,null,L(i.categories,o=>(d(),c("option",{key:o.id,value:o.id},s(o.name),9,za))),128))],2),[[ie,e(y).asset_category_id]]),e(y).errors.asset_category_id?(d(),c("div",Ma,s(e(y).errors.asset_category_id),1)):_("",!0)]),t("div",Oa,[n(e(h),{for:"template_company"},{default:m(()=>[u(s(e(r)("asset_templates.company"))+" *",1)]),_:1}),I(t("select",{id:"template_company","onUpdate:modelValue":a[27]||(a[27]=o=>e(y).company_id=o),class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(y).errors.company_id}]),required:""},[t("option",Xa,s(e(r)("asset_templates.select_company")),1),(d(!0),c(T,null,L(i.companies,o=>(d(),c("option",{key:o.id,value:o.id},s(o.name_en)+" "+s(o.name_ar?`(${o.name_ar})`:""),9,Aa))),128))],2),[[ie,e(y).company_id]]),e(y).errors.company_id?(d(),c("div",Na,s(e(y).errors.company_id),1)):_("",!0)]),t("div",Qa,[I(t("input",{id:"template_is_global",type:"checkbox","onUpdate:modelValue":a[28]||(a[28]=o=>e(y).is_global=o),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[Mt,e(y).is_global]]),n(e(h),{for:"template_is_global"},{default:m(()=>[u(s(e(r)("asset_templates.is_global")),1)]),_:1})]),t("p",Wa,s(e(r)("asset_templates.is_global_description")),1),t("div",Ja,[n(e(h),{for:"template_image"},{default:m(()=>[u(s(e(r)("asset_templates.image")),1)]),_:1}),t("div",Ha,[t("label",{for:"template_image",class:w(["flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-gray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500",{"border-red-500":P.value}])},[ee.value?(d(),c("div",Za,[t("img",{src:ee.value,alt:"Template preview",class:"w-full h-full object-contain rounded-lg"},null,8,eo),t("button",{type:"button",onClick:fe(je,["prevent"]),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors"},[n(b,{name:"X",class:"h-3 w-3"})])])):(d(),c("div",Ka,[n(b,{name:"Upload",class:"w-8 h-8 mb-2 text-gray-400"}),t("p",Ga,[t("span",Ya,s(e(r)("assets.click_to_upload")),1)])])),t("input",{id:"template_image",type:"file",accept:"image/*",onChange:ut,class:"hidden"},null,32)],2)]),t("div",to,[n(e(U),{type:"button",variant:"outline",onClick:a[29]||(a[29]=o=>le.value=!0),class:"flex-1"},{default:m(()=>[n(b,{name:"Camera",class:"h-4 w-4 mr-2"}),u(" "+s(e(r)("assets.take_photo")),1)]),_:1})]),P.value?(d(),c("div",so,s(P.value),1)):_("",!0),t("p",ao,s(e(r)("assets.image_will_be_resized")),1)])],32),n(e(Ye),null,{default:m(()=>[n(e(U),{variant:"outline",onClick:a[30]||(a[30]=o=>me.value=!1),type:"button"},{default:m(()=>[u(s(e(r)("common.cancel")),1)]),_:1}),n(e(U),{onClick:Fe,disabled:e(y).processing},{default:m(()=>[e(y).processing?(d(),se(b,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"})):_("",!0),u(" "+s(e(r)("common.create")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),e(l).errors.asset_template_id?(d(),c("div",oo,s(e(l).errors.asset_template_id),1)):_("",!0)]),t("div",ro,[n(e(h),{for:"serial_number"},{default:m(()=>[u(s(e(r)("assets.serial_number")),1)]),_:1}),t("div",lo,[n(e(x),{id:"serial_number",modelValue:e(l).serial_number,"onUpdate:modelValue":a[32]||(a[32]=o=>e(l).serial_number=o),type:"text",placeholder:e(r)("assets.serial_number_placeholder"),class:w([{"border-red-500":e(l).errors.serial_number},"flex-1"])},null,8,["modelValue","placeholder","class"]),n(e(U),{type:"button",variant:"outline",onClick:a[33]||(a[33]=o=>ae.value=!0),class:"shrink-0"},{default:m(()=>[n(b,{name:"ScanSearch",class:"h-4 w-4 mr-2"}),a[46]||(a[46]=u(" Scan "))]),_:1,__:[46]})]),t("p",no,s(e(r)("assets.serial_number_optional")),1),e(l).errors.serial_number?(d(),c("div",io,s(e(l).errors.serial_number),1)):_("",!0)]),t("div",co,[n(e(h),{for:"condition"},{default:m(()=>[u(s(e(r)("assets.condition"))+" *",1)]),_:1}),I(t("select",{id:"condition","onUpdate:modelValue":a[34]||(a[34]=o=>e(l).condition=o),class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-red-500":e(l).errors.condition}]),required:""},[t("option",uo,s(e(r)("assets.condition_good")),1),t("option",mo,s(e(r)("assets.condition_damaged")),1)],2),[[ie,e(l).condition]]),e(l).errors.condition?(d(),c("div",_o,s(e(l).errors.condition),1)):_("",!0)]),e(l).creation_mode==="bulk"?(d(),c("div",po,[n(e(h),{for:"quantity"},{default:m(()=>[u(s(e(r)("assets.quantity"))+" *",1)]),_:1}),n(e(x),{id:"quantity",modelValue:e(l).quantity,"onUpdate:modelValue":a[35]||(a[35]=o=>e(l).quantity=o),modelModifiers:{number:!0},type:"number",min:"1",max:"100",placeholder:e(r)("assets.quantity_placeholder"),class:w({"border-red-500":e(l).errors.quantity}),required:""},null,8,["modelValue","placeholder","class"]),t("p",go,s(e(r)("assets.quantity_description")),1),e(l).errors.quantity?(d(),c("div",fo,s(e(l).errors.quantity),1)):_("",!0)])):_("",!0),t("div",yo,[t("h4",vo,s(e(r)("assets.assignment_details")),1),t("div",ho,[n(e(h),{for:"company_search"},{default:m(()=>[u(s(e(r)("assets.company")),1)]),_:1}),t("div",bo,[t("div",ko,[n(e(x),{id:"company_search",modelValue:O.value,"onUpdate:modelValue":a[36]||(a[36]=o=>O.value=o),type:"text",placeholder:B.value?B.value.display_name:e(r)("assets.search_company_placeholder"),onInput:pt,onFocus:a[37]||(a[37]=o=>O.value.length>=2&&(X.value=!0)),onBlur:yt,class:w({"border-red-500":e(l).errors.company_id}),disabled:B.value!==null},null,8,["modelValue","placeholder","class","disabled"]),B.value?(d(),c("button",{key:0,type:"button",onClick:ft,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[n(b,{name:"X",class:"h-4 w-4"})])):_("",!0),ve.value?(d(),c("div",xo,[n(b,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),X.value&&H.value.length>0?(d(),c("div",wo,[(d(!0),c(T,null,L(H.value,o=>(d(),c("div",{key:o.id,onClick:k=>gt(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",Vo,s(o.display_name),1),t("div",Co,s(o.company_email),1)],8,So))),128))])):_("",!0)]),t("p",$o,s(e(r)("assets.company_optional")),1),e(l).errors.company_id?(d(),c("div",Uo,s(e(l).errors.company_id),1)):_("",!0)]),t("div",To,[n(e(h),{for:"department_search"},{default:m(()=>[u(s(e(r)("assets.department")),1)]),_:1}),t("div",Lo,[t("div",Ro,[n(e(x),{id:"department_search",modelValue:A.value,"onUpdate:modelValue":a[38]||(a[38]=o=>A.value=o),type:"text",placeholder:G.value?G.value.display_name:e(r)("assets.search_department_placeholder"),onInput:ht,onFocus:a[39]||(a[39]=o=>A.value.length>=2&&(N.value=!0)),onBlur:kt,class:w({"border-red-500":e(l).errors.department_id}),disabled:G.value!==null},null,8,["modelValue","placeholder","class","disabled"]),G.value?(d(),c("button",{key:0,type:"button",onClick:xe,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[n(b,{name:"X",class:"h-4 w-4"})])):_("",!0),he.value?(d(),c("div",qo,[n(b,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),N.value&&K.value.length>0?(d(),c("div",Io,[(d(!0),c(T,null,L(K.value,o=>(d(),c("div",{key:o.id,onClick:k=>bt(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",Fo,s(o.display_name),1),t("div",Eo,[u(s(o.company_name)+" ",1),o.description?(d(),c("span",Do," • "+s(o.description),1)):_("",!0)])],8,jo))),128))])):_("",!0)]),t("p",Bo,s(e(r)("assets.department_optional")),1),e(l).errors.department_id?(d(),c("div",Po,s(e(l).errors.department_id),1)):_("",!0)]),t("div",zo,[n(e(h),{for:"employee_search"},{default:m(()=>[u(s(e(r)("assets.assign_to_employee")),1)]),_:1}),t("div",Mo,[t("div",Oo,[n(e(x),{id:"employee_search",modelValue:Q.value,"onUpdate:modelValue":a[40]||(a[40]=o=>Q.value=o),type:"text",placeholder:Z.value?Z.value.display_name:e(r)("assets.search_employee_placeholder"),onInput:wt,onFocus:a[41]||(a[41]=o=>Q.value.length>=2&&(W.value=!0)),onBlur:Vt,class:w({"border-red-500":e(l).errors.assigned_to}),disabled:Z.value!==null},null,8,["modelValue","placeholder","class","disabled"]),Z.value?(d(),c("button",{key:0,type:"button",onClick:ne,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[n(b,{name:"X",class:"h-4 w-4"})])):_("",!0),be.value?(d(),c("div",Xo,[n(b,{name:"Loader2",class:"h-4 w-4 animate-spin text-gray-400"})])):_("",!0)]),W.value&&Y.value.length>0?(d(),c("div",Ao,[(d(!0),c(T,null,L(Y.value,o=>(d(),c("div",{key:o.id,onClick:k=>St(o),class:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[t("div",Qo,s(o.display_name),1),t("div",Wo,[u(s(o.email)+" ",1),o.department?(d(),c("span",Jo," • "+s(o.department),1)):_("",!0),o.company_name?(d(),c("span",Ho," • "+s(o.company_name),1)):_("",!0)])],8,No))),128))])):_("",!0)]),t("p",Ko,s(e(r)("assets.assign_to_employee_optional")),1),e(l).errors.assigned_to?(d(),c("div",Go,s(e(l).errors.assigned_to),1)):_("",!0)])]),V.value?(d(),c("div",Yo,[t("h4",Zo,s(e(r)("assets.selected_template")),1),t("div",er,[t("div",null,[t("strong",null,s(e(r)("assets.name"))+":",1),u(" "+s(V.value.name),1)]),V.value.manufacturer?(d(),c("div",tr,[t("strong",null,s(e(r)("assets.manufacturer"))+":",1),u(" "+s(V.value.manufacturer),1)])):_("",!0),V.value.model_name?(d(),c("div",sr,[t("strong",null,s(e(r)("assets.model"))+":",1),u(" "+s(V.value.model_name),1)])):_("",!0),V.value.asset_category?(d(),c("div",ar,[t("strong",null,s(e(r)("assets.category"))+":",1),u(" "+s(V.value.asset_category.name),1)])):_("",!0)])])):_("",!0)])):C.value===3?(d(),c("div",or,[t("div",rr,[t("div",lr,[n(e(h),{for:"asset_image"},{default:m(()=>[u(s(e(r)("assets.image")),1)]),_:1}),t("div",nr,[t("label",{for:"asset_image",class:w(["flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-gray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500",{"border-red-500":J.value}])},[re.value?(d(),c("div",mr,[t("img",{src:re.value,alt:"Asset preview",class:"w-full h-full object-contain rounded-lg"},null,8,_r),t("button",{type:"button",onClick:fe($t,["prevent"]),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors"},[n(b,{name:"X",class:"h-4 w-4"})])])):(d(),c("div",ir,[n(b,{name:"Upload",class:"w-10 h-10 mb-3 text-gray-400"}),t("p",dr,[t("span",cr,s(e(r)("assets.click_to_upload")),1),u(" "+s(e(r)("assets.or_drag_and_drop")),1)]),t("p",ur,s(e(r)("assets.supported_formats")),1)])),t("input",{id:"asset_image",type:"file",accept:"image/*",onChange:Ct,class:"hidden"},null,32)],2)]),J.value?(d(),c("div",pr,s(J.value),1)):_("",!0),t("p",gr,s(e(r)("assets.image_optional")),1)])]),t("div",fr,[t("h4",yr,s(e(r)("assets.review_asset")),1),t("div",vr,[t("div",null,[t("strong",null,s(e(r)("assets.creation_mode"))+":",1),e(l).creation_mode==="single"?(d(),c("span",hr,s(e(r)("assets.single_location")),1)):e(l).creation_mode==="bulk"?(d(),c("span",br,s(e(r)("assets.bulk_creation")),1)):(d(),c("span",kr,s(e(r)("assets.workstation_range")),1))]),e(l).creation_mode!=="workstation_range"?(d(),c("div",xr,[t("strong",null,s(e(r)("assets.location"))+":",1),u(" "+s(((p=q.value)==null?void 0:p.display_name)||"—"),1)])):_("",!0),e(l).creation_mode==="workstation_range"?(d(),c("div",wr,[t("strong",null,s(e(r)("assets.workstation_range"))+":",1),u(" "+s(e(l).workstation_prefix)+s(e(l).workstation_start)+" to "+s(e(l).workstation_prefix)+s(e(l).workstation_end),1)])):_("",!0),t("div",null,[t("strong",null,s(e(r)("assets.template"))+":",1),u(" "+s(((f=V.value)==null?void 0:f.display_name)||"—"),1)]),t("div",null,[t("strong",null,s(e(r)("assets.serial_number"))+":",1),u(" "+s(e(l).serial_number||e(r)("assets.not_provided")),1)]),t("div",null,[t("strong",null,s(e(r)("assets.condition"))+":",1),u(" "+s(e(l).condition==="good"?e(r)("assets.condition_good"):e(r)("assets.condition_damaged")),1)]),e(l).creation_mode==="bulk"?(d(),c("div",Sr,[t("strong",null,s(e(r)("assets.quantity"))+":",1),u(" "+s(e(l).quantity)+" "+s(e(l).quantity===1?e(r)("assets.asset"):e(r)("assets.assets")),1)])):_("",!0),e(l).creation_mode==="workstation_range"?(d(),c("div",Vr,[t("strong",null,s(e(r)("assets.workstations"))+":",1),u(" "+s(e(l).workstation_end-e(l).workstation_start+1)+" "+s(e(r)("assets.workstations")),1)])):_("",!0),t("div",null,[t("strong",null,s(e(r)("assets.image"))+":",1),u(" "+s(oe.value?oe.value.name:e(r)("assets.not_provided")),1)])]),e(l).creation_mode==="bulk"&&e(l).quantity>1?(d(),c("div",Cr,[t("div",$r,[n(b,{name:"Info",class:"h-4 w-4 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),t("div",Ur,[t("p",Tr,s(e(r)("assets.bulk_creation_notice")),1),t("p",Lr,s(e(r)("assets.bulk_creation_description",{quantity:e(l).quantity})),1)])])])):_("",!0),e(l).creation_mode==="workstation_range"?(d(),c("div",Rr,[t("div",qr,[n(b,{name:"Monitor",class:"h-4 w-4 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),t("div",Ir,[t("p",jr,s(e(r)("assets.workstation_creation_notice")),1),t("p",Fr,s(e(r)("assets.workstation_creation_description",{count:e(l).workstation_end-e(l).workstation_start+1,prefix:e(l).workstation_prefix,start:e(l).workstation_start,end:e(l).workstation_end})),1)])])])):_("",!0)])])):_("",!0)]}),_:1})]),_:1}),t("div",Er,[t("div",Dr,[n(e(U),{variant:"outline",asChild:""},{default:m(()=>[n(e(Ot),{href:i.route("assets.index")},{default:m(()=>[n(b,{name:"ArrowLeft",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),u(" "+s(e(r)("common.cancel")),1)]),_:1},8,["href"])]),_:1}),C.value>1?(d(),se(e(U),{key:0,variant:"outline",onClick:Tt},{default:m(()=>[n(b,{name:"ChevronLeft",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2"}),u(" "+s(e(r)("common.previous")),1)]),_:1})):_("",!0)]),t("div",Br,[C.value<ye?(d(),se(e(U),{key:0,onClick:Ut,disabled:!ke.value},{default:m(()=>[u(s(e(r)("common.next"))+" ",1),n(b,{name:"ChevronRight",class:"h-4 w-4 ml-2 rtl:ml-0 rtl:mr-2"})]),_:1},8,["disabled"])):(d(),se(e(U),{key:1,onClick:Lt,disabled:!ke.value||e(l).processing},{default:m(()=>[e(l).processing?(d(),se(b,{key:0,name:"Loader2",class:"h-4 w-4 mr-2 rtl:mr-0 rtl:ml-2 animate-spin"})):_("",!0),u(" "+s(e(r)("assets.create_asset")),1)]),_:1},8,["disabled"]))])])]),n(et,{modelValue:ae.value,"onUpdate:modelValue":a[42]||(a[42]=p=>ae.value=p),title:"Scan Serial Number",description:"Position the barcode or QR code on the asset within the camera view to scan the serial number automatically. Supports all common barcode formats and QR codes.",onScanned:It,onCancel:a[43]||(a[43]=p=>ae.value=!1)},null,8,["modelValue"]),n(et,{modelValue:le.value,"onUpdate:modelValue":a[44]||(a[44]=p=>le.value=p),title:"Take Template Photo",description:"Position the asset within the camera view to take a photo for the template. The image will be automatically resized to under 1.8MB.",onScanned:mt,onCancel:a[45]||(a[45]=p=>le.value=!1),"enable-camera-capture":!0},null,8,["modelValue"])]),_:1},8,["breadcrumbs"])],64))}});export{hl as default};
